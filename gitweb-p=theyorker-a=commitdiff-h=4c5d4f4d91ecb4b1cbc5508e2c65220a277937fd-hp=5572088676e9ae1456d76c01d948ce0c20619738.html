<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<!-- git web interface version 1.5.6.5, (C) 2005-2006, Kay Sievers <kay.sievers@vrfy.org>, Christian Gierke -->
<!-- git core binaries version 1.5.6.5 -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<meta name="generator" content="gitweb/1.5.6.5 git/1.5.6.5"/>
<meta name="robots" content="index, nofollow"/>
<title>dev2.theyorker.co.uk Git - theyorker/commitdiff</title>
<link rel="stylesheet" type="text/css" href="http://dev2.theyorker.co.uk/gitweb.css"/>
<link rel="alternate" title="theyorker - log - RSS feed" href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=rss" type="application/rss+xml" />
<link rel="alternate" title="theyorker - log - RSS feed (no merges)" href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=rss;opt=--no-merges" type="application/rss+xml" />
<link rel="alternate" title="theyorker - log - Atom feed" href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=atom;opt=--no-merges" type="application/atom+xml" />
<link rel="alternate" title="theyorker - log - Atom feed (no merges)" href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=atom;opt=--no-merges" type="application/atom+xml" />
<link rel="shortcut icon" href="http://dev2.theyorker.co.uk/git-favicon.png" type="image/png" />
</head>
<body>
<div class="page_header">
<a title="git homepage" href="http://git.or.cz/"><img src="http://dev2.theyorker.co.uk/git-logo.png" width="72" height="27" alt="git" class="logo"/></a><a href="http://dev2.theyorker.co.uk/gitweb">projects</a> / <a href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=summary">theyorker</a> / commitdiff
</div>
<form method="get" action="/gitweb" enctype="application/x-www-form-urlencoded">
<div class="search">
<input name="p" type="hidden" value="theyorker" />
<input name="a" type="hidden" value="search" />
<input name="h" type="hidden" value="4c5d4f4d91ecb4b1cbc5508e2c65220a277937fd" />
<select name="st" >
<option selected="selected" value="commit">commit</option>
<option value="grep">grep</option>
<option value="author">author</option>
<option value="committer">committer</option>
<option value="pickaxe">pickaxe</option>
</select><sup><a href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=search_help">?</a></sup> search:
<input type="text" name="s"  />
<span title="Extended regular expression"><label><input type="checkbox" name="sr" value="1" />re</label></span></div>
</form>
<div class="page_nav">
<a href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=summary">summary</a> | <a href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=shortlog;h=4c5d4f4d91ecb4b1cbc5508e2c65220a277937fd">shortlog</a> | <a href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=log;h=4c5d4f4d91ecb4b1cbc5508e2c65220a277937fd">log</a> | <a href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=commit;h=4c5d4f4d91ecb4b1cbc5508e2c65220a277937fd">commit</a> | commitdiff | <a href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=tree;h=6742274a405fc324c5a386bca4544a616a3337d2;hb=4c5d4f4d91ecb4b1cbc5508e2c65220a277937fd">tree</a><br/>
<a href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=commitdiff_plain;h=4c5d4f4d91ecb4b1cbc5508e2c65220a277937fd;hp=5572088676e9ae1456d76c01d948ce0c20619738">raw</a> (from parent 1: <a href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=commitdiff;h=5572088676e9ae1456d76c01d948ce0c20619738">5572088</a>)<br/>
</div>
<div class="header">
<a class="title" href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=commit;h=4c5d4f4d91ecb4b1cbc5508e2c65220a277937fd">destoy session if empty on exit</a>
</div>
<div class="author_date">James Hogan [Thu, 23 Apr 2009 09:26:28 +0000 (10:26 +0100)]</div>
<div class="page_body">
<div class="list_head">
</div>
<table class="diff_tree">
<tr class="dark">
<td><a class="list" href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=blob;f=system/application/helpers/init_helper.php;h=fa97ac60fbf242dd14e2060f9238c2a6bd0f80b2;hb=4c5d4f4d91ecb4b1cbc5508e2c65220a277937fd">system/application/helpers/init_helper.php</a></td>
<td></td>
<td class="link"><a href="gitweb-p=theyorker-a=commitdiff-h=4c5d4f4d91ecb4b1cbc5508e2c65220a277937fd-hp=5572088676e9ae1456d76c01d948ce0c20619738.html#patch1">patch</a> | <a href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=blob;f=system/application/helpers/init_helper.php;h=fa97ac60fbf242dd14e2060f9238c2a6bd0f80b2;hb=4c5d4f4d91ecb4b1cbc5508e2c65220a277937fd">blob</a> | <a href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=history;f=system/application/helpers/init_helper.php;hb=4c5d4f4d91ecb4b1cbc5508e2c65220a277937fd">history</a></td>
</tr>
</table>
<br/>
<div class="patchset">
<div class="patch" id="patch1">
<div class="diff header">diff --git <a class="path" href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=blob;f=system/application/helpers/init_helper.php;h=c32f848b941af57b863e8ee6fac79c6703228b8f;hb=5572088676e9ae1456d76c01d948ce0c20619738">a/system/application/helpers/init_helper.php</a> <a class="path" href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=blob;f=system/application/helpers/init_helper.php;h=fa97ac60fbf242dd14e2060f9238c2a6bd0f80b2;hb=4c5d4f4d91ecb4b1cbc5508e2c65220a277937fd">b/system/application/helpers/init_helper.php</a></div>
<div class="diff extended_header">
index <a class="hash" href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=blob;f=system/application/helpers/init_helper.php;h=c32f848b941af57b863e8ee6fac79c6703228b8f;hb=5572088676e9ae1456d76c01d948ce0c20619738">c32f848</a>..<a class="hash" href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=blob;f=system/application/helpers/init_helper.php;h=fa97ac60fbf242dd14e2060f9238c2a6bd0f80b2;hb=4c5d4f4d91ecb4b1cbc5508e2c65220a277937fd">fa97ac6</a> 100644<span class="info"> (file)</span><br/>
</div>
<div class="diff from_file">--- a/<a class="path" href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=blob;f=system/application/helpers/init_helper.php;h=c32f848b941af57b863e8ee6fac79c6703228b8f;hb=5572088676e9ae1456d76c01d948ce0c20619738">system/application/helpers/init_helper.php</a></div>
<div class="diff to_file">+++ b/<a class="path" href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=blob;f=system/application/helpers/init_helper.php;h=fa97ac60fbf242dd14e2060f9238c2a6bd0f80b2;hb=4c5d4f4d91ecb4b1cbc5508e2c65220a277937fd">system/application/helpers/init_helper.php</a></div>
<div class="diff chunk_header"><span class="chunk_info">@@ <a class="list" href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=blob;f=system/application/helpers/init_helper.php;h=c32f848b941af57b863e8ee6fac79c6703228b8f;hb=5572088676e9ae1456d76c01d948ce0c20619738#l32">-32,4</a> <a class="list" href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=blob;f=system/application/helpers/init_helper.php;h=fa97ac60fbf242dd14e2060f9238c2a6bd0f80b2;hb=4c5d4f4d91ecb4b1cbc5508e2c65220a277937fd#l32">+32,14</a> @@</span><span class="section">&nbsp;function&nbsp;SpecialInitAssert($Assertion,&nbsp;$FailMessage)</span></div>
<div class="diff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$Assertion;</div>
<div class="diff">&nbsp;}</div>
<div class="diff">&nbsp;</div>
<div class="diff add">+///&nbsp;Destroy&nbsp;the&nbsp;current&nbsp;session&nbsp;if&nbsp;it&nbsp;contains&nbsp;no&nbsp;data</div>
<div class="diff add">+function&nbsp;CloseSessionIfEmpty()</div>
<div class="diff add">+{</div>
<div class="diff add">+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(0&nbsp;==&nbsp;strlen(session_encode()))&nbsp;{</div>
<div class="diff add">+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;session_destroy();</div>
<div class="diff add">+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
<div class="diff add">+}</div>
<div class="diff add">+//&nbsp;If&nbsp;session&nbsp;is&nbsp;empty,&nbsp;we&nbsp;may&nbsp;as&nbsp;well&nbsp;delete&nbsp;it,&nbsp;so&nbsp;that&nbsp;googlebot&nbsp;doesn't&nbsp;clutter&nbsp;session&nbsp;directory</div>
<div class="diff add">+register_shutdown_function('CloseSessionIfEmpty');</div>
<div class="diff add">+</div>
<div class="diff">&nbsp;?&gt;</div>
</div>
</div>
</div>
<div class="page_footer">
<div class="page_footer_text">The Yorker's Website Repo</div>
<a class="rss_logo" title="log RSS feed" href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=rss">RSS</a>
<a class="rss_logo" title="log Atom feed" href="http://dev2.theyorker.co.uk/gitweb?p=theyorker;a=atom">Atom</a>
</div>
</body>
</html>