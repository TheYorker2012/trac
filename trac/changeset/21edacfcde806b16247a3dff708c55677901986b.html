<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  

  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>
      Changeset 21edacfcde806b16247a3dff708c55677901986b –
      The Yorker
    </title>
        <link rel="search" href="../search.html" />
        <link rel="prev" href="40e789f4e02390183ce64cf051c69ac4394df41c.html" title="Changeset 40e789f4e02390183ce64cf051c69ac4394df41c" />
        <link rel="last" href="4663e7077f9a41a86111194402f498613109bfa4.html" title="Changeset 4663e7077f9a41a86111194402f498613109bfa4" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="http://dev2.theyorker.co.uk/trac/changeset/21edacfcde806b16247a3dff708c55677901986b?format=diff&new=21edacfcde806b16247a3dff708c55677901986b" type="text/plain" class="diff" title="Unified Diff" /><link rel="alternate" href="http://dev2.theyorker.co.uk/trac/changeset/21edacfcde806b16247a3dff708c55677901986b?format=zip&new=21edacfcde806b16247a3dff708c55677901986b" type="application/zip" class="zip" title="Zip Archive" />
        <link rel="next" href="887ffa82693eb216ff290ff11c327e109faf3cfd.html" title="Changeset 887ffa82693eb216ff290ff11c327e109faf3cfd" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/changeset.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/diff.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/code.css" type="text/css" />
        <link rel="first" href="8f01cfef778eb063e661839b60a7226601ef07b1.html" title="Changeset 8f01cfef778eb063e661839b60a7226601ef07b1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search The Yorker" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/diff.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/trac/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("li.entry h2 a").parent().addAnchor("Link to this diff");
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="../../trac.html"><img src="../../apps-logo.png" alt="The Yorker" /></a>
      </div>
      <form id="search" action="/trac/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first">logged in as nick_evans</li><li><a href="../../trac.html">Logout</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../browser.html">Browse Source</a></li><li><a href="../report.html">View Tickets</a></li><li><a href="../newticket.html">New Ticket</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
            <li class="first "><span>&larr; <a class="prev" href="40e789f4e02390183ce64cf051c69ac4394df41c.html" title="Changeset 40e789f4e02390183ce64cf051c69ac4394df41c">Previous Changeset</a></span></li><li class="last"><span><a class="next" href="887ffa82693eb216ff290ff11c327e109faf3cfd.html" title="Changeset 887ffa82693eb216ff290ff11c327e109faf3cfd">Next Changeset</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="changeset">
      <div id="title">
        <h1>Changeset 21edacfcde806b16247a3dff708c55677901986b</h1>
      </div>
      <form id="prefs" action="">
        <div>
    <label for="style">View differences</label>
    <select id="style" name="style">
      <option selected="selected" value="inline">inline</option>
      <option value="sidebyside">side by side</option>
    </select>
    <div class="field">
      Show <input type="text" name="contextlines" id="contextlines" size="2" maxlength="3" value="2" />
      <label for="contextlines">lines around each change</label>
    </div>
    <fieldset id="ignore">
      <legend>Ignore:</legend>
      <div class="field">
        <input type="checkbox" id="ignoreblanklines" name="ignoreblanklines" />
        <label for="ignoreblanklines">Blank lines</label>
      </div>
      <div class="field">
        <input type="checkbox" id="ignorecase" name="ignorecase" />
        <label for="ignorecase">Case changes</label>
      </div>
      <div class="field">
        <input type="checkbox" id="ignorewhitespace" name="ignorewhitespace" />
        <label for="ignorewhitespace">White space changes</label>
      </div>
    </fieldset>
    <div class="buttons">
      <input type="submit" name="update" value="Update" />
    </div>
        </div>
      </form>
      <dl id="overview">
          <dt class="property time">Timestamp:</dt>
          <dd class="time">10/24/07 21:18:37 (<a class="timeline" href="http://dev2.theyorker.co.uk/trac/timeline?from=2007-10-24T21%3A18%3A37Z%2B0000&precision=second" title="2007-10-24T21:18:37Z+0000 in Timeline">8 years</a> ago)</dd>
          <dt class="property author">Author:</dt>
          <dd class="author">James Hogan &lt;james_hogan@…&gt;</dd>
              <dt class="property">Parents:</dt>
              <dd><a class="changeset" href="40e789f4e02390183ce64cf051c69ac4394df41c.html" title="calendar event edit: default until date to 23:59:59 to include events on  ...">40e789f4e02390183ce64cf051c69ac4394df41c</a></dd>
              <dt class="property">Children:</dt>
              <dd><a class="changeset" href="887ffa82693eb216ff290ff11c327e109faf3cfd.html" title="commented out the links to make changes to calendar events such as  ...">887ffa82693eb216ff290ff11c327e109faf3cfd</a></dd>
              <dt class="property">git-committer:</dt>
              <dd>James Hogan &lt;james_hogan@theyorker.co.uk&gt; / 2007-10-24T21:18:37Z+0000</dd>
          <dt class="property message">Message:</dt>
          <dd class="message searchable">
            
            
              <p>
Calendar tweaks for location field<br />
</p>
<blockquote>
<p>
theres a new events.event_location_name field in the database to store the default location for an event<br />
occurrences.event_occurrence_location_name is now NULLable and defaults to NULL, allowing optional overriding of event location name<br />
basically the backend stuff now handle the event location and the interface simply uses the event wide location for editing, and does display occurrence location overrides when available (but  they shouldn't be yet)<br />
</p>
</blockquote>

            
            
          </dd>
          <dt class="property location">Location:</dt>
          <dd class="searchable"><a href="http://dev2.theyorker.co.uk/trac/browser/system/application?rev=21edacfcde806b16247a3dff708c55677901986b">system/application</a></dd>
        <dt class="property files">Files:</dt>
        <dd class="files">
          <div class="legend" id="file-legend">
            <dl>
              <dt class="mod"></dt><dd>6 modified</dd>
            </dl>
          </div>
          <br />
          <ul>
            <li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_backend.php?rev=21edacfcde806b16247a3dff708c55677901986b">
              libraries/Calendar_backend.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="21edacfcde806b16247a3dff708c55677901986b.html#file0">2 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=21edacfcde806b16247a3dff708c55677901986b">
              libraries/Calendar_source_yorker.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="21edacfcde806b16247a3dff708c55677901986b.html#file1">5 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=21edacfcde806b16247a3dff708c55677901986b">
              models/calendar/events_model.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="21edacfcde806b16247a3dff708c55677901986b.html#file2">9 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/subcontrollers/calendar_subcontroller.php?rev=21edacfcde806b16247a3dff708c55677901986b">
              models/subcontrollers/calendar_subcontroller.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="21edacfcde806b16247a3dff708c55677901986b.html#file3">8 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/event.php?rev=21edacfcde806b16247a3dff708c55677901986b">
              views/calendar/event.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="21edacfcde806b16247a3dff708c55677901986b.html#file4">1 diff</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/event_edit.php?rev=21edacfcde806b16247a3dff708c55677901986b">
              views/calendar/event_edit.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="21edacfcde806b16247a3dff708c55677901986b.html#file5">1 diff</a>)
            </li>
          </ul>
        </dd>
      </dl>
      <div class="diff">
        <div class="legend" id="diff-legend">
          <h3>Legend:</h3>
          <dl>
            <dt class="unmod"></dt><dd>Unmodified</dd>
            <dt class="add"></dt><dd>Added</dd>
            <dt class="rem"></dt><dd>Removed</dd>
          </dl>
        </div>
        <div class="diff">
  <ul class="entries">
      <li class="entry">
        <h2 id="file0">
          <a title="Show the changeset 21edacfcde806b16247a3dff708c55677901986b restricted to system/application/libraries/Calendar_backend.php" href="http://dev2.theyorker.co.uk/trac/changeset/21edacfcde806b16247a3dff708c55677901986b/system/application/libraries/Calendar_backend.php">system/application/libraries/Calendar_backend.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 387ab0fc6a569ac536a8da8b4d1a35d594b8c78a">
                    <a title="Show revision 387ab0fc6a569ac536a8da8b4d1a35d594b8c78a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_backend.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L112">
                      r387ab</a>
                  </th>
                  <th title="Revision 21edacfcde806b16247a3dff708c55677901986b">
                    <a title="Show revision 21edacfcde806b16247a3dff708c55677901986b of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_backend.php?rev=21edacfcde806b16247a3dff708c55677901986b#L112">
                      r21eda</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>112</th><th>112</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return in_array($Action, $this-&gt;UserPermissions);</span> </td>
                  </tr><tr>
                          <th>113</th><th>113</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>114</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>115</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// Get the location description of the occurrence.</ins> </td>
                  </tr><tr>
                          <th> </th><th>116</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function GetLocationDescription()</ins> </td>
                  </tr><tr>
                          <th> </th><th>117</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr>
                          <th> </th><th>118</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return NULL === $this-&gt;LocationDescription</ins> </td>
                  </tr><tr>
                          <th> </th><th>119</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ?&nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Event-&gt;LocationDescription</ins> </td>
                  </tr><tr>
                          <th> </th><th>120</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :&nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;LocationDescription;</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>121</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>114</th><th>122</th><td class="l"><span>}</span> </td>
                  </tr><tr>
                          <th>115</th><th>123</th><td class="l"><span></span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_backend.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L150">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_backend.php?rev=21edacfcde806b16247a3dff708c55677901986b#L158">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>150</th><th>158</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// html,NULL Description of event as html.</span> </td>
                  </tr><tr>
                          <th>151</th><th>159</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; public $DescriptionHtml = NULL;</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>160</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// string,NULL Description of location.</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>161</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; public $LocationDescription&nbsp; &nbsp; &nbsp;= NULL;</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>152</th><th>162</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array[&amp;CalendarOrganisation] Array of owner organisation references.</span> </td>
                  </tr><tr>
                          <th>153</th><th>163</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; public $Organisations&nbsp; &nbsp;= array();</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file1">
          <a title="Show the changeset 21edacfcde806b16247a3dff708c55677901986b restricted to system/application/libraries/Calendar_source_yorker.php" href="http://dev2.theyorker.co.uk/trac/changeset/21edacfcde806b16247a3dff708c55677901986b/system/application/libraries/Calendar_source_yorker.php">system/application/libraries/Calendar_source_yorker.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 387ab0fc6a569ac536a8da8b4d1a35d594b8c78a">
                    <a title="Show revision 387ab0fc6a569ac536a8da8b4d1a35d594b8c78a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L156">
                      r387ab</a>
                  </th>
                  <th title="Revision 21edacfcde806b16247a3dff708c55677901986b">
                    <a title="Show revision 21edacfcde806b16247a3dff708c55677901986b of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=21edacfcde806b16247a3dff708c55677901986b#L156">
                      r21eda</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>156</th><th>156</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'UNIX_TIMESTAMP(event_occurrences.event_occurrence_end_time)&nbsp; &nbsp; AS end,'.</span> </td>
                  </tr><tr>
                          <th>157</th><th>157</th><td class="l"><span>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_occurrences.event_occurrence_time_associated&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AS time_associated,'.</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>158</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_occurrences.event_occurrence_location_name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AS location,'.</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>159</th><th>158</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_occurrences.event_occurrence_ends_late&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AS ends_late,'.</span> </td>
                  </tr><tr>
                          <th>160</th><th>159</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L174">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=21edacfcde806b16247a3dff708c55677901986b#L173">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>174</th><th>173</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'events.event_name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AS name,'.</span> </td>
                  </tr><tr>
                          <th>175</th><th>174</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'events.event_description&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AS description,'.</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>175</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'events.event_location_name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AS event_location,'.</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>176</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_occurrences.event_occurrence_location_name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AS occurrence_location,'.</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>176</th><th>177</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //'events.event_blurb AS blurb,'.</span> </td>
                  </tr><tr>
                          <th>177</th><th>178</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'UNIX_TIMESTAMP(events.event_start)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AS base_start,'.</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L223">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=21edacfcde806b16247a3dff708c55677901986b#L224">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>223</th><th>224</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $event-&gt;Name = $row['name'];</span> </td>
                  </tr><tr>
                          <th>224</th><th>225</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $event-&gt;Description = $row['description'];</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>226</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $event-&gt;LocationDescription = $row['event_location'];</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>225</th><th>227</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $event-&gt;LastUpdate = $row['last_update'];</span> </td>
                  </tr><tr>
                          <th>226</th><th>228</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL !== $row['base_start']) {</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L263">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=21edacfcde806b16247a3dff708c55677901986b#L265">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>263</th><th>265</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>264</th><th>266</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence-&gt;TimeAssociated = $row['time_associated'];</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>265</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence-&gt;LocationDescription = $row['<del></del>location'];</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>267</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence-&gt;LocationDescription = $row['<ins>occurrence_</ins>location'];</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>266</th><th>268</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @todo location link</span> </td>
                  </tr><tr>
                          <th>267</th><th>269</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($row['ends_late']) {</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L644">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=21edacfcde806b16247a3dff708c55677901986b#L646">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>644</th><th>646</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>645</th><th>647</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>648</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (array_key_exists('location_name', $Changes) &amp;&amp;</ins> </td>
                  </tr><tr>
                          <th> </th><th>649</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ($Changes['location_name'] !== $Event-&gt;LocationDescription))</ins> </td>
                  </tr><tr>
                          <th> </th><th>650</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr>
                          <th> </th><th>651</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $loc_changes['location_name'] = $Changes['location_name'];</ins> </td>
                  </tr><tr>
                          <th> </th><th>652</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>653</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>646</th><th>654</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (array_key_exists('time_associated', $Changes) &amp;&amp;</span> </td>
                  </tr><tr>
                          <th>647</th><th>655</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; is_bool($Changes['time_associated']) &amp;&amp;</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file2">
          <a title="Show the changeset 21edacfcde806b16247a3dff708c55677901986b restricted to system/application/models/calendar/events_model.php" href="http://dev2.theyorker.co.uk/trac/changeset/21edacfcde806b16247a3dff708c55677901986b/system/application/models/calendar/events_model.php">system/application/models/calendar/events_model.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 387ab0fc6a569ac536a8da8b4d1a35d594b8c78a">
                    <a title="Show revision 387ab0fc6a569ac536a8da8b4d1a35d594b8c78a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L225">
                      r387ab</a>
                  </th>
                  <th title="Revision 21edacfcde806b16247a3dff708c55677901986b">
                    <a title="Show revision 21edacfcde806b16247a3dff708c55677901986b of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=21edacfcde806b16247a3dff708c55677901986b#L225">
                      r21eda</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>225</th><th>225</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '\'postponed\'))),' .</span> </td>
                  </tr><tr>
                          <th>226</th><th>226</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_occurrences.event_occurrence_state)';</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>227</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>228</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>229</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// Produce an SQL expression for the location name of an occurrence.</ins> </td>
                  </tr><tr>
                          <th> </th><th>230</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /**</ins> </td>
                  </tr><tr>
                          <th> </th><th>231</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $EventAlias string Alias of event used in expression.</ins> </td>
                  </tr><tr>
                          <th> </th><th>232</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $OccurrenceAlias string Alias of occurrence used in expression.</ins> </td>
                  </tr><tr>
                          <th> </th><th>233</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return string SQL string expression.</ins> </td>
                  </tr><tr>
                          <th> </th><th>234</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</ins> </td>
                  </tr><tr>
                          <th> </th><th>235</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function ExpressionLocationName($EventAlias = 'events', $OccurrenceAlias = 'event_occurrences')</ins> </td>
                  </tr><tr>
                          <th> </th><th>236</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr>
                          <th> </th><th>237</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return "IF ($OccurrenceAlias.event_occurrence_location_name IS NOT NULL,'.</ins> </td>
                  </tr><tr>
                          <th> </th><th>238</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '$OccurrenceAlias.event_occurrence_location_name,'.</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>239</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '$EventAlias.event_location_name)";</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>227</th><th>240</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>228</th><th>241</th><td class="l"><span>}</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L760">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=21edacfcde806b16247a3dff708c55677901986b#L773">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>760</th><th>773</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Event occurrences</span> </td>
                  </tr><tr>
                          <th>761</th><th>774</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;IsEnabled('occurrences-all')) {</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>775</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence_query = new EventOccurrenceQuery();</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>762</th><th>776</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $filter = $this-&gt;mOccurrenceFilter;</span> </td>
                  </tr><tr>
                          <th>763</th><th>777</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $filter) {</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L774">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=21edacfcde806b16247a3dff708c55677901986b#L788">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>774</th><th>788</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //'user_update_ts'&nbsp; &nbsp;=&gt; 'UNIX_TIMESTAMP(events_occurrence_users.event_occurrence_user_timestamp)',</span> </td>
                  </tr><tr>
                          <th>775</th><th>789</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'blurb'&nbsp; &nbsp; =&gt; 'events.event_blurb',</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>776</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'shortloc' =&gt; <del>'event_occurrences.event_occurrence_location_name'</del>,</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>790</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'shortloc' =&gt; <ins>$occurrence_query-&gt;ExpressionLocationName()</ins>,</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>777</th><th>791</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'type'&nbsp; &nbsp; &nbsp;=&gt; 'event_types.event_type_name',</span> </td>
                  </tr><tr>
                          <th>778</th><th>792</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'state'&nbsp; &nbsp; =&gt; 'event_occurrences.event_occurrence_state',</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L1107">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=21edacfcde806b16247a3dff708c55677901986b#L1121">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1107</th><th>1121</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $EventData array Event data. The following are compulsory:</span> </td>
                  </tr><tr>
                          <th>1108</th><th>1122</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 'recur' RecurrenceSet Recurrences.</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1109</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array</span> </td>
                      </tr><tr>
                        <th>1110</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 'event_id' =&gt; new event id,</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1123</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 'location_name'</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1111</th><th>1124</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 'occurrences' array['YYYYMMDD' =&gt; array['HHMMSS' =&gt; array]] recur property overrides.</span> </td>
                  </tr><tr>
                          <th>1112</th><th>1125</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Fields are:</span> </td>
                  </tr><tr>
                          <th>1113</th><th>1126</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'location_id'</span> </td>
                  </tr><tr>
                          <th>1114</th><th>1127</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'location_name'</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>1128</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array</ins> </td>
                  </tr><tr>
                          <th> </th><th>1129</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 'event_id' =&gt; new event id.</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>1130</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 'occurrences' =&gt; number of occurrences generated.</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1115</th><th>1131</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @exception Exception The event could not be created.</span> </td>
                  </tr><tr>
                          <th>1116</th><th>1132</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L1131">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=21edacfcde806b16247a3dff708c55677901986b#L1147">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1131</th><th>1147</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'name'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; 'event_name',</span> </td>
                  </tr><tr>
                          <th>1132</th><th>1148</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'description'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'event_description',</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>1149</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'location_name'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'event_location_name',</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1133</th><th>1150</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre $EventData['category'] is valid</span> </td>
                  </tr><tr>
                          <th>1134</th><th>1151</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'category'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; 'event_type_id',</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L1193">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=21edacfcde806b16247a3dff708c55677901986b#L1210">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1193</th><th>1210</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence['time_associated'] = $EventData['time_associated'];</span> </td>
                  </tr><tr>
                          <th>1194</th><th>1211</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1195</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (array_key_exists('location', $EventData)) {</span> </td>
                      </tr><tr>
                        <th>1196</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence['location'] = $EventData['location'];</span> </td>
                      </tr><tr>
                        <th>1197</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1212</th><td class="r"><span>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Event now has its own location field</span> </td>
                      </tr><tr>
                        <th> </th><th>1213</th><td class="r"><span>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (array_key_exists('location', $EventData)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1214</th><td class="r"><span>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence['location'] = $EventData['location'];</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1215</th><td class="r"><span>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1198</th><th>1216</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence['state'] = 'draft';</span> </td>
                  </tr><tr>
                          <th>1199</th><th>1217</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrences[] = $occurrence;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L1284">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=21edacfcde806b16247a3dff708c55677901986b#L1302">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1284</th><th>1302</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'name'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; 'events.event_name',</span> </td>
                  </tr><tr>
                          <th>1285</th><th>1303</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'description'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'events.event_description',</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>1304</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'location_name'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'events.event_location_name',</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1286</th><th>1305</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'time_associated'&nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'events.event_time_associated',</span> </td>
                  </tr><tr>
                          <th>1287</th><th>1306</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'category'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; 'events.event_type_id',</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L1513">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=21edacfcde806b16247a3dff708c55677901986b#L1532">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1513</th><th>1532</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                  </tr><tr>
                          <th>1514</th><th>1533</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1515</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Check <del>owned</del></span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1534</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Check <ins>the event is owned by this user.</ins></span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1516</th><th>1535</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;db-&gt;select('COUNT(*)');</span> </td>
                  </tr><tr>
                          <th>1517</th><th>1536</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;db-&gt;from('events');</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L1996">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=21edacfcde806b16247a3dff708c55677901986b#L2015">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1996</th><th>2015</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; VALUES ('.$this-&gt;db-&gt;escape($EventId).',</span> </td>
                  </tr><tr>
                          <th>1997</th><th>2016</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "draft",</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1998</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <del>""</del>,</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>2017</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ins>DEFAULT</ins>,</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1999</th><th>2018</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FROM_UNIXTIME('.$this-&gt;db-&gt;escape($recurrence['start_time']).'),</span> </td>
                  </tr><tr>
                          <th>2000</th><th>2019</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FROM_UNIXTIME('.$this-&gt;db-&gt;escape($recurrence['start_time']).'),</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file3">
          <a title="Show the changeset 21edacfcde806b16247a3dff708c55677901986b restricted to system/application/models/subcontrollers/calendar_subcontroller.php" href="http://dev2.theyorker.co.uk/trac/changeset/21edacfcde806b16247a3dff708c55677901986b/system/application/models/subcontrollers/calendar_subcontroller.php">system/application/models/subcontrollers/calendar_subcontroller.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 387ab0fc6a569ac536a8da8b4d1a35d594b8c78a">
                    <a title="Show revision 387ab0fc6a569ac536a8da8b4d1a35d594b8c78a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/subcontrollers/calendar_subcontroller.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L974">
                      r387ab</a>
                  </th>
                  <th title="Revision 21edacfcde806b16247a3dff708c55677901986b">
                    <a title="Show revision 21edacfcde806b16247a3dff708c55677901986b of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/subcontrollers/calendar_subcontroller.php?rev=21edacfcde806b16247a3dff708c55677901986b#L974">
                      r21eda</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>974</th><th>974</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'name' =&gt; '',</span> </td>
                  </tr><tr>
                          <th>975</th><th>975</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'description' =&gt; '',</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>976</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'location<del></del>' =&gt; '',</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>976</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'location<ins>_name</ins>' =&gt; '',</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>977</th><th>977</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'category' =&gt; 0,</span> </td>
                  </tr><tr>
                          <th>978</th><th>978</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'time_associated' =&gt; true,</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/subcontrollers/calendar_subcontroller.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L1004">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/subcontrollers/calendar_subcontroller.php?rev=21edacfcde806b16247a3dff708c55677901986b#L1004">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1004</th><th>1004</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input_location = $this-&gt;input-&gt;post($prefix.'_location');</span> </td>
                  </tr><tr>
                          <th>1005</th><th>1005</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (false !== $input_location) {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1006</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['location<del></del>'] = $input_location;</span> </td>
                      </tr><tr>
                        <th>1007</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (strlen($input['location<del></del>']) &gt; 50) {</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1006</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['location<ins>_name</ins>'] = $input_location;</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1007</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (strlen($input['location<ins>_name</ins>']) &gt; 50) {</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1008</th><th>1008</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input_valid = false;</span> </td>
                  </tr><tr>
                          <th>1009</th><th>1009</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;messages-&gt;AddMessage('error', 'Event location is too long.');</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/subcontrollers/calendar_subcontroller.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L1019">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/subcontrollers/calendar_subcontroller.php?rev=21edacfcde806b16247a3dff708c55677901986b#L1019">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1019</th><th>1019</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset($_POST[$prefix.'_save'])) {</span> </td>
                  </tr><tr>
                          <th>1020</th><th>1020</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $confirm_list = $this-&gt;mMainSource-&gt;GetEventRecurChanges($event, $rset);</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>1021</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset($confirm_list['draft']) &amp;&amp; !$this-&gt;mMainSource-&gt;IsSupported('publish')) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>1022</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset($confirm_list['draft']);</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>1023</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1021</th><th>1024</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (empty($confirm_list)) {</span> </td>
                  </tr><tr>
                          <th>1022</th><th>1025</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $_POST[$prefix.'_confirm']['confirm_btn'] = 'Confirm';</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/subcontrollers/calendar_subcontroller.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L1069">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/subcontrollers/calendar_subcontroller.php?rev=21edacfcde806b16247a3dff708c55677901986b#L1072">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1069</th><th>1072</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'summary' =&gt; $input['name'],</span> </td>
                  </tr><tr>
                          <th>1070</th><th>1073</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'description' =&gt; $input['description'],</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1071</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'location' =&gt; $input['location<del></del>'],</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1074</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'location' =&gt; $input['location<ins>_name</ins>'],</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1072</th><th>1075</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'category' =&gt; $input['category'],</span> </td>
                  </tr><tr>
                          <th>1073</th><th>1076</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'timeassociated' =&gt; $input['time_associated'],</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/subcontrollers/calendar_subcontroller.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L1333">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/subcontrollers/calendar_subcontroller.php?rev=21edacfcde806b16247a3dff708c55677901986b#L1336">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1333</th><th>1336</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $categories = $this-&gt;mSource-&gt;GetAllCategories();</span> </td>
                  </tr><tr>
                          <th>1334</th><th>1337</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="first">
                          <th>1335</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $location = '';</del> </td>
                  </tr><tr>
                          <th>1336</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL !== $found_occurrence) {</del> </td>
                  </tr><tr>
                          <th>1337</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $location = $found_occurrence-&gt;LocationDescription;</del> </td>
                  </tr><tr class="last">
                          <th>1338</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1339</th><th>1338</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input = array(</span> </td>
                  </tr><tr>
                          <th>1340</th><th>1339</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'name' =&gt; $event-&gt;Name,</span> </td>
                  </tr><tr>
                          <th>1341</th><th>1340</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'description' =&gt; $event-&gt;Description,</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1342</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'location<del>' =&gt; $loca</del>tion,</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1341</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'location<ins>_name' =&gt; $event-&gt;LocationDescrip</ins>tion,</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1343</th><th>1342</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'category' =&gt; 0,</span> </td>
                  </tr><tr>
                          <th>1344</th><th>1343</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'time_associated' =&gt; $event-&gt;TimeAssociated,</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/subcontrollers/calendar_subcontroller.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L1373">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/subcontrollers/calendar_subcontroller.php?rev=21edacfcde806b16247a3dff708c55677901986b#L1372">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1373</th><th>1372</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input_location = $this-&gt;input-&gt;post($prefix.'_location');</span> </td>
                  </tr><tr>
                          <th>1374</th><th>1373</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (false !== $input_location) {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1375</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['location<del></del>'] = $input_location;</span> </td>
                      </tr><tr>
                        <th>1376</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (strlen($input['location<del></del>']) &gt; 50) {</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1374</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['location<ins>_name</ins>'] = $input_location;</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1375</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (strlen($input['location<ins>_name</ins>']) &gt; 50) {</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1377</th><th>1376</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input_valid = false;</span> </td>
                  </tr><tr>
                          <th>1378</th><th>1377</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;messages-&gt;AddMessage('error', 'Event location is too long.');</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/subcontrollers/calendar_subcontroller.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L1387">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/subcontrollers/calendar_subcontroller.php?rev=21edacfcde806b16247a3dff708c55677901986b#L1386">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1387</th><th>1386</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset($_POST[$prefix.'_save'])) {</span> </td>
                  </tr><tr>
                          <th>1388</th><th>1387</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $confirm_list = $this-&gt;mMainSource-&gt;GetEventRecurChanges($event, $rset);</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>1388</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset($confirm_list['draft']) &amp;&amp; !$this-&gt;mMainSource-&gt;IsSupported('publish')) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>1389</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset($confirm_list['draft']);</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>1390</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1389</th><th>1391</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (empty($confirm_list)) {</span> </td>
                  </tr><tr>
                          <th>1390</th><th>1392</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $_POST[$prefix.'_confirm']['confirm_btn'] = 'Confirm';</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/subcontrollers/calendar_subcontroller.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L1443">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/subcontrollers/calendar_subcontroller.php?rev=21edacfcde806b16247a3dff708c55677901986b#L1445">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1443</th><th>1445</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'summary' =&gt; $input['name'],</span> </td>
                  </tr><tr>
                          <th>1444</th><th>1446</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'description' =&gt; $input['description'],</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1445</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'location' =&gt; $input['location<del></del>'],</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1447</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'location' =&gt; $input['location<ins>_name</ins>'],</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1446</th><th>1448</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'category' =&gt; $input['category'],</span> </td>
                  </tr><tr>
                          <th>1447</th><th>1449</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'timeassociated' =&gt; $input['time_associated'],</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file4">
          <a title="Show the changeset 21edacfcde806b16247a3dff708c55677901986b restricted to system/application/views/calendar/event.php" href="http://dev2.theyorker.co.uk/trac/changeset/21edacfcde806b16247a3dff708c55677901986b/system/application/views/calendar/event.php">system/application/views/calendar/event.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 2f47b71eb7d9ffd10913797a012cebf4f090a9bd">
                    <a title="Show revision 2f47b71eb7d9ffd10913797a012cebf4f090a9bd of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/event.php?rev=2f47b71eb7d9ffd10913797a012cebf4f090a9bd#L35">
                      r2f47b</a>
                  </th>
                  <th title="Revision 21edacfcde806b16247a3dff708c55677901986b">
                    <a title="Show revision 21edacfcde806b16247a3dff708c55677901986b of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/event.php?rev=21edacfcde806b16247a3dff708c55677901986b#L35">
                      r21eda</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>35</th><th>35</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>36</th><th>36</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo('&lt;div&gt;');</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>37</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!empty($Occurrence-&gt;LocationDescription)) {</span> </td>
                      </tr><tr>
                        <th>38</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo('Location: '.htmlentities($Occurrence-&gt;LocationDescription, ENT_QUOTES, 'utf-8'));</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>37</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $location = $Occurrence-&gt;GetLocationDescription();</span> </td>
                      </tr><tr>
                        <th> </th><th>38</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_string($location) &amp;&amp; !empty($location)) {</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>39</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo('Location: '.htmlentities($location, ENT_QUOTES, 'utf-8'));</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>39</th><th>40</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo('&lt;br /&gt;');</span> </td>
                  </tr><tr>
                          <th>40</th><th>41</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file5">
          <a title="Show the changeset 21edacfcde806b16247a3dff708c55677901986b restricted to system/application/views/calendar/event_edit.php" href="http://dev2.theyorker.co.uk/trac/changeset/21edacfcde806b16247a3dff708c55677901986b/system/application/views/calendar/event_edit.php">system/application/views/calendar/event_edit.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 387ab0fc6a569ac536a8da8b4d1a35d594b8c78a">
                    <a title="Show revision 387ab0fc6a569ac536a8da8b4d1a35d594b8c78a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/event_edit.php?rev=387ab0fc6a569ac536a8da8b4d1a35d594b8c78a#L244">
                      r387ab</a>
                  </th>
                  <th title="Revision 21edacfcde806b16247a3dff708c55677901986b">
                    <a title="Show revision 21edacfcde806b16247a3dff708c55677901986b of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/event_edit.php?rev=21edacfcde806b16247a3dff708c55677901986b#L244">
                      r21eda</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>244</th><th>244</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;form class="form" method="post" action="&lt;?php echo(get_instance()-&gt;uri-&gt;uri_string()); ?&gt;"&gt;</span> </td>
                  </tr><tr>
                          <th>245</th><th>245</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;?php</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="first">
                          <th>246</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; if (isset($Confirms) &amp;&amp; isset($Confirms['draft']) &amp;&amp; !$CanPublish) {</del> </td>
                  </tr><tr>
                          <th>247</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset($Confirms['draft']);</del> </td>
                  </tr><tr>
                          <th>248</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (empty($Confirms)) {</del> </td>
                  </tr><tr>
                          <th>249</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset($Confirms);</del> </td>
                  </tr><tr>
                          <th>250</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</del> </td>
                  </tr><tr class="last">
                          <th>251</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; }</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>252</th><th>246</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if (isset($Confirms)) { ?&gt;</span> </td>
                  </tr><tr>
                          <th>253</th><th>247</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="confirm_changes_div" class="BlueBox"&gt;</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
  </ul>
</div>
      </div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="http://dev2.theyorker.co.uk/trac/changeset/21edacfcde806b16247a3dff708c55677901986b?format=diff&new=21edacfcde806b16247a3dff708c55677901986b" class="diff">Unified Diff</a>
        </li><li class="last">
          <a rel="nofollow" href="http://dev2.theyorker.co.uk/trac/changeset/21edacfcde806b16247a3dff708c55677901986b?format=zip&new=21edacfcde806b16247a3dff708c55677901986b" class="zip">Zip Archive</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">
        Powered by <a href="../about.html"><strong>Trac 0.11.1</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.
      </p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>