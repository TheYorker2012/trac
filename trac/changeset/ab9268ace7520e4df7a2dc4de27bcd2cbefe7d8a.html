<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  

  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>
      Changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a –
      The Yorker
    </title>
        <link rel="search" href="../search.html" />
        <link rel="prev" href="1284dc40a37ea4f273b2a40211130fe93d7d3d94.html" title="Changeset 1284dc40a37ea4f273b2a40211130fe93d7d3d94" />
        <link rel="last" href="4663e7077f9a41a86111194402f498613109bfa4.html" title="Changeset 4663e7077f9a41a86111194402f498613109bfa4" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a?format=diff&new=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a" type="text/plain" class="diff" title="Unified Diff" /><link rel="alternate" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a?format=zip&new=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a" type="application/zip" class="zip" title="Zip Archive" />
        <link rel="next" href="f0d1b36b22317790135fef059ba91d5929a87853.html" title="Changeset f0d1b36b22317790135fef059ba91d5929a87853" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/changeset.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/diff.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/code.css" type="text/css" />
        <link rel="first" href="8f01cfef778eb063e661839b60a7226601ef07b1.html" title="Changeset 8f01cfef778eb063e661839b60a7226601ef07b1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search The Yorker" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/diff.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/trac/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("li.entry h2 a").parent().addAnchor("Link to this diff");
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="../../trac.html"><img src="../../apps-logo.png" alt="The Yorker" /></a>
      </div>
      <form id="search" action="/trac/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first">logged in as nick_evans</li><li><a href="../../trac.html">Logout</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../browser.html">Browse Source</a></li><li><a href="../report.html">View Tickets</a></li><li><a href="../newticket.html">New Ticket</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
            <li class="first "><span>&larr; <a class="prev" href="1284dc40a37ea4f273b2a40211130fe93d7d3d94.html" title="Changeset 1284dc40a37ea4f273b2a40211130fe93d7d3d94">Previous Changeset</a></span></li><li class="last"><span><a class="next" href="f0d1b36b22317790135fef059ba91d5929a87853.html" title="Changeset f0d1b36b22317790135fef059ba91d5929a87853">Next Changeset</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="changeset">
      <div id="title">
        <h1>Changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a</h1>
      </div>
      <form id="prefs" action="">
        <div>
    <label for="style">View differences</label>
    <select id="style" name="style">
      <option selected="selected" value="inline">inline</option>
      <option value="sidebyside">side by side</option>
    </select>
    <div class="field">
      Show <input type="text" name="contextlines" id="contextlines" size="2" maxlength="3" value="2" />
      <label for="contextlines">lines around each change</label>
    </div>
    <fieldset id="ignore">
      <legend>Ignore:</legend>
      <div class="field">
        <input type="checkbox" id="ignoreblanklines" name="ignoreblanklines" />
        <label for="ignoreblanklines">Blank lines</label>
      </div>
      <div class="field">
        <input type="checkbox" id="ignorecase" name="ignorecase" />
        <label for="ignorecase">Case changes</label>
      </div>
      <div class="field">
        <input type="checkbox" id="ignorewhitespace" name="ignorewhitespace" />
        <label for="ignorewhitespace">White space changes</label>
      </div>
    </fieldset>
    <div class="buttons">
      <input type="submit" name="update" value="Update" />
    </div>
        </div>
      </form>
      <dl id="overview">
          <dt class="property time">Timestamp:</dt>
          <dd class="time">04/21/07 00:53:56 (<a class="timeline" href="../timeline-from=2007-04-21T00-53-56Z+0000&precision=second.html" title="2007-04-21T00:53:56Z+0000 in Timeline">8 years</a> ago)</dd>
          <dt class="property author">Author:</dt>
          <dd class="author">James Hogan &lt;james_hogan@…&gt;</dd>
              <dt class="property">Parents:</dt>
              <dd><a class="changeset" href="1284dc40a37ea4f273b2a40211130fe93d7d3d94.html" title="org wiz: bugfix">1284dc40a37ea4f273b2a40211130fe93d7d3d94</a></dd>
              <dt class="property">Children:</dt>
              <dd><a class="changeset" href="f0d1b36b22317790135fef059ba91d5929a87853.html" title="Quick office css patch for tabs">f0d1b36b22317790135fef059ba91d5929a87853</a></dd>
              <dt class="property">git-committer:</dt>
              <dd>James Hogan &lt;james_hogan@theyorker.co.uk&gt; / 2007-04-21T00:53:56Z+0000</dd>
          <dt class="property message">Message:</dt>
          <dd class="message searchable">
            
            
              <p>
Changed lots in the database, much of this is to reflect that.<br />
much more of the calendaring system is in place, although loads needs fleshing out.<br />
</p>
<p>
design/calendar/classes.dia<br />
</p>
<blockquote>
<p>
few updates to backend classes<br />
</p>
</blockquote>
<p>
controllers/office/calendar<br />
</p>
<blockquote>
<p>
mostly minor updates for recurrence changes<br />
</p>
</blockquote>
<p>
controllers/calendar<br />
</p>
<blockquote>
<p>
added actions/add/todo (for homepage adder)<br />
event adder works<br />
days reverted from daves one<br />
facebook source added<br />
days and day take uri string (no links yet)<br />
</p>
</blockquote>
<p>
controllers/home<br />
</p>
<blockquote>
<p>
functions for home page mini feeds for calendar and todo list<br />
</p>
</blockquote>
<p>
controllers/login<br />
</p>
<blockquote>
<p>
modified to use new uri_tail helper<br />
</p>
</blockquote>
<p>
controllers/logout<br />
</p>
<blockquote>
<p>
modified to use new uri_tail helper<br />
</p>
</blockquote>
<p>
helpers/uri_tail_helper<br />
</p>
<blockquote>
<p>
small helper to make it simpler to get uri tails for redirects (e.g. login pages redirect to the rest of the uri)<br />
</p>
</blockquote>
<p>
libraries/calendar_backend<br />
</p>
<blockquote>
<p>
various changes to backend classes to support to do list items<br />
function for filling data object with events from multiple sources<br />
</p>
</blockquote>
<p>
libraries/calendar_source_facebook<br />
</p>
<blockquote>
<p>
facebook events source, pretty basic but it works<br />
</p>
</blockquote>
<p>
libraries/calendar_source_icalendar<br />
</p>
<blockquote>
<p>
icalendar event source, pretty basic, incomplete, does work though<br />
</p>
</blockquote>
<p>
libraries/calendar_source_yorker<br />
</p>
<blockquote>
<p>
added todo capabilities<br />
</p>
</blockquote>
<p>
libraries/calendar_view_agenda<br />
</p>
<blockquote>
<p>
added a minimode option for the minifeed on home page, and limited to calendar events (as oposed to todo events)<br />
</p>
</blockquote>
<p>
libraries/calendar_view_days<br />
</p>
<blockquote>
<p>
reverted dave's old view which i bodged onto it before<br />
added range variables<br />
produce day information<br />
</p>
</blockquote>
<p>
libraries/calendar_view_icalendar<br />
</p>
<blockquote>
<p>
very basic view class for outputting in ical/vcal format, not yet implemented<br />
</p>
</blockquote>
<p>
libraries/calendar_view_todo_list<br />
</p>
<blockquote>
<p>
added option for inline quick todo adder<br />
</p>
</blockquote>
<p>
libraries/calendar_view_weeks<br />
</p>
<blockquote>
<p>
changed data to just calendar occurrences<br />
</p>
</blockquote>
<p>
libraries/date_uri<br />
</p>
<blockquote>
<p>
tweaked debug output when changing regexes to use pre tag<br />
</p>
</blockquote>
<p>
libraries/messages<br />
</p>
<blockquote>
<p>
removed dependency on code ignitor ascii_to_entities<br />
added <a class="missing wiki" href="../wiki/AddMessages.html" rel="nofollow">AddMessages?</a> function for adding multiple messages returned from a low level function<br />
</p>
</blockquote>
<p>
models/calendar/events_model<br />
</p>
<blockquote>
<p>
lots of tweaks for changes to database<br />
particularly sql expressions for whether an event is on the users calendar/todo list, and the todo effective start and end (which may be different to the main event start and end)<br />
condition expression for range matching todo items<br />
added todo option (uses different range matching)<br />
category getter<br />
disabled eventsget with assert for now as haven't updated for new recurrence system yet<br />
function for generating an ical style unique event id using time among other things and a hash<br />
updated <a class="missing wiki" href="../wiki/EventCreate.html" rel="nofollow">EventCreate?</a> to handle todos, new recurrence + other changes<br />
</p>
</blockquote>
<p>
models/calendar/recurrence_model<br />
</p>
<blockquote>
<p>
completely new recurrence model using ical style recurrences<br />
mostly complete, algorithm for calculating occurrences mostly came from phpicalendar so it needs some more testing and extending<br />
</p>
</blockquote>
<p>
views/calendar/agenda<br />
</p>
<blockquote>
<p>
actually displays some data, though not very nicely<br />
</p>
</blockquote>
<p>
views/calendar/day<br />
</p>
<blockquote>
<p>
minor tweaks<br />
</p>
</blockquote>
<p>
views/calendar/days<br />
</p>
<blockquote>
<p>
rubishy week style view, works but nasty looking<br />
</p>
</blockquote>
<p>
views/calendar/ical<br />
</p>
<blockquote>
<p>
view for outputting ical format, development stage at the moment<br />
</p>
</blockquote>
<p>
views/calendar/simpleadd<br />
</p>
<blockquote>
<p>
tidy up, altered so controller can read data<br />
</p>
</blockquote>
<p>
views/calendar/todo_list<br />
</p>
<blockquote>
<p>
inline quick todo adder<br />
</p>
</blockquote>
<p>
views/general/home<br />
</p>
<blockquote>
<p>
loads minifeeds<br />
</p>
</blockquote>

            
            
          </dd>
        <dt class="property files">Files:</dt>
        <dd class="files">
          <div class="legend" id="file-legend">
            <dl>
              <dt class="add"></dt><dd>5 added</dd>
              <dt class="mod"></dt><dd>22 modified</dd>
            </dl>
          </div>
          <br />
          <ul>
            <li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html">
              design/calendar/classes.dia
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file0">23 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/controllers/calendar.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file1">11 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/home.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/controllers/home.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file2">2 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/login.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/controllers/login.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file3">6 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/logout.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/controllers/logout.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file4">5 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/office/calendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/controllers/office/calendar.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file5">7 diffs</a>)
            </li><li>
          <div class="add"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/helpers/uri_tail_helper.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/helpers/uri_tail_helper.php
            </a>
          <span class="comment">(added)</span>
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_backend.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/libraries/Calendar_backend.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file7">7 diffs</a>)
            </li><li>
          <div class="add"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_facebook.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/libraries/Calendar_source_facebook.php
            </a>
          <span class="comment">(added)</span>
            </li><li>
          <div class="add"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_icalendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/libraries/Calendar_source_icalendar.php
            </a>
          <span class="comment">(added)</span>
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/libraries/Calendar_source_yorker.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file10">9 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_view_agenda.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/libraries/Calendar_view_agenda.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file11">2 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_view_days.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/libraries/Calendar_view_days.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file12">2 diffs</a>)
            </li><li>
          <div class="add"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_view_icalendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/libraries/Calendar_view_icalendar.php
            </a>
          <span class="comment">(added)</span>
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_view_todo_list.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/libraries/Calendar_view_todo_list.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file14">2 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_view_weeks.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/libraries/Calendar_view_weeks.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file15">1 diff</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Date_uri.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/libraries/Date_uri.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file16">1 diff</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Messages.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/libraries/Messages.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file17">3 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/models/calendar/events_model.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file18">34 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/recurrence_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/models/calendar/recurrence_model.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file19">2 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/agenda.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/views/calendar/agenda.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file20">1 diff</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/day.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/views/calendar/day.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file21">2 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/days.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/views/calendar/days.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file22">1 diff</a>)
            </li><li>
          <div class="add"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/ical.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/views/calendar/ical.php
            </a>
          <span class="comment">(added)</span>
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/simpleadd.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/views/calendar/simpleadd.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file24">6 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/todo_list.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/views/calendar/todo_list.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file25">1 diff</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/general/home.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
              system/application/views/general/home.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#file26">2 diffs</a>)
            </li>
          </ul>
        </dd>
      </dl>
      <div class="diff">
        <div class="legend" id="diff-legend">
          <h3>Legend:</h3>
          <dl>
            <dt class="unmod"></dt><dd>Unmodified</dd>
            <dt class="add"></dt><dd>Added</dd>
            <dt class="rem"></dt><dd>Removed</dd>
          </dl>
        </div>
        <div class="diff">
  <ul class="entries">
      <li class="entry">
        <h2 id="file0">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to design/calendar/classes.dia" href="ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/design/calendar/classes.dia.html">design/calendar/classes.dia</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 025521b9016da96c75604373853306ddba4d38bd">
                    <a title="Show revision 025521b9016da96c75604373853306ddba4d38bd of this file in browser" href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L3247">
                      r02552</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L3247">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>3247</th><th>3247</th><td class="l"><span>&nbsp; &nbsp; &lt;dia:object type="UML - Class" version="0" id="O23"&gt;</span> </td>
                  </tr><tr>
                          <th>3248</th><th>3248</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="obj_pos"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>3249</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-44.3101,-2<del>6.1</del>92"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>3249</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-44.3101,-2<ins>8.7</ins>92"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>3250</th><th>3250</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>3251</th><th>3251</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="obj_bb"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>3252</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:rectangle val="-44.3601,-2<del>6.242;-21.7101,-13.3</del>42"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>3252</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:rectangle val="-44.3601,-2<ins>8.842;-21.7101,-11.9</ins>42"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>3253</th><th>3253</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>3254</th><th>3254</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="elem_corner"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>3255</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-44.3101,-2<del>6.1</del>92"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>3255</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-44.3101,-2<ins>8.7</ins>92"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>3256</th><th>3256</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>3257</th><th>3257</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="elem_width"&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L3259">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L3259">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>3259</th><th>3259</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>3260</th><th>3260</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="elem_height"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>3261</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:real val="1<del>2.800000000000002</del>"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>3261</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:real val="1<ins>6.800000000000004</ins>"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>3262</th><th>3262</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>3263</th><th>3263</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L3463">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L3463">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>3463</th><th>3463</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:composite type="umlattribute"&gt;</span> </td>
                  </tr><tr>
                          <th>3464</th><th>3464</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>3465</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#Todo#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3466</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3467</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="type"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3468</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#bool#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3469</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3470</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="value"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3471</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3472</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3473</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="comment"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3474</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3475</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3476</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="visibility"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3477</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:enum val="0"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3478</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3479</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="abstract"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3480</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3481</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3482</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="class_scope"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3483</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3484</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3485</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:composite&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3486</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:composite type="umlattribute"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3487</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3488</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#StartTime#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3489</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3490</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="type"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3491</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#timestamp, NULL#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3492</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3493</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="value"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3494</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3495</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3496</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="comment"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3497</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3498</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3499</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="visibility"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3500</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:enum val="0"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3501</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3502</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="abstract"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3503</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3504</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3505</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="class_scope"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3506</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3507</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3508</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:composite&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3509</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:composite type="umlattribute"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3510</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3511</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#EndTime#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3512</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3513</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="type"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3514</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#timestamp, NULL#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3515</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3516</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="value"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3517</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3518</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3519</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="comment"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3520</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3521</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3522</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="visibility"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3523</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:enum val="0"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3524</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3525</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="abstract"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3526</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3527</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3528</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="class_scope"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3529</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3530</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3531</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:composite&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3532</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:composite type="umlattribute"&gt;</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>3533</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>3465</th><th>3534</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#TimeAssociated#&lt;/dia:string&gt;</span> </td>
                  </tr><tr>
                          <th>3466</th><th>3535</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>3467</th><th>3536</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="type"&gt;</span> </td>
                  </tr><tr>
                          <th>3468</th><th>3537</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#bool#&lt;/dia:string&gt;</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="first">
                          <th>3469</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</del> </td>
                  </tr><tr>
                          <th>3470</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="value"&gt;</del> </td>
                  </tr><tr>
                          <th>3471</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</del> </td>
                  </tr><tr>
                          <th>3472</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</del> </td>
                  </tr><tr>
                          <th>3473</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="comment"&gt;</del> </td>
                  </tr><tr>
                          <th>3474</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</del> </td>
                  </tr><tr>
                          <th>3475</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</del> </td>
                  </tr><tr>
                          <th>3476</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="visibility"&gt;</del> </td>
                  </tr><tr>
                          <th>3477</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:enum val="0"/&gt;</del> </td>
                  </tr><tr>
                          <th>3478</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</del> </td>
                  </tr><tr>
                          <th>3479</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="abstract"&gt;</del> </td>
                  </tr><tr>
                          <th>3480</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</del> </td>
                  </tr><tr>
                          <th>3481</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</del> </td>
                  </tr><tr>
                          <th>3482</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="class_scope"&gt;</del> </td>
                  </tr><tr>
                          <th>3483</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</del> </td>
                  </tr><tr>
                          <th>3484</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</del> </td>
                  </tr><tr>
                          <th>3485</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:composite&gt;</del> </td>
                  </tr><tr>
                          <th>3486</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:composite type="umlattribute"&gt;</del> </td>
                  </tr><tr>
                          <th>3487</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</del> </td>
                  </tr><tr>
                          <th>3488</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#StartTime#&lt;/dia:string&gt;</del> </td>
                  </tr><tr>
                          <th>3489</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</del> </td>
                  </tr><tr>
                          <th>3490</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="type"&gt;</del> </td>
                  </tr><tr>
                          <th>3491</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#timestamp, NULL#&lt;/dia:string&gt;</del> </td>
                  </tr><tr>
                          <th>3492</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</del> </td>
                  </tr><tr>
                          <th>3493</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="value"&gt;</del> </td>
                  </tr><tr>
                          <th>3494</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</del> </td>
                  </tr><tr>
                          <th>3495</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</del> </td>
                  </tr><tr>
                          <th>3496</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="comment"&gt;</del> </td>
                  </tr><tr>
                          <th>3497</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</del> </td>
                  </tr><tr>
                          <th>3498</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</del> </td>
                  </tr><tr>
                          <th>3499</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="visibility"&gt;</del> </td>
                  </tr><tr>
                          <th>3500</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:enum val="0"/&gt;</del> </td>
                  </tr><tr>
                          <th>3501</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</del> </td>
                  </tr><tr>
                          <th>3502</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="abstract"&gt;</del> </td>
                  </tr><tr>
                          <th>3503</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</del> </td>
                  </tr><tr>
                          <th>3504</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</del> </td>
                  </tr><tr>
                          <th>3505</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="class_scope"&gt;</del> </td>
                  </tr><tr>
                          <th>3506</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</del> </td>
                  </tr><tr>
                          <th>3507</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</del> </td>
                  </tr><tr>
                          <th>3508</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:composite&gt;</del> </td>
                  </tr><tr>
                          <th>3509</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:composite type="umlattribute"&gt;</del> </td>
                  </tr><tr>
                          <th>3510</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</del> </td>
                  </tr><tr>
                          <th>3511</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#EndTime#&lt;/dia:string&gt;</del> </td>
                  </tr><tr>
                          <th>3512</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</del> </td>
                  </tr><tr>
                          <th>3513</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="type"&gt;</del> </td>
                  </tr><tr class="last">
                          <th>3514</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#timestamp, NULL#&lt;/dia:string&gt;</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>3515</th><th>3538</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>3516</th><th>3539</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="value"&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L3627">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L3650">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>3627</th><th>3650</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>3628</th><th>3651</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="type"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>3629</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#<del>{'hidden','normal','rsvp'}</del>#&lt;/dia:string&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>3652</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#<ins>BOOL, NULL</ins>#&lt;/dia:string&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>3630</th><th>3653</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>3631</th><th>3654</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="value"&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L3657">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L3680">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>3657</th><th>3680</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="comment"&gt;</span> </td>
                  </tr><tr>
                          <th>3658</th><th>3681</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#0 &amp;lt;= UserComplete &amp;lt;= 100#&lt;/dia:string&gt;</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>3682</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3683</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="visibility"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3684</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:enum val="0"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3685</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3686</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="abstract"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3687</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3688</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3689</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="class_scope"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3690</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3691</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3692</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:composite&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3693</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:composite type="umlattribute"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3694</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3695</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#DisplayOnCalendar#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3696</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3697</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="type"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3698</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#bool#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3699</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3700</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="value"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3701</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3702</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3703</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="comment"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3704</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3705</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3706</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="visibility"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3707</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:enum val="0"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3708</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3709</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="abstract"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3710</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3711</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3712</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="class_scope"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3713</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3714</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3715</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:composite&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3716</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:composite type="umlattribute"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3717</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3718</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#DisplayOnTodo#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3719</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3720</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="type"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3721</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#bool#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3722</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3723</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="value"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3724</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3725</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3726</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="comment"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3727</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3728</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3729</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="visibility"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3730</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:enum val="0"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3731</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3732</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="abstract"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3733</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3734</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3735</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="class_scope"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3736</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3737</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3738</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:composite&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3739</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:composite type="umlattribute"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3740</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3741</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#TodoStartTime#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3742</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3743</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="type"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3744</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#timestamp#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3745</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3746</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="value"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3747</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3748</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3749</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="comment"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3750</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3751</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3752</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="visibility"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3753</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:enum val="0"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3754</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3755</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="abstract"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3756</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3757</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3758</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="class_scope"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3759</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3760</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3761</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:composite&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3762</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:composite type="umlattribute"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3763</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3764</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#TodoEndTime#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3765</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3766</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="type"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3767</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#timestamp#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3768</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3769</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="value"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3770</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3771</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>3772</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="comment"&gt;</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>3773</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>3659</th><th>3774</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>3660</th><th>3775</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="visibility"&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L3831">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L3946">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>3831</th><th>3946</th><td class="l"><span>&nbsp; &nbsp; &lt;dia:object type="UML - Class" version="0" id="O25"&gt;</span> </td>
                  </tr><tr>
                          <th>3832</th><th>3947</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="obj_pos"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>3833</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-10.8878,-2<del>3.3</del>944"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>3948</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-10.8878,-2<ins>5.9</ins>944"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>3834</th><th>3949</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>3835</th><th>3950</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="obj_bb"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>3836</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:rectangle val="-10.9378,-2<del>3.4444;4.3622,-14</del>.5444"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>3951</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:rectangle val="-10.9378,-2<ins>6.0444;4.3622,-15</ins>.5444"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>3837</th><th>3952</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>3838</th><th>3953</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="elem_corner"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>3839</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-10.8878,-2<del>3.3</del>944"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>3954</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-10.8878,-2<ins>5.9</ins>944"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>3840</th><th>3955</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>3841</th><th>3956</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="elem_width"&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L3843">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L3958">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>3843</th><th>3958</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>3844</th><th>3959</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="elem_height"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>3845</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:real val="<del>8.7999999999999989</del>"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>3960</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:real val="<ins>10.4</ins>"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>3846</th><th>3961</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>3847</th><th>3962</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L4028">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L4143">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>4028</th><th>4143</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="type"&gt;</span> </td>
                  </tr><tr>
                          <th>4029</th><th>4144</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#string#&lt;/dia:string&gt;</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>4145</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4146</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="value"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4147</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4148</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4149</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="comment"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4150</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4151</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4152</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="visibility"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4153</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:enum val="0"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4154</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4155</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="abstract"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4156</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4157</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4158</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="class_scope"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4159</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4160</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4161</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:composite&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4162</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:composite type="umlattribute"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4163</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4164</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#TimeAssociated#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4165</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4166</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="type"&gt;</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>4167</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#bool#&lt;/dia:string&gt;</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>4030</th><th>4168</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>4031</th><th>4169</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="value"&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L4128">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L4266">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>4128</th><th>4266</th><td class="l"><span>subscriber: things allowed by Source.Capabilities</span> </td>
                  </tr><tr>
                          <th>4129</th><th>4267</th><td class="l"><span>owner: can do anything#&lt;/dia:string&gt;</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>4268</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4269</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="visibility"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4270</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:enum val="0"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4271</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4272</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="abstract"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4273</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4274</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4275</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="class_scope"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4276</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4277</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4278</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:composite&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4279</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:composite type="umlattribute"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4280</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4281</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#Recur#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4282</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4283</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="type"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4284</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#RecurrenceSet#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4285</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4286</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="value"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4287</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4288</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>4289</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="comment"&gt;</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>4290</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>4130</th><th>4291</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>4131</th><th>4292</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="visibility"&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L4148">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L4309">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>4148</th><th>4309</th><td class="l"><span>&nbsp; &nbsp; &lt;dia:object type="UML - Association" version="1" id="O26"&gt;</span> </td>
                  </tr><tr>
                          <th>4149</th><th>4310</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="obj_pos"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>4150</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="4.3122,-2<del>1.4</del>944"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>4311</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="4.3122,-2<ins>4.0</ins>944"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>4151</th><th>4312</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>4152</th><th>4313</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="obj_bb"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>4153</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:rectangle val="4.2622,-2<del>2.1</del>944;11.4059,-2.5503"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>4314</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:rectangle val="4.2622,-2<ins>4.7</ins>944;11.4059,-2.5503"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>4154</th><th>4315</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>4155</th><th>4316</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="orth_points"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>4156</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="4.3122,-2<del>1.4</del>944"/&gt;</span> </td>
                      </tr><tr>
                        <th>4157</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="10.8559,-2<del>1.4</del>944"/&gt;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>4317</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="4.3122,-2<ins>4.0</ins>944"/&gt;</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>4318</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="10.8559,-2<ins>4.0</ins>944"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>4158</th><th>4319</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="10.8559,-3.3503"/&gt;</span> </td>
                  </tr><tr>
                          <th>4159</th><th>4320</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L4214">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L4375">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>4214</th><th>4375</th><td class="l"><span>&nbsp; &nbsp; &lt;dia:object type="UML - Association" version="1" id="O27"&gt;</span> </td>
                  </tr><tr>
                          <th>4215</th><th>4376</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="obj_pos"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>4216</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-21.7601,-2<del>2.6</del>92"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>4377</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-21.7601,-2<ins>5.2</ins>92"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>4217</th><th>4378</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>4218</th><th>4379</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="obj_bb"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>4219</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:rectangle val="-21.8101,-2<del>3.3944;-10.8378,-21.7</del>92"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>4380</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:rectangle val="-21.8101,-2<ins>5.9944;-10.8378,-24.3</ins>92"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>4220</th><th>4381</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>4221</th><th>4382</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="orth_points"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>4222</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-21.7601,-2<del>2.6</del>92"/&gt;</span> </td>
                      </tr><tr>
                        <th>4223</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-16.32<del>4,-22.6</del>92"/&gt;</span> </td>
                      </tr><tr>
                        <th>4224</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-16.32<del>4,-22.6</del>944"/&gt;</span> </td>
                      </tr><tr>
                        <th>4225</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-10.8878,-2<del>2.6</del>944"/&gt;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>4383</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-21.7601,-2<ins>5.2</ins>92"/&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>4384</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-16.32<ins>39,-25.2</ins>92"/&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>4385</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-16.32<ins>39,-25.2</ins>944"/&gt;</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>4386</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-10.8878,-2<ins>5.2</ins>944"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>4226</th><th>4387</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>4227</th><th>4388</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="orth_orient"&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L4505">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L4666">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>4505</th><th>4666</th><td class="l"><span>&nbsp; &nbsp; &lt;dia:object type="UML - Association" version="1" id="O29"&gt;</span> </td>
                  </tr><tr>
                          <th>4506</th><th>4667</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="obj_pos"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>4507</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="4.3122,-1<del>6.6</del>944"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>4668</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="4.3122,-1<ins>8.4</ins>944"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>4508</th><th>4669</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>4509</th><th>4670</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="obj_bb"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>4510</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:rectangle val="-3.51078,-1<del>7.3</del>944;5.3622,-9.2749"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>4671</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:rectangle val="-3.51078,-1<ins>9.1</ins>944;5.3622,-9.2749"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>4511</th><th>4672</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>4512</th><th>4673</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="orth_points"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>4513</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="4.3122,-1<del>6.6</del>944"/&gt;</span> </td>
                      </tr><tr>
                        <th>4514</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="5.3122,-1<del>6.6</del>944"/&gt;</span> </td>
                      </tr><tr>
                        <th>4515</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="5.3122,-1<del>3.4346</del>"/&gt;</span> </td>
                      </tr><tr>
                        <th>4516</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-3.46078,-1<del>3.4346</del>"/&gt;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>4674</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="4.3122,-1<ins>8.4</ins>944"/&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>4675</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="5.3122,-1<ins>8.4</ins>944"/&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>4676</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="5.3122,-1<ins>2.75</ins>"/&gt;</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>4677</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-3.46078,-1<ins>2.75</ins>"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>4517</th><th>4678</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-3.46078,-10.1749"/&gt;</span> </td>
                  </tr><tr>
                          <th>4518</th><th>4679</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-2.46078,-10.1749"/&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L4526">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L4687">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>4526</th><th>4687</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>4527</th><th>4688</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="autorouting"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>4528</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="<del>tru</del>e"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>4689</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="<ins>fals</ins>e"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>4529</th><th>4690</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>4530</th><th>4691</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L4571">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L4732">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>4571</th><th>4732</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>4572</th><th>4733</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:connections&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>4573</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:connection handle="0" to="O25" connection="2<del>1</del>"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>4734</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:connection handle="0" to="O25" connection="2<ins>3</ins>"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>4574</th><th>4735</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:connection handle="1" to="O28" connection="3"/&gt;</span> </td>
                  </tr><tr>
                          <th>4575</th><th>4736</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:connections&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L4646">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L4807">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>4646</th><th>4807</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>4647</th><th>4808</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="obj_bb"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>4648</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:rectangle val="-44.3829,-12.062;-25.9329,<del>5.8</del>38"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>4809</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:rectangle val="-44.3829,-12.062;-25.9329,<ins>8.2</ins>38"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>4649</th><th>4810</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>4650</th><th>4811</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="elem_corner"&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L4655">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L4816">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>4655</th><th>4816</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>4656</th><th>4817</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="elem_height"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>4657</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:real val="<del>17.800000000000001</del>"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>4818</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:real val="<ins>20.200000000000003</ins>"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>4658</th><th>4819</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>4659</th><th>4820</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L5359">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L5520">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>5359</th><th>5520</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>5360</th><th>5521</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="parameters"/&gt;</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>5522</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:composite&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5523</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:composite type="umloperation"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5524</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5525</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#EnableFlag#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5526</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5527</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="stereotype"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5528</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5529</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5530</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="type"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5531</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5532</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5533</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="visibility"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5534</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:enum val="0"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5535</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5536</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="comment"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5537</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5538</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5539</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="abstract"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5540</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5541</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5542</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="inheritance_type"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5543</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:enum val="2"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5544</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5545</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="query"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5546</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5547</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5548</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="class_scope"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5549</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5550</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5551</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="parameters"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5552</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:composite type="umlparameter"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5553</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5554</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#FlagName#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5555</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5556</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="type"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5557</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#string#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5558</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5559</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="value"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5560</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5561</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5562</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="comment"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5563</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5564</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5565</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="kind"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5566</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:enum val="0"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5567</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5568</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:composite&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5569</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5570</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:composite&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5571</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:composite type="umloperation"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5572</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5573</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#DisableFlag#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5574</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5575</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="stereotype"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5576</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5577</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5578</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="type"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5579</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5580</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5581</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="visibility"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5582</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:enum val="0"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5583</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5584</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="comment"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5585</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5586</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5587</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="abstract"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5588</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5589</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5590</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="inheritance_type"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5591</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:enum val="2"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5592</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5593</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="query"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5594</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5595</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5596</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="class_scope"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5597</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5598</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5599</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="parameters"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5600</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:composite type="umlparameter"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5601</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5602</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#FlagName#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5603</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5604</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="type"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5605</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#string#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5606</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5607</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="value"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5608</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5609</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5610</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="comment"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5611</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5612</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5613</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="kind"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5614</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:enum val="0"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5615</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5616</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:composite&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5617</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5618</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:composite&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5619</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:composite type="umloperation"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5620</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5621</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#GetFlag#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5622</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5623</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="stereotype"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5624</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5625</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5626</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="type"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5627</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#bool#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5628</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5629</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="visibility"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5630</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:enum val="0"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5631</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5632</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="comment"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5633</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5634</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5635</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="abstract"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5636</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5637</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5638</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="inheritance_type"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5639</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:enum val="2"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5640</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5641</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="query"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5642</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5643</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5644</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="class_scope"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5645</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:boolean val="false"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5646</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5647</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="parameters"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5648</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:composite type="umlparameter"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5649</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="name"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5650</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#FlagName#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5651</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5652</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="type"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5653</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;#string#&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5654</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5655</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="value"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5656</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5657</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5658</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="comment"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5659</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:string&gt;##&lt;/dia:string&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5660</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5661</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:attribute name="kind"&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5662</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:enum val="0"/&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5663</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>5664</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:composite&gt;</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>5665</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>5361</th><th>5666</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/dia:composite&gt;</span> </td>
                  </tr><tr>
                          <th>5362</th><th>5667</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L5371">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L5676">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>5371</th><th>5676</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>5372</th><th>5677</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="obj_bb"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>5373</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:rectangle val="-26.0329,-2<del>0.4</del>92;-18.8469,-6.012"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>5678</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:rectangle val="-26.0329,-2<ins>1.0</ins>92;-18.8469,-6.012"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>5374</th><th>5679</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>5375</th><th>5680</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="orth_points"&gt;</span> </td>
                  </tr><tr>
                          <th>5376</th><th>5681</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-25.9829,-6.912"/&gt;</span> </td>
                  </tr><tr>
                          <th>5377</th><th>5682</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-18.9469,-6.912"/&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>5378</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-18.9469,-<del>19.7</del>92"/&gt;</span> </td>
                      </tr><tr>
                        <th>5379</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-21.7101,-<del>19.7</del>92"/&gt;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>5683</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-18.9469,-<ins>20.3</ins>92"/&gt;</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>5684</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-21.7101,-<ins>20.3</ins>92"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>5380</th><th>5685</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>5381</th><th>5686</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="orth_orient"&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L5431">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L5736">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>5431</th><th>5736</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:connections&gt;</span> </td>
                  </tr><tr>
                          <th>5432</th><th>5737</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:connection handle="0" to="O31" connection="17"/&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>5433</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:connection handle="1" to="O23" connection="<del>3</del>6"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>5738</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:connection handle="1" to="O23" connection="<ins>4</ins>6"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>5434</th><th>5739</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:connections&gt;</span> </td>
                  </tr><tr>
                          <th>5435</th><th>5740</th><td class="l"><span>&nbsp; &nbsp; &lt;/dia:object&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L5439">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L5744">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>5439</th><th>5744</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>5440</th><th>5745</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="obj_bb"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>5441</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:rectangle val="-26.0329,-<del>19.6</del>944;-10.8883,-5.212"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>5746</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:rectangle val="-26.0329,-<ins>21.4</ins>944;-10.8883,-5.212"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>5442</th><th>5747</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>5443</th><th>5748</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="orth_points"&gt;</span> </td>
                  </tr><tr>
                          <th>5444</th><th>5749</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-25.9829,-6.112"/&gt;</span> </td>
                  </tr><tr>
                          <th>5445</th><th>5750</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-18.4606,-6.112"/&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>5446</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-18.4606,-<del>18.9</del>944"/&gt;</span> </td>
                      </tr><tr>
                        <th>5447</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-10.9383,-<del>18.9</del>944"/&gt;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>5751</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-18.4606,-<ins>20.7</ins>944"/&gt;</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>5752</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-10.9383,-<ins>20.7</ins>944"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>5448</th><th>5753</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>5449</th><th>5754</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="orth_orient"&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L5499">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L5804">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>5499</th><th>5804</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:connections&gt;</span> </td>
                  </tr><tr>
                          <th>5500</th><th>5805</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:connection handle="0" to="O31" connection="19"/&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>5501</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:connection handle="1" to="O25" connection="<del>26</del>"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>5806</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:connection handle="1" to="O25" connection="<ins>30</ins>"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>5502</th><th>5807</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:connections&gt;</span> </td>
                  </tr><tr>
                          <th>5503</th><th>5808</th><td class="l"><span>&nbsp; &nbsp; &lt;/dia:object&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L5640">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L5945">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>5640</th><th>5945</th><td class="l"><span>&nbsp; &nbsp; &lt;dia:object type="UML - Dependency" version="1" id="O36"&gt;</span> </td>
                  </tr><tr>
                          <th>5641</th><th>5946</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="obj_pos"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>5642</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="1.8056<del>1</del>,1.6"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>5947</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="1.8056<ins></ins>,1.6"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>5643</th><th>5948</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>5644</th><th>5949</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="obj_bb"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>5645</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:rectangle val="-26.3826,-<del>3.562;1.85561</del>,1.65"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>5950</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:rectangle val="-26.3826,-<ins>2.362;1.8556</ins>,1.65"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>5646</th><th>5951</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>5647</th><th>5952</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="orth_points"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>5648</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="1.8056<del>1</del>,1.6"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>5953</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="1.8056<ins></ins>,1.6"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>5649</th><th>5954</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-12.0635,1.6"/&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>5650</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-12.0635,-<del>3.1</del>12"/&gt;</span> </td>
                      </tr><tr>
                        <th>5651</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-25.9326,-<del>3.1</del>12"/&gt;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>5955</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-12.0635,-<ins>1.9</ins>12"/&gt;</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>5956</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:point val="-25.9326,-<ins>1.9</ins>12"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>5652</th><th>5957</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:attribute&gt;</span> </td>
                  </tr><tr>
                          <th>5653</th><th>5958</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:attribute name="orth_orient"&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="../browser/design/calendar/classes.dia-rev=025521b9016da96c75604373853306ddba4d38bd.html#L5676">…</a></th>
                  <th><a href="../browser/design/calendar/classes.dia-rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a.html#L5981">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>5676</th><th>5981</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;dia:connections&gt;</span> </td>
                  </tr><tr>
                          <th>5677</th><th>5982</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:connection handle="0" to="O0" connection="28"/&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>5678</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:connection handle="1" to="O31" connection="<del>48</del>"/&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>5983</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;dia:connection handle="1" to="O31" connection="<ins>54</ins>"/&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>5679</th><th>5984</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &lt;/dia:connections&gt;</span> </td>
                  </tr><tr>
                          <th>5680</th><th>5985</th><td class="l"><span>&nbsp; &nbsp; &lt;/dia:object&gt;</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file1">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to system/application/controllers/calendar.php" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/system/application/controllers/calendar.php">system/application/controllers/calendar.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision a2a9cce8a6c0bcc63b181f79c8d7980f67eff4a0">
                    <a title="Show revision a2a9cce8a6c0bcc63b181f79c8d7980f67eff4a0 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=a2a9cce8a6c0bcc63b181f79c8d7980f67eff4a0#L6">
                      ra2a9c</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L6">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>6</th><th>6</th><td class="l"><span>&nbsp;*/</span> </td>
                  </tr><tr>
                          <th>7</th><th>7</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>8</th><td class="r"><ins>/// Calenda actions psuedocontroller.</ins> </td>
                  </tr><tr>
                          <th> </th><th>9</th><td class="r"><ins>class CalendarActions</ins> </td>
                  </tr><tr>
                          <th> </th><th>10</th><td class="r"><ins>{</ins> </td>
                  </tr><tr>
                          <th> </th><th>11</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// Main code igniter instance.</ins> </td>
                  </tr><tr>
                          <th> </th><th>12</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; private $CI;</ins> </td>
                  </tr><tr>
                          <th> </th><th>13</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>14</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function __construct()</ins> </td>
                  </tr><tr>
                          <th> </th><th>15</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr>
                          <th> </th><th>16</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;CI = &amp; get_instance();</ins> </td>
                  </tr><tr>
                          <th> </th><th>17</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>18</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;CI-&gt;load-&gt;helper('uri_tail');</ins> </td>
                  </tr><tr>
                          <th> </th><th>19</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>20</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>21</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function add($type = '')</ins> </td>
                  </tr><tr>
                          <th> </th><th>22</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr>
                          <th> </th><th>23</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!CheckPermissions('student')) return;</ins> </td>
                  </tr><tr>
                          <th> </th><th>24</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>25</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $method = '_add_'.$type;</ins> </td>
                  </tr><tr>
                          <th> </th><th>26</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (method_exists($this, $method)) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>27</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;$method();</ins> </td>
                  </tr><tr>
                          <th> </th><th>28</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RedirectUriTail(4);</ins> </td>
                  </tr><tr>
                          <th> </th><th>29</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</ins> </td>
                  </tr><tr>
                          <th> </th><th>30</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; show_404();</ins> </td>
                  </tr><tr>
                          <th> </th><th>31</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>32</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>33</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>34</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function _add_todo()</ins> </td>
                  </tr><tr>
                          <th> </th><th>35</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr>
                          <th> </th><th>36</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $CI = &amp; $this-&gt;CI;</ins> </td>
                  </tr><tr>
                          <th> </th><th>37</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Read the post data</ins> </td>
                  </tr><tr>
                          <th> </th><th>38</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $name = $CI-&gt;input-&gt;post('todo_name');</ins> </td>
                  </tr><tr>
                          <th> </th><th>39</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (FALSE !== $name) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>40</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (empty($name)) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>41</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $CI-&gt;messages-&gt;AddMessage('warning', 'You didn\'t specify a name for the to do list item.');</ins> </td>
                  </tr><tr>
                          <th> </th><th>42</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</ins> </td>
                  </tr><tr>
                          <th> </th><th>43</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $CI-&gt;load-&gt;model('calendar/events_model');</ins> </td>
                  </tr><tr>
                          <th> </th><th>44</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['recur'] = new RecurrenceSet();</ins> </td>
                  </tr><tr>
                          <th> </th><th>45</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['todo'] = TRUE;</ins> </td>
                  </tr><tr>
                          <th> </th><th>46</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['name'] = $name;</ins> </td>
                  </tr><tr>
                          <th> </th><th>47</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>48</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try {</ins> </td>
                  </tr><tr>
                          <th> </th><th>49</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $results = $CI-&gt;events_model-&gt;EventCreate($input);</ins> </td>
                  </tr><tr>
                          <th> </th><th>50</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $CI-&gt;messages-&gt;AddMessage('success', 'To do list item added.');</ins> </td>
                  </tr><tr>
                          <th> </th><th>51</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } catch (Exception $e) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>52</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $CI-&gt;messages-&gt;AddMessage('error', $e-&gt;getMessage());</ins> </td>
                  </tr><tr>
                          <th> </th><th>53</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>54</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>55</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</ins> </td>
                  </tr><tr>
                          <th> </th><th>56</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $CI-&gt;messages-&gt;AddMessage('error', 'Invalid todo name');</ins> </td>
                  </tr><tr>
                          <th> </th><th>57</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>58</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>59</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>60</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function _add_event()</ins> </td>
                  </tr><tr>
                          <th> </th><th>61</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr>
                          <th> </th><th>62</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;CI-&gt;messages-&gt;AddMessage('error', 'Not yet implemented');</ins> </td>
                  </tr><tr>
                          <th> </th><th>63</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>64</th><td class="r"><ins>}</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>65</th><td class="r"><ins></ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>8</th><th>66</th><td class="l"><span>/// Controller for event manager.</span> </td>
                  </tr><tr>
                          <th>9</th><th>67</th><td class="l"><span>/**</span> </td>
                  </tr><tr>
                          <th>10</th><th>68</th><td class="l"><span>&nbsp;* @author James Hogan (jh559@cs.york.ac.uk)</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>11</th><th> </th><td class="l"><del>&nbsp;* @author David Harker (dhh500@york.ac.uk)</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>12</th><th>69</th><td class="l"><span>&nbsp;*</span> </td>
                  </tr><tr>
                          <th>13</th><th>70</th><td class="l"><span>&nbsp;* @version 20/03/2007 James Hogan (jh559)</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=a2a9cce8a6c0bcc63b181f79c8d7980f67eff4a0#L25">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L82">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>25</th><th>82</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function index()</span> </td>
                  </tr><tr>
                          <th>26</th><th>83</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>27</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;days();</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>84</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;days();</span> </td>
                      </tr><tr>
                        <th> </th><th>85</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>86</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Recurrence testing:</span> </td>
                      </tr><tr>
                        <th> </th><th>87</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!CheckPermissions('admin')) return;</span> </td>
                      </tr><tr>
                        <th> </th><th>88</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;model('calendar/recurrence_model');</span> </td>
                      </tr><tr>
                        <th> </th><th>89</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>90</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recurs = new RecurrenceSet;</span> </td>
                      </tr><tr>
                        <th> </th><th>91</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recurs-&gt;SetStartDuration(time(), 60*60);</span> </td>
                      </tr><tr>
                        <th> </th><th>92</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recurs-&gt;SetRecurData($this-&gt;recurrence_model-&gt;SelectRecurByEvent(39));</span> </td>
                      </tr><tr>
                        <th> </th><th>93</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;messages-&gt;AddDumpMessage('result',</span> </td>
                      </tr><tr>
                        <th> </th><th>94</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recurs-&gt;Resolve(time(), strtotime('+5years'))</span> </td>
                      </tr><tr>
                        <th> </th><th>95</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th> </th><th>96</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>97</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;main_frame-&gt;Load();</span> </td>
                      </tr><tr>
                        <th> </th><th>98</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>99</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>100</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function actions()</span> </td>
                      </tr><tr>
                        <th> </th><th>101</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>102</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // do the magic</span> </td>
                      </tr><tr>
                        <th> </th><th>103</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $actor = new CalendarActions();</span> </td>
                      </tr><tr>
                        <th> </th><th>104</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $args = func_get_args();</span> </td>
                      </tr><tr>
                        <th> </th><th>105</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $func = array_shift($args);</span> </td>
                      </tr><tr>
                        <th> </th><th>106</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ('_' !== substr($func,0,1) &amp;&amp; method_exists($actor, $func)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>107</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call_user_func_array(array(&amp;$actor, $func), $args);</span> </td>
                      </tr><tr>
                        <th> </th><th>108</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>109</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; show_404();</span> </td>
                      </tr><tr>
                        <th> </th><th>110</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>111</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>112</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>113</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function ical()</span> </td>
                      </tr><tr>
                        <th> </th><th>114</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>115</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!CheckPermissions('public')) return;</span> </td>
                      </tr><tr>
                        <th> </th><th>116</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>117</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;_LoadCalendarSystem();</span> </td>
                      </tr><tr>
                        <th> </th><th>118</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sources = $this-&gt;_SetupSources(time(), strtotime('1week'));</span> </td>
                      </tr><tr>
                        <th> </th><th>119</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $calendar_data = new CalendarData();</span> </td>
                      </tr><tr>
                        <th> </th><th>120</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>121</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;_FetchEventsFromSources($calendar_data, $sources);</span> </td>
                      </tr><tr>
                        <th> </th><th>122</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>123</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Display data</span> </td>
                      </tr><tr>
                        <th> </th><th>124</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;library('calendar_view_icalendar');</span> </td>
                      </tr><tr>
                        <th> </th><th>125</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>126</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ical = new CalendarViewICalendar();</span> </td>
                      </tr><tr>
                        <th> </th><th>127</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ical-&gt;SetCalendarData($calendar_data);</span> </td>
                      </tr><tr>
                        <th> </th><th>128</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr class="last">
                        <th> </th><th>129</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ical-&gt;Load();</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>28</th><th>130</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>29</th><th>131</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=a2a9cce8a6c0bcc63b181f79c8d7980f67eff4a0#L32">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L134">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>32</th><th>134</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!CheckPermissions('student')) return;</span> </td>
                  </tr><tr>
                          <th>33</th><th>135</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>34</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $data = array();</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>136</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;model('calendar/events_model');</span> </td>
                      </tr><tr>
                        <th> </th><th>137</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $event_categories = $this-&gt;events_model-&gt;CategoriesGet();</span> </td>
                      </tr><tr>
                        <th> </th><th>138</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>139</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @todo make standard functions and views for recurrence interface</span> </td>
                      </tr><tr>
                        <th> </th><th>140</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input = array();</span> </td>
                      </tr><tr>
                        <th> </th><th>141</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['name'] = $this-&gt;input-&gt;post('a_summary');</span> </td>
                      </tr><tr>
                        <th> </th><th>142</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (FALSE !== $input['name']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>143</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $failed_validation = FALSE;</span> </td>
                      </tr><tr>
                        <th> </th><th>144</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['startdate']&nbsp; &nbsp; &nbsp; = $this-&gt;input-&gt;post('a_startdate');</span> </td>
                      </tr><tr>
                        <th> </th><th>145</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['starttime']&nbsp; &nbsp; &nbsp; = $this-&gt;input-&gt;post('a_starttime');</span> </td>
                      </tr><tr>
                        <th> </th><th>146</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['enddate']&nbsp; &nbsp; &nbsp; &nbsp; = $this-&gt;input-&gt;post('a_enddate');</span> </td>
                      </tr><tr>
                        <th> </th><th>147</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['endtime']&nbsp; &nbsp; &nbsp; &nbsp; = $this-&gt;input-&gt;post('a_endtime');</span> </td>
                      </tr><tr>
                        <th> </th><th>148</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['time_associated'] = FALSE === $this-&gt;input-&gt;post('a_allday');</span> </td>
                      </tr><tr>
                        <th> </th><th>149</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['location']&nbsp; &nbsp; &nbsp; &nbsp;= $this-&gt;input-&gt;post('a_location');</span> </td>
                      </tr><tr>
                        <th> </th><th>150</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['category']&nbsp; &nbsp; &nbsp; &nbsp;= $this-&gt;input-&gt;post('a_category');</span> </td>
                      </tr><tr>
                        <th> </th><th>151</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!is_numeric($input['category']) ||</span> </td>
                      </tr><tr>
                        <th> </th><th>152</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; !array_key_exists($input['category'] = (int)$input['category'], $event_categories))</span> </td>
                      </tr><tr>
                        <th> </th><th>153</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>154</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $failed_validation = TRUE;</span> </td>
                      </tr><tr>
                        <th> </th><th>155</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;messages-&gt;AddMessage('error', 'You did not specify a valid event category');</span> </td>
                      </tr><tr>
                        <th> </th><th>156</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>157</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['description']&nbsp; &nbsp; = $this-&gt;input-&gt;post('a_description');</span> </td>
                      </tr><tr>
                        <th> </th><th>158</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['frequency']&nbsp; &nbsp; &nbsp; = $this-&gt;input-&gt;post('a_frequency');</span> </td>
                      </tr><tr>
                        <th> </th><th>159</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Figure out recurrence</span> </td>
                      </tr><tr>
                        <th> </th><th>160</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ('none' !== $input['frequency']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>161</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['interval']&nbsp; &nbsp; &nbsp; &nbsp;= $this-&gt;input-&gt;post('a_interval');</span> </td>
                      </tr><tr>
                        <th> </th><th>162</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!is_numeric($input['interval']) || $input['interval'] &lt; 1) {</span> </td>
                      </tr><tr>
                        <th> </th><th>163</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $failed_validation = TRUE;</span> </td>
                      </tr><tr>
                        <th> </th><th>164</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;messages-&gt;AddMessage('error', 'You specified an invalid interval');</span> </td>
                      </tr><tr>
                        <th> </th><th>165</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>166</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['interval'] = (int)$input['interval'];</span> </td>
                      </tr><tr>
                        <th> </th><th>167</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>168</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ('daily' === $input['frequency']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>169</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif ('weekly' === $input['frequency']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>170</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['onday']&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = $this-&gt;input-&gt;post('a_onday');</span> </td>
                      </tr><tr>
                        <th> </th><th>171</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif ('yearly' === $input['frequency']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>172</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>173</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>174</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (array('start','end') as $startend) {</span> </td>
                      </tr><tr>
                        <th> </th><th>175</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Validate dates</span> </td>
                      </tr><tr>
                        <th> </th><th>176</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $field = $startend.'date';</span> </td>
                      </tr><tr>
                        <th> </th><th>177</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (preg_match('/^[ \t]*(\d{1,2})\/(\d{1,2})\/(\d{4})[ \t]*$/', $input[$field], $matches)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>178</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (checkdate((int)$matches[2], (int)$matches[1], (int)$matches[3])) {</span> </td>
                      </tr><tr>
                        <th> </th><th>179</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input[$field] = $matches;</span> </td>
                      </tr><tr>
                        <th> </th><th>180</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>181</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;messages-&gt;AddMessage('error',</span> </td>
                      </tr><tr>
                        <th> </th><th>182</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'You specified a '.$startend.' date that does not exist: '.</span> </td>
                      </tr><tr>
                        <th> </th><th>183</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $matches[1].'/'.$matches[2].'/'.$matches[3]</span> </td>
                      </tr><tr>
                        <th> </th><th>184</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th> </th><th>185</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $failed_validation = TRUE;</span> </td>
                      </tr><tr>
                        <th> </th><th>186</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>187</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>188</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;messages-&gt;AddMessage('error',</span> </td>
                      </tr><tr>
                        <th> </th><th>189</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'You specified an invalid '.$startend.' date: "'.$input[$field].'"'</span> </td>
                      </tr><tr>
                        <th> </th><th>190</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th> </th><th>191</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $failed_validation = TRUE;</span> </td>
                      </tr><tr>
                        <th> </th><th>192</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>193</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Validate times</span> </td>
                      </tr><tr>
                        <th> </th><th>194</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $field = $startend.'time';</span> </td>
                      </tr><tr>
                        <th> </th><th>195</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($input['time_associated']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>196</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (preg_match('/^[ \t]*([012]?\d):([0-5]?\d)(:([0-5]?\d))?[ \t]*$/', $input[$field], $matches)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>197</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $hour = (int)$matches[1];</span> </td>
                      </tr><tr>
                        <th> </th><th>198</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $minute = (int)$matches[2];</span> </td>
                      </tr><tr>
                        <th> </th><th>199</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!empty($matches[4])) {</span> </td>
                      </tr><tr>
                        <th> </th><th>200</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $second = (int)$matches[4];</span> </td>
                      </tr><tr>
                        <th> </th><th>201</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>202</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $second = 0;</span> </td>
                      </tr><tr>
                        <th> </th><th>203</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>204</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($hour &lt; 24 &amp;&amp; $minute &lt; 60 &amp;&amp; $second &lt; 60) {</span> </td>
                      </tr><tr>
                        <th> </th><th>205</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input[$field] = array($hour, $minute, $second);</span> </td>
                      </tr><tr>
                        <th> </th><th>206</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>207</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;messages-&gt;AddMessage('error',</span> </td>
                      </tr><tr>
                        <th> </th><th>208</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'You specified a '.$startend.' time that does not exist: '.</span> </td>
                      </tr><tr>
                        <th> </th><th>209</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $hour.':'.$minute.':'.$second</span> </td>
                      </tr><tr>
                        <th> </th><th>210</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th> </th><th>211</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $failed_validation = TRUE;</span> </td>
                      </tr><tr>
                        <th> </th><th>212</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>213</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>214</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;messages-&gt;AddMessage('error',</span> </td>
                      </tr><tr>
                        <th> </th><th>215</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'You specified an invalid '.$startend.' time: "'.$input[$field].'"'</span> </td>
                      </tr><tr>
                        <th> </th><th>216</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th> </th><th>217</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $failed_validation = TRUE;</span> </td>
                      </tr><tr>
                        <th> </th><th>218</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>219</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>220</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input[$field] = array(0,0,0);</span> </td>
                      </tr><tr>
                        <th> </th><th>221</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>222</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>223</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>224</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!$failed_validation) {</span> </td>
                      </tr><tr>
                        <th> </th><th>225</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start = mktime(</span> </td>
                      </tr><tr>
                        <th> </th><th>226</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['starttime'][0],</span> </td>
                      </tr><tr>
                        <th> </th><th>227</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['starttime'][1],</span> </td>
                      </tr><tr>
                        <th> </th><th>228</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['starttime'][2],</span> </td>
                      </tr><tr>
                        <th> </th><th>229</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['startdate'][2],</span> </td>
                      </tr><tr>
                        <th> </th><th>230</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['startdate'][1],</span> </td>
                      </tr><tr>
                        <th> </th><th>231</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['startdate'][3]</span> </td>
                      </tr><tr>
                        <th> </th><th>232</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th> </th><th>233</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $end = mktime(</span> </td>
                      </tr><tr>
                        <th> </th><th>234</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['endtime'][0],</span> </td>
                      </tr><tr>
                        <th> </th><th>235</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['endtime'][1],</span> </td>
                      </tr><tr>
                        <th> </th><th>236</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['endtime'][2],</span> </td>
                      </tr><tr>
                        <th> </th><th>237</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['enddate'][2],</span> </td>
                      </tr><tr>
                        <th> </th><th>238</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['enddate'][1],</span> </td>
                      </tr><tr>
                        <th> </th><th>239</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['enddate'][3]</span> </td>
                      </tr><tr>
                        <th> </th><th>240</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th> </th><th>241</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($end &lt; $start) {</span> </td>
                      </tr><tr>
                        <th> </th><th>242</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;messages-&gt;AddMessage('error', 'You specified the end time before the start time.');</span> </td>
                      </tr><tr>
                        <th> </th><th>243</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $failed_validation = TRUE;</span> </td>
                      </tr><tr>
                        <th> </th><th>244</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>245</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!$input['time_associated']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>246</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $end = strtotime('1day', $end);</span> </td>
                      </tr><tr>
                        <th> </th><th>247</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>248</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['recur'] = new RecurrenceSet();</span> </td>
                      </tr><tr>
                        <th> </th><th>249</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['recur']-&gt;SetStartEnd($start, $end);</span> </td>
                      </tr><tr>
                        <th> </th><th>250</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>251</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // daily</span> </td>
                      </tr><tr>
                        <th> </th><th>252</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ('daily' === $input['frequency']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>253</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rrule = new CalendarRecurRule();</span> </td>
                      </tr><tr>
                        <th> </th><th>254</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rrule-&gt;SetFrequency('daily');</span> </td>
                      </tr><tr>
                        <th> </th><th>255</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rrule-&gt;SetInterval($input['interval']);</span> </td>
                      </tr><tr>
                        <th> </th><th>256</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['recur']-&gt;AddRRules($rrule);</span> </td>
                      </tr><tr>
                        <th> </th><th>257</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>258</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif ('weekly' === $input['frequency']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>259</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rrule = new CalendarRecurRule();</span> </td>
                      </tr><tr>
                        <th> </th><th>260</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rrule-&gt;SetFrequency('weekly');</span> </td>
                      </tr><tr>
                        <th> </th><th>261</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rrule-&gt;SetInterval($input['interval']);</span> </td>
                      </tr><tr>
                        <th> </th><th>262</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; static $onday_translate = array(</span> </td>
                      </tr><tr>
                        <th> </th><th>263</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'mon' =&gt; 'MO',</span> </td>
                      </tr><tr>
                        <th> </th><th>264</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'tue' =&gt; 'TU',</span> </td>
                      </tr><tr>
                        <th> </th><th>265</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'wed' =&gt; 'WE',</span> </td>
                      </tr><tr>
                        <th> </th><th>266</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'thu' =&gt; 'TH',</span> </td>
                      </tr><tr>
                        <th> </th><th>267</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'fri' =&gt; 'FR',</span> </td>
                      </tr><tr>
                        <th> </th><th>268</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'sat' =&gt; 'SA',</span> </td>
                      </tr><tr>
                        <th> </th><th>269</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'sun' =&gt; 'SU',</span> </td>
                      </tr><tr>
                        <th> </th><th>270</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th> </th><th>271</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($input['onday'] as $day =&gt; $on) {</span> </td>
                      </tr><tr>
                        <th> </th><th>272</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $short_day = strtoupper(substr($day,0,2));</span> </td>
                      </tr><tr>
                        <th> </th><th>273</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (array_key_exists($short_day, CalendarRecurRule::$sWeekdays)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>274</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rrule-&gt;SetByDay(CalendarRecurRule::$sWeekdays[$short_day]);</span> </td>
                      </tr><tr>
                        <th> </th><th>275</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>276</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>277</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['recur']-&gt;AddRRules($rrule);</span> </td>
                      </tr><tr>
                        <th> </th><th>278</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>279</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif ('yearly' === $input['frequency']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>280</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rrule = new CalendarRecurRule();</span> </td>
                      </tr><tr>
                        <th> </th><th>281</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rrule-&gt;SetFrequency('yearly');</span> </td>
                      </tr><tr>
                        <th> </th><th>282</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rrule-&gt;SetInterval($input['interval']);</span> </td>
                      </tr><tr>
                        <th> </th><th>283</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $input['recur']-&gt;AddRRules($rrule);</span> </td>
                      </tr><tr>
                        <th> </th><th>284</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>285</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>286</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>287</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try {</span> </td>
                      </tr><tr>
                        <th> </th><th>288</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $results = $this-&gt;events_model-&gt;EventCreate($input);</span> </td>
                      </tr><tr>
                        <th> </th><th>289</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;messages-&gt;AddMessage('success', 'Event created successfully.');</span> </td>
                      </tr><tr>
                        <th> </th><th>290</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } catch (Exception $e) {</span> </td>
                      </tr><tr>
                        <th> </th><th>291</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;messages-&gt;AddMessage('error', $e-&gt;getMessage());</span> </td>
                      </tr><tr>
                        <th> </th><th>292</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>293</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>294</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>295</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>296</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>297</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $data = array(</span> </td>
                      </tr><tr>
                        <th> </th><th>298</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'EventCategories' =&gt; $event_categories,</span> </td>
                      </tr><tr>
                        <th> </th><th>299</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'AddForm' =&gt; array(</span> </td>
                      </tr><tr>
                        <th> </th><th>300</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'target' =&gt; $this-&gt;uri-&gt;uri_string(),</span> </td>
                      </tr><tr>
                        <th> </th><th>301</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'default_summary' =&gt; '',</span> </td>
                      </tr><tr>
                        <th> </th><th>302</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'default_startdate' =&gt; date('d/m/Y', strtotime('+3hour')),</span> </td>
                      </tr><tr>
                        <th> </th><th>303</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'default_starttime' =&gt; date('H:m',&nbsp; &nbsp;strtotime('+3hour')),</span> </td>
                      </tr><tr>
                        <th> </th><th>304</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'default_enddate'&nbsp; &nbsp;=&gt; date('d/m/Y', strtotime('+4hour')),</span> </td>
                      </tr><tr>
                        <th> </th><th>305</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'default_endtime'&nbsp; &nbsp;=&gt; date('H:m',&nbsp; &nbsp;strtotime('+4hour')),</span> </td>
                      </tr><tr>
                        <th> </th><th>306</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'default_allday'&nbsp; &nbsp; =&gt; FALSE,</span> </td>
                      </tr><tr>
                        <th> </th><th>307</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'default_eventcategory' =&gt; -1,</span> </td>
                      </tr><tr>
                        <th> </th><th>308</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ),</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>309</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>35</th><th>310</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>36</th><th>311</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;main_frame-&gt;SetContentSimple('calendar/simpleadd',$data);</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=a2a9cce8a6c0bcc63b181f79c8d7980f67eff4a0#L39">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L314">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>39</th><th>314</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>40</th><th>315</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>41</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function day($DateRange = '')</span> </td>
                      </tr><tr>
                        <th>42</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>43</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //return $this-&gt;days($DateRange);</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>316</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function day($DateRange = NULL)</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>317</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>44</th><th>318</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!CheckPermissions('public')) return;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>45</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //$this-&gt;_ShowDay();</span> </td>
                      </tr><tr>
                        <th>46</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;main_frame-&gt;SetExtraHead('&lt;link href="stylsheets/calendar.css" rel="stylesheet" type="text/css"&gt;');</span> </td>
                      </tr><tr>
                        <th>47</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;main_frame-&gt;SetContentSimple('calendar/today');</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>319</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;_ShowDay($DateRange);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>48</th><th>320</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;main_frame-&gt;Load();</span> </td>
                  </tr><tr>
                          <th>49</th><th>321</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=a2a9cce8a6c0bcc63b181f79c8d7980f67eff4a0#L56">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L328">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>56</th><th>328</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>57</th><th>329</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>58</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function days($DateRange = <del>''</del>)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>330</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function days($DateRange = <ins>NULL</ins>)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>59</th><th>331</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr><tr>
                          <th>60</th><th>332</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!CheckPermissions('public')) return;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>61</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>62</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;library('academic_calendar');</span> </td>
                      </tr><tr>
                        <th>63</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;library('date_uri');</span> </td>
                      </tr><tr>
                        <th>64</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>65</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Sorry about the clutter, this will be moved in a bit but it isn't</span> </td>
                      </tr><tr>
                        <th>66</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // practical to put it in the view</span> </td>
                      </tr><tr>
                        <th>67</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $extra_head = &lt;&lt;&lt;EXTRAHEAD</span> </td>
                      </tr><tr>
                        <th>68</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>69</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;script src="/javascript/prototype.js" type="text/javascript"&gt;&lt;/script&gt;</span> </td>
                      </tr><tr>
                        <th>70</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;script src="/javascript/scriptaculous.js" type="text/javascript"&gt;&lt;/script&gt;</span> </td>
                      </tr><tr>
                        <th>71</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;script src="/javascript/calendar.js" type="text/javascript"&gt;&lt;/script&gt;</span> </td>
                      </tr><tr>
                        <th>72</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;link href="/stylesheets/calendar.css" rel="stylesheet" type="text/css" /&gt;</span> </td>
                      </tr><tr>
                        <th>73</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>74</th><th> </th><td class="l"><span>EXTRAHEAD;</span> </td>
                      </tr><tr>
                        <th>75</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;main_frame-&gt;SetExtraHead($extra_head);</span> </td>
                      </tr><tr>
                        <th>76</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>77</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!empty($DateRange)) {</span> </td>
                      </tr><tr>
                        <th>78</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // $DateRange Not empty</span> </td>
                      </tr><tr>
                        <th>79</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>80</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Read the date, only allowing a single date (no range data)</span> </td>
                      </tr><tr>
                        <th>81</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $uri_result = $this-&gt;date_uri-&gt;ReadUri($DateRange, FALSE);</span> </td>
                      </tr><tr>
                        <th>82</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($uri_result['valid']) {</span> </td>
                      </tr><tr>
                        <th>83</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // $DateRange Valid</span> </td>
                      </tr><tr>
                        <th>84</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start_time = $uri_result['start'];</span> </td>
                      </tr><tr>
                        <th>85</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start_time = $start_time-&gt;BackToMonday();</span> </td>
                      </tr><tr>
                        <th>86</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $format = $uri_result['format']; // Use the format in all links</span> </td>
                      </tr><tr>
                        <th>87</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days = 7; // force 7 days until view can handle different values.</span> </td>
                      </tr><tr>
                        <th>88</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>89</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;_ShowDays($start_time, $days, $format);</span> </td>
                      </tr><tr>
                        <th>90</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;main_frame-&gt;Load();</span> </td>
                      </tr><tr>
                        <th>91</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</span> </td>
                      </tr><tr>
                        <th>92</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>93</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th>94</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // $DateRange Invalid</span> </td>
                      </tr><tr>
                        <th>95</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;main_frame-&gt;AddMessage('error','Unrecognised date: "'.$DateRange.'"');</span> </td>
                      </tr><tr>
                        <th>96</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>97</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>98</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>99</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Default to this week</span> </td>
                      </tr><tr>
                        <th>100</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $format = 'ac';</span> </td>
                      </tr><tr>
                        <th>101</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $base_time = new Academic_time(time());</span> </td>
                      </tr><tr>
                        <th>102</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>103</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $monday = $base_time-&gt;BackToMonday();</span> </td>
                      </tr><tr>
                        <th>104</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>105</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;_ShowDays($monday, 7, $format);</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>333</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;_ShowDays($DateRange);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>106</th><th>334</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;main_frame-&gt;Load();</span> </td>
                  </tr><tr>
                          <th>107</th><th>335</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=a2a9cce8a6c0bcc63b181f79c8d7980f67eff4a0#L128">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L356">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>128</th><th>356</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $EndTime&nbsp; &nbsp;timestamp End time of events.</span> </td>
                  </tr><tr>
                          <th>129</th><th>357</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>130</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function _SetupSources($StartTime, $EndTime<del></del>)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>358</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function _SetupSources($StartTime, $EndTime<ins>, $Todos = FALSE</ins>)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>131</th><th>359</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr><tr>
                          <th>132</th><th>360</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Load calendar source libraries</span> </td>
                  </tr><tr>
                          <th>133</th><th>361</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;library('calendar_source_yorker');</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>362</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;model('calendar/recurrence_model');</ins> </td>
                  </tr><tr>
                          <th> </th><th>363</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;library('calendar_source_icalendar');</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>364</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;library('calendar_source_facebook');</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>134</th><th>365</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>135</th><th>366</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Set up data sources</span> </td>
                  </tr><tr>
                          <th>136</th><th>367</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sources = array();</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>137</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sources[] = $source_yorker = new CalendarSourceYorker();</span> </td>
                      </tr><tr>
                        <th>138</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>139</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Set yorker date range to something relevent</span> </td>
                      </tr><tr>
                        <th>140</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $source_yorker-&gt;SetRange($StartTime, $EndTime);</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>368</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>369</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $source_yorker = new CalendarSourceYorker();</span> </td>
                      </tr><tr>
                        <th> </th><th>370</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $source_yorker-&gt;EnableTodo($Todos);</span> </td>
                      </tr><tr>
                        <th> </th><th>371</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sources[] = $source_yorker;</span> </td>
                      </tr><tr>
                        <th> </th><th>372</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>373</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sources[] = new CalendarSourceFacebook();</span> </td>
                      </tr><tr>
                        <th> </th><th>374</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //$sources[] = new CalendarSourceICalendar(file_get_contents('ukpublic.ics'));</span> </td>
                      </tr><tr>
                        <th> </th><th>375</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //$sources[] = new CalendarSourceICalendar(file_get_contents('googdood.ics'));</span> </td>
                      </tr><tr>
                        <th> </th><th>376</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //$sources[] = new CalendarSourceICalendar(file_get_contents('christian.ics'));</span> </td>
                      </tr><tr>
                        <th> </th><th>377</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>378</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Set sources date range to something relevent</span> </td>
                      </tr><tr>
                        <th> </th><th>379</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($sources as $source) {</span> </td>
                      </tr><tr>
                        <th> </th><th>380</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $source-&gt;SetRange($StartTime, $EndTime);</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>381</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>141</th><th>382</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>142</th><th>383</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $sources;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=a2a9cce8a6c0bcc63b181f79c8d7980f67eff4a0#L155">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L396">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>155</th><th>396</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>156</th><th>397</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>157</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function _ShowDay(<del></del>)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>398</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function _ShowDay(<ins>$DateRange = NULL</ins>)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>158</th><th>399</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr><tr>
                          <th>159</th><th>400</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;_LoadCalendarSystem();</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>160</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sources = $this-&gt;_SetupSources(strtotime('month'), strtotime('1month'));</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>401</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;library('date_uri');</span> </td>
                      </tr><tr>
                        <th> </th><th>402</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $range = $this-&gt;date_uri-&gt;ReadUri($DateRange, TRUE);</span> </td>
                      </tr><tr>
                        <th> </th><th>403</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $now = new Academic_time(time());</span> </td>
                      </tr><tr>
                        <th> </th><th>404</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($range['valid']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>405</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start = $range['start'];</span> </td>
                      </tr><tr>
                        <th> </th><th>406</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>407</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start = $now-&gt;Midnight();</span> </td>
                      </tr><tr>
                        <th> </th><th>408</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>409</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $end = $start-&gt;Adjust('1day');</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>410</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sources = $this-&gt;_SetupSources($start-&gt;Timestamp(), $end-&gt;Timestamp(), TRUE);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>161</th><th>411</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $calendar_data = new CalendarData();</span> </td>
                  </tr><tr>
                          <th>162</th><th>412</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=a2a9cce8a6c0bcc63b181f79c8d7980f67eff4a0#L169">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L419">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>169</th><th>419</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days = new CalendarViewDays();</span> </td>
                  </tr><tr>
                          <th>170</th><th>420</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days-&gt;SetCalendarData($calendar_data);</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>421</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days-&gt;SetStartEnd($start-&gt;Timestamp(), $end-&gt;Timestamp());</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>171</th><th>422</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $todo = new CalendarViewTodoList();</span> </td>
                  </tr><tr>
                          <th>172</th><th>423</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $todo-&gt;SetCalendarData($calendar_data);</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=a2a9cce8a6c0bcc63b181f79c8d7980f67eff4a0#L213">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L464">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>213</th><th>464</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>214</th><th>465</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>215</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function _ShowDays($<del>start, $num_days, $format</del>)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>466</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function _ShowDays($<ins>DateRange = NULL</ins>)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>216</th><th>467</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr><tr>
                          <th>217</th><th>468</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;_LoadCalendarSystem();</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>218</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sources = $this-&gt;_SetupSources($start-&gt;Timestamp(), $start-&gt;Adjust($num_days.'days')-&gt;Timestamp());</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>469</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;library('date_uri');</span> </td>
                      </tr><tr>
                        <th> </th><th>470</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $range = $this-&gt;date_uri-&gt;ReadUri($DateRange, TRUE);</span> </td>
                      </tr><tr>
                        <th> </th><th>471</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $now = new Academic_time(time());</span> </td>
                      </tr><tr>
                        <th> </th><th>472</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($range['valid']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>473</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start = $range['start'];</span> </td>
                      </tr><tr>
                        <th> </th><th>474</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $end = $range['end'];</span> </td>
                      </tr><tr>
                        <th> </th><th>475</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>476</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start = $now-&gt;Midnight();</span> </td>
                      </tr><tr>
                        <th> </th><th>477</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $end = $start-&gt;Adjust('7day');</span> </td>
                      </tr><tr>
                        <th> </th><th>478</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>479</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sources = $this-&gt;_SetupSources($start-&gt;Timestamp(), $end-&gt;Timestamp());</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>219</th><th>480</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $calendar_data = new CalendarData();</span> </td>
                  </tr><tr>
                          <th>220</th><th>481</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=a2a9cce8a6c0bcc63b181f79c8d7980f67eff4a0#L226">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L487">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>226</th><th>487</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days = new CalendarViewDays();</span> </td>
                  </tr><tr>
                          <th>227</th><th>488</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days-&gt;SetCalendarData($calendar_data);</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>228</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days-&gt;Set<del>Range($start, $num_days</del>);</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>489</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days-&gt;Set<ins>StartEnd($start-&gt;Timestamp(), $end-&gt;Timestamp()</ins>);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>229</th><th>490</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>230</th><th>491</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $data = array(</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=a2a9cce8a6c0bcc63b181f79c8d7980f67eff4a0#L371">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/calendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L632">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>371</th><th>632</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ChangedEvents-&gt;SetSpecialCondition(</span> </td>
                  </tr><tr>
                          <th>372</th><th>633</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_occurrence_users.event_occurrence_user_timestamp &lt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>373</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrences.event_occurrence_<del>timestamp</del>');</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>634</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrences.event_occurrence_<ins>last_modified</ins>');</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>374</th><th>635</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $notices = $ChangedEvents-&gt;GenerateOccurrences(array(</span> </td>
                  </tr><tr>
                          <th>375</th><th>636</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'state'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; $ChangedEvents-&gt;ExpressionPublicState(),</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file2">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to system/application/controllers/home.php" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/system/application/controllers/home.php">system/application/controllers/home.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision dbed2528752ecd93347f489b5831883a61a20fc2">
                    <a title="Show revision dbed2528752ecd93347f489b5831883a61a20fc2 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/home.php?rev=dbed2528752ecd93347f489b5831883a61a20fc2#L37">
                      rdbed2</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/home.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L37">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>37</th><th>37</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;main_frame-&gt;Load();</span> </td>
                  </tr><tr>
                          <th>38</th><th>38</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>39</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>40</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// Setup the user's main event sources.</ins> </td>
                  </tr><tr>
                          <th> </th><th>41</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /**</ins> </td>
                  </tr><tr>
                          <th> </th><th>42</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $StartTime timestamp Start time of events.</ins> </td>
                  </tr><tr>
                          <th> </th><th>43</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $EndTime&nbsp; &nbsp;timestamp End time of events.</ins> </td>
                  </tr><tr>
                          <th> </th><th>44</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</ins> </td>
                  </tr><tr>
                          <th> </th><th>45</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function _SetupSources($StartTime, $EndTime)</ins> </td>
                  </tr><tr>
                          <th> </th><th>46</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr>
                          <th> </th><th>47</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Load calendar source libraries</ins> </td>
                  </tr><tr>
                          <th> </th><th>48</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;library('calendar_backend');</ins> </td>
                  </tr><tr>
                          <th> </th><th>49</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;library('calendar_source_yorker');</ins> </td>
                  </tr><tr>
                          <th> </th><th>50</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;library('calendar_source_facebook');</ins> </td>
                  </tr><tr>
                          <th> </th><th>51</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>52</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Set up data sources</ins> </td>
                  </tr><tr>
                          <th> </th><th>53</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sources = array();</ins> </td>
                  </tr><tr>
                          <th> </th><th>54</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>55</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $source_yorker = new CalendarSourceYorker();</ins> </td>
                  </tr><tr>
                          <th> </th><th>56</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $source_yorker-&gt;EnableTodo(TRUE);</ins> </td>
                  </tr><tr>
                          <th> </th><th>57</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sources[] = $source_yorker;</ins> </td>
                  </tr><tr>
                          <th> </th><th>58</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>59</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sources[] = new CalendarSourceFacebook();</ins> </td>
                  </tr><tr>
                          <th> </th><th>60</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>61</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Set sources date range to something relevent</ins> </td>
                  </tr><tr>
                          <th> </th><th>62</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($sources as $source) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>63</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $source-&gt;SetRange($StartTime, $EndTime);</ins> </td>
                  </tr><tr>
                          <th> </th><th>64</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>65</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>66</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $sources;</ins> </td>
                  </tr><tr>
                          <th> </th><th>67</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>68</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>69</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /**</ins> </td>
                  </tr><tr>
                          <th> </th><th>70</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array(Todays events view, Todo view).</ins> </td>
                  </tr><tr>
                          <th> </th><th>71</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</ins> </td>
                  </tr><tr>
                          <th> </th><th>72</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; private function _GetMiniCalendars()</ins> </td>
                  </tr><tr>
                          <th> </th><th>73</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr>
                          <th> </th><th>74</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;library('academic_calendar');</ins> </td>
                  </tr><tr>
                          <th> </th><th>75</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;library('calendar_frontend');</ins> </td>
                  </tr><tr>
                          <th> </th><th>76</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;library('calendar_view_agenda');</ins> </td>
                  </tr><tr>
                          <th> </th><th>77</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;library('calendar_view_todo_list');</ins> </td>
                  </tr><tr>
                          <th> </th><th>78</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>79</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $now = new Academic_time(time());</ins> </td>
                  </tr><tr>
                          <th> </th><th>80</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start = $now;</ins> </td>
                  </tr><tr>
                          <th> </th><th>81</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $end = $now-&gt;Midnight()-&gt;Adjust('+2day');</ins> </td>
                  </tr><tr>
                          <th> </th><th>82</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sources = $this-&gt;_SetupSources($start-&gt;Timestamp(), $end-&gt;Timestamp());</ins> </td>
                  </tr><tr>
                          <th> </th><th>83</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $calendar_data = new CalendarData();</ins> </td>
                  </tr><tr>
                          <th> </th><th>84</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>85</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;messages-&gt;AddMessages($calendar_data-&gt;FetchEventsFromSources($sources));</ins> </td>
                  </tr><tr>
                          <th> </th><th>86</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>87</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Display data</ins> </td>
                  </tr><tr>
                          <th> </th><th>88</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;library('calendar_view_days');</ins> </td>
                  </tr><tr>
                          <th> </th><th>89</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>90</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $EventsView = new CalendarViewAgenda();</ins> </td>
                  </tr><tr>
                          <th> </th><th>91</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $EventsView-&gt;SetMiniMode();</ins> </td>
                  </tr><tr>
                          <th> </th><th>92</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $EventsView-&gt;SetCalendarData($calendar_data);</ins> </td>
                  </tr><tr>
                          <th> </th><th>93</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //$EventsView-&gt;SetStartEnd($start-&gt;Timestamp(), $end-&gt;Timestamp());</ins> </td>
                  </tr><tr>
                          <th> </th><th>94</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>95</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $TodoView = new CalendarViewTodoList();</ins> </td>
                  </tr><tr>
                          <th> </th><th>96</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $TodoView-&gt;SetCalendarData($calendar_data);</ins> </td>
                  </tr><tr>
                          <th> </th><th>97</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return array($EventsView, $TodoView);</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>98</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>39</th><th>99</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>40</th><th>100</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function index()</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/home.php?rev=dbed2528752ecd93347f489b5831883a61a20fc2#L65">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/home.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L125">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>65</th><th>125</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Obtain banner</span> </td>
                  </tr><tr>
                          <th>66</th><th>126</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $data['banner'] = $this-&gt;Home_Model-&gt;GetBannerImage();</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>127</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>128</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Minifeeds</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>129</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; list($data['events'], $data['todo']) = $this-&gt;_GetMiniCalendars();</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>67</th><th>130</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>68</th><th>131</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Set up the public frame</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file3">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to system/application/controllers/login.php" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/system/application/controllers/login.php">system/application/controllers/login.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision c358857be2e10998e7117e67c8f6c88c3aae17b2">
                    <a title="Show revision c358857be2e10998e7117e67c8f6c88c3aae17b2 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/login.php?rev=c358857be2e10998e7117e67c8f6c88c3aae17b2#L13">
                      rc3588</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/login.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L13">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>13</th><th>13</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr><tr>
                          <th>14</th><th>14</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; parent::Controller();</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>15</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>16</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>17</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Redirect to the uri given after the initial login/.../</span> </td>
                      </tr><tr>
                        <th>18</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>19</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @note Duplicated from logout</span> </td>
                      </tr><tr>
                        <th>20</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>21</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function _redirect($FirstSegment = 2)</span> </td>
                      </tr><tr>
                        <th>22</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>23</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return implode('/', array_slice($this-&gt;uri-&gt;rsegment_array(), $FirstSegment));</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>15</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr class="last">
                        <th> </th><th>16</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;helper('uri_tail');</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>24</th><th>17</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>25</th><th>18</th><td class="l"><span></span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/login.php?rev=c358857be2e10998e7117e67c8f6c88c3aae17b2#L33">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/login.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L26">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>33</th><th>26</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!CheckPermissions('public', FALSE, TRUE)) return;</span> </td>
                  </tr><tr>
                          <th>34</th><th>27</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>35</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginHandler('student', <del>$this-&gt;_redirect(</del>));</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>28</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginHandler('student', <ins>GetUriTail(2</ins>));</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>36</th><th>29</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>37</th><th>30</th><td class="l"><span></span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/login.php?rev=c358857be2e10998e7117e67c8f6c88c3aae17b2#L45">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/login.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L38">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>45</th><th>38</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!CheckPermissions('student', FALSE, TRUE)) return;</span> </td>
                  </tr><tr>
                          <th>46</th><th>39</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>47</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginHandler('vip', <del>$this-&gt;_redirect(</del>));</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>40</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginHandler('vip', <ins>GetUriTail(2</ins>));</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>48</th><th>41</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>49</th><th>42</th><td class="l"><span></span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/login.php?rev=c358857be2e10998e7117e67c8f6c88c3aae17b2#L59">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/login.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L52">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>59</th><th>52</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!CheckPermissions('student', FALSE, TRUE)) return;</span> </td>
                  </tr><tr>
                          <th>60</th><th>53</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>61</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginHandler('vip', <del>$this-&gt;_redirect</del>(3), $Organisation);</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>54</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginHandler('vip', <ins>GetUriTail</ins>(3), $Organisation);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>62</th><th>55</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>63</th><th>56</th><td class="l"><span></span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/login.php?rev=c358857be2e10998e7117e67c8f6c88c3aae17b2#L71">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/login.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L64">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>71</th><th>64</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!CheckPermissions('student', FALSE, TRUE)) return;</span> </td>
                  </tr><tr>
                          <th>72</th><th>65</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>73</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginHandler('office', <del>$this-&gt;_redirect(</del>));</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>66</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginHandler('office', <ins>GetUriTail(2</ins>));</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>74</th><th>67</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>75</th><th>68</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/login.php?rev=c358857be2e10998e7117e67c8f6c88c3aae17b2#L84">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/login.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L77">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>84</th><th>77</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;facebook-&gt;Enable();</span> </td>
                  </tr><tr>
                          <th>85</th><th>78</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>86</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <del>redirect($this-&gt;_redirect()</del>);</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>79</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ins>RedirectUriTail(2</ins>);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>87</th><th>80</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>88</th><th>81</th><td class="l"><span>}</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file4">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to system/application/controllers/logout.php" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/system/application/controllers/logout.php">system/application/controllers/logout.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision c358857be2e10998e7117e67c8f6c88c3aae17b2">
                    <a title="Show revision c358857be2e10998e7117e67c8f6c88c3aae17b2 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/logout.php?rev=c358857be2e10998e7117e67c8f6c88c3aae17b2#L16">
                      rc3588</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/logout.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L16">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>16</th><th>16</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // CheckPermissions is not used so user_auth needs loading</span> </td>
                  </tr><tr>
                          <th>17</th><th>17</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;model('user_auth');</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>18</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>19</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>20</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Redirect to the uri given after the initial logout/.../</span> </td>
                      </tr><tr>
                        <th>21</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>22</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @note Duplicated from login</span> </td>
                      </tr><tr>
                        <th>23</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>24</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function _redirect($FirstSegment = 2)</span> </td>
                      </tr><tr>
                        <th>25</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>26</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; redirect(implode('/', array_slice($this-&gt;uri-&gt;rsegment_array(), $FirstSegment)));</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>18</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;helper('uri_tail');</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>27</th><th>19</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>28</th><th>20</th><td class="l"><span></span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/logout.php?rev=c358857be2e10998e7117e67c8f6c88c3aae17b2#L41">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/logout.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L33">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>41</th><th>33</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>42</th><th>34</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>43</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <del>$this-&gt;_redirect(</del>);</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>35</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ins>RedirectUriTail(2</ins>);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>44</th><th>36</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>45</th><th>37</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/logout.php?rev=c358857be2e10998e7117e67c8f6c88c3aae17b2#L58">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/logout.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L50">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>58</th><th>50</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>59</th><th>51</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>60</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <del>$this-&gt;_redirect(</del>);</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>52</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ins>RedirectUriTail(2</ins>);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>61</th><th>53</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>62</th><th>54</th><td class="l"><span></span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/logout.php?rev=c358857be2e10998e7117e67c8f6c88c3aae17b2#L75">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/logout.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L67">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>75</th><th>67</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>76</th><th>68</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>77</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <del>$this-&gt;_redirect(</del>);</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>69</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ins>RedirectUriTail(2</ins>);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>78</th><th>70</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>79</th><th>71</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/logout.php?rev=c358857be2e10998e7117e67c8f6c88c3aae17b2#L88">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/logout.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L80">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>88</th><th>80</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;facebook-&gt;Disable();</span> </td>
                  </tr><tr>
                          <th>89</th><th>81</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>90</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <del>$this-&gt;_redirect(</del>);</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>82</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ins>RedirectUriTail(2</ins>);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>91</th><th>83</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>92</th><th>84</th><td class="l"><span>}</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file5">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to system/application/controllers/office/calendar.php" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/system/application/controllers/office/calendar.php">system/application/controllers/office/calendar.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 9732d54767c3a107dbe945e8a0e96b20e669fa06">
                    <a title="Show revision 9732d54767c3a107dbe945e8a0e96b20e669fa06 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/office/calendar.php?rev=9732d54767c3a107dbe945e8a0e96b20e669fa06#L115">
                      r9732d</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/office/calendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L115">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>115</th><th>115</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function events($EventId = FALSE, $OccurrenceId=FALSE)</span> </td>
                  </tr><tr>
                          <th>116</th><th>116</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>117</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; show_404();</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>117</th><th>118</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (FALSE!==$EventId &amp;&amp; !is_numeric($EventId)) {</span> </td>
                  </tr><tr>
                          <th>118</th><th>119</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; show_404();</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/office/calendar.php?rev=9732d54767c3a107dbe945e8a0e96b20e669fa06#L136">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/office/calendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L137">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>136</th><th>137</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $name = $info[0];</span> </td>
                  </tr><tr>
                          <th>137</th><th>138</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule = $info[1];</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>139</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @todo Update for new recurrence system</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>138</th><th>140</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule_id = $this-&gt;recurrence_model-&gt;AddRule($rule);</span> </td>
                  </tr><tr>
                          <th>139</th><th>141</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (FALSE === $rule_id) {</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/office/calendar.php?rev=9732d54767c3a107dbe945e8a0e96b20e669fa06#L197">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/office/calendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L199">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>197</th><th>199</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $fields = array(</span> </td>
                  </tr><tr>
                          <th>198</th><th>200</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'occurrence_id' =&gt; 'event_occurrences.event_occurrence_id',</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>199</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'description' =&gt; 'event_occurrences.event_occurrence_description',</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>200</th><th>201</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'start' =&gt; 'event_occurrences.event_occurrence_start_time',</span> </td>
                  </tr><tr>
                          <th>201</th><th>202</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'end' =&gt; 'event_occurrences.event_occurrence_end_time',</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/office/calendar.php?rev=9732d54767c3a107dbe945e8a0e96b20e669fa06#L243">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/office/calendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L244">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>243</th><th>244</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $op .= '&lt;LI&gt;'.$occurrence['status'].' &lt;A HREF="' . vip_url('calendar/events/' . $EventId . '/' . $occurrence['occurrence_id']) . '"&gt;' .</span> </td>
                  </tr><tr>
                          <th>244</th><th>245</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence['start'] . ' -&gt; ' . $occurrence['end'] . '&lt;/A&gt; '.</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>245</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <del>$occurrence['description'].</del>' ('.implode(', ',$links).') &lt;/LI&gt;';</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>246</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ins></ins>' ('.implode(', ',$links).') &lt;/LI&gt;';</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>246</th><th>247</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>247</th><th>248</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $op .= '&lt;/OL&gt;';</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/office/calendar.php?rev=9732d54767c3a107dbe945e8a0e96b20e669fa06#L290">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/office/calendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L291">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>290</th><th>291</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $result = $filter-&gt;GenerateOccurrences(array(</span> </td>
                  </tr><tr>
                          <th>291</th><th>292</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'occurrence_id' =&gt; 'event_occurrences.event_occurrence_id',</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>292</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'description' =&gt; 'event_occurrences.event_occurrence_description',</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>293</th><th>293</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'start' =&gt; 'event_occurrences.event_occurrence_start_time',</span> </td>
                  </tr><tr>
                          <th>294</th><th>294</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'end' =&gt; 'event_occurrences.event_occurrence_end_time',</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/office/calendar.php?rev=9732d54767c3a107dbe945e8a0e96b20e669fa06#L300">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/office/calendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L300">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>300</th><th>300</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'postponed'=&gt;$filter-&gt;ExpressionPublicPostponed(),</span> </td>
                  </tr><tr>
                          <th>301</th><th>301</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'rescheduled'=&gt;$filter-&gt;ExpressionPublicRescheduled(),</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>302</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'ts' =&gt; 'event_occurrences.event_occurrence_<del>timestamp</del>',</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>302</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'ts' =&gt; 'event_occurrences.event_occurrence_<ins>last_modified</ins>',</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>303</th><th>303</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ));</span> </td>
                  </tr><tr>
                          <th>304</th><th>304</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/office/calendar.php?rev=9732d54767c3a107dbe945e8a0e96b20e669fa06#L379">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/office/calendar.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L379">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>379</th><th>379</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'occurrences' =&gt; array(</span> </td>
                  </tr><tr>
                          <th>380</th><th>380</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array(</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>381</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'description' =&gt; 'the only occurrence',</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>382</th><th>381</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'location' =&gt; 'tba',</span> </td>
                  </tr><tr>
                          <th>383</th><th>382</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'start' =&gt; mktime(14,30,0,2,14,2007),</span> </td>
                  </tr><tr>
                          <th>384</th><th>383</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'end' =&gt; mktime(17,0,0,2,14,2007),</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>385</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '<del>all_day' =&gt; FALS</del>E,</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>384</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '<ins>time_associated' =&gt; TRU</ins>E,</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>386</th><th>385</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'ends_late' =&gt; FALSE,</span> </td>
                  </tr><tr>
                          <th>387</th><th>386</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ),</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file7">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to system/application/libraries/Calendar_backend.php" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/system/application/libraries/Calendar_backend.php">system/application/libraries/Calendar_backend.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision b35aae36ff4a5f71e6ae0f58522e5664dc1d1111">
                    <a title="Show revision b35aae36ff4a5f71e6ae0f58522e5664dc1d1111 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_backend.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L46">
                      rb35aa</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_backend.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L46">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>46</th><th>46</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// &amp;CalendarOccurrence,NULL Reference to the active occurrence.</span> </td>
                  </tr><tr>
                          <th>47</th><th>47</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; public $ActiveOccurrence&nbsp; &nbsp; &nbsp; &nbsp; = NULL;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>48</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// bool Whether the <del>event is time associated</del></span> </td>
                      </tr><tr>
                        <th>49</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; public $T<del>imeAssociated</del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = FALSE;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>48</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// bool Whether the <ins>occurrence is a todo item.</ins></span> </td>
                      </tr><tr class="last">
                        <th> </th><th>49</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; public $T<ins>odo&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = FALSE;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>50</th><th>50</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// AcademicTime,NULL Start time of event.</span> </td>
                  </tr><tr>
                          <th>51</th><th>51</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; public $StartTime&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= NULL;</span> </td>
                  </tr><tr>
                          <th>52</th><th>52</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// AcademicTime,NULL End time of event.</span> </td>
                  </tr><tr>
                          <th>53</th><th>53</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; public $EndTime&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= NULL;</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>54</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// bool Whether the event is time associated</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>55</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; public $TimeAssociated&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = TRUE;</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>54</th><th>56</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// string,NULL Description of location.</span> </td>
                  </tr><tr>
                          <th>55</th><th>57</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; public $LocationDescription&nbsp; &nbsp; &nbsp;= NULL;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_backend.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L65">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_backend.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L67">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>65</th><th>67</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// int[0,100],NULL How complete the item is for the user.</span> </td>
                  </tr><tr>
                          <th>66</th><th>68</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; public $UserProgress&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = NULL;</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>69</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>70</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// bool Whether to display on the users calendar.</ins> </td>
                  </tr><tr>
                          <th> </th><th>71</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; public $DisplayOnCalendar&nbsp; &nbsp; &nbsp; &nbsp;= TRUE;</ins> </td>
                  </tr><tr>
                          <th> </th><th>72</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// bool Whether to display on the users to-do list.</ins> </td>
                  </tr><tr>
                          <th> </th><th>73</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; public $DisplayOnTodo&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= FALSE;</ins> </td>
                  </tr><tr>
                          <th> </th><th>74</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// AcademicTime,NULL Effective start time of todo.</ins> </td>
                  </tr><tr>
                          <th> </th><th>75</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; public $TodoStartTime&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= NULL;</ins> </td>
                  </tr><tr>
                          <th> </th><th>76</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// AcademicTime,NULL Effective end time of todo.</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>77</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; public $TodoEndTime&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= NULL;</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>67</th><th>78</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>68</th><th>79</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Primary constructor.</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_backend.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L102">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_backend.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L113">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>102</th><th>113</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// string Name of event.</span> </td>
                  </tr><tr>
                          <th>103</th><th>114</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; public $Name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = '';</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>115</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// bool Whether the event is time associated</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>116</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; public $TimeAssociated&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = TRUE;</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>104</th><th>117</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// string,NULL Description of event (parsed wikitext).</span> </td>
                  </tr><tr>
                          <th>105</th><th>118</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; public $Description&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= NULL;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_backend.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L110">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_backend.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L123">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>110</th><th>123</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// string Status of the user regarding the event (must be in @a $ValidUserStatuses).</span> </td>
                  </tr><tr>
                          <th>111</th><th>124</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; public $UserStatus&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 'none';</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>125</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// RecurrenceSet Recurrence information.</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>126</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; public $Recur&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= NULL;</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>112</th><th>127</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>113</th><th>128</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Primary constructor.</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_backend.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L272">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_backend.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L287">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>272</th><th>287</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mSources&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= array();</span> </td>
                  </tr><tr>
                          <th>273</th><th>288</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>289</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// array[string =&gt; bool] Flags for enabling different information.</ins> </td>
                  </tr><tr>
                          <th> </th><th>290</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; protected $mFlags&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= array();</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>291</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>274</th><th>292</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Constructors.</span> </td>
                  </tr><tr>
                          <th>275</th><th>293</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_backend.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L367">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_backend.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L385">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>367</th><th>385</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>368</th><th>386</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>387</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// Get the array of calendar occurrences.</ins> </td>
                  </tr><tr>
                          <th> </th><th>388</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /**</ins> </td>
                  </tr><tr>
                          <th> </th><th>389</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array[&amp;CalendarOccurrence] Array of occurrence references.</ins> </td>
                  </tr><tr>
                          <th> </th><th>390</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</ins> </td>
                  </tr><tr>
                          <th> </th><th>391</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function GetCalendarOccurrences()</ins> </td>
                  </tr><tr>
                          <th> </th><th>392</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr>
                          <th> </th><th>393</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $result = array();</ins> </td>
                  </tr><tr>
                          <th> </th><th>394</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($this-&gt;mOccurrences as $key =&gt; $occurrence) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>395</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($occurrence-&gt;DisplayOnCalendar) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>396</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $result[] = &amp; $this-&gt;mOccurrences[$key];</ins> </td>
                  </tr><tr>
                          <th> </th><th>397</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>398</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>399</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $result;</ins> </td>
                  </tr><tr>
                          <th> </th><th>400</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>401</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>402</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// Get the array of todo occurrences.</ins> </td>
                  </tr><tr>
                          <th> </th><th>403</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /**</ins> </td>
                  </tr><tr>
                          <th> </th><th>404</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array[&amp;CalendarOccurrence] Array of occurrence references.</ins> </td>
                  </tr><tr>
                          <th> </th><th>405</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</ins> </td>
                  </tr><tr>
                          <th> </th><th>406</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function GetTodoOccurrences()</ins> </td>
                  </tr><tr>
                          <th> </th><th>407</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr>
                          <th> </th><th>408</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $result = array();</ins> </td>
                  </tr><tr>
                          <th> </th><th>409</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($this-&gt;mOccurrences as $key =&gt; $occurrence) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>410</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($occurrence-&gt;DisplayOnTodo) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>411</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $result[] = &amp; $this-&gt;mOccurrences[$key];</ins> </td>
                  </tr><tr>
                          <th> </th><th>412</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>413</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>414</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $result;</ins> </td>
                  </tr><tr>
                          <th> </th><th>415</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>416</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>369</th><th>417</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Get the array of Events</span> </td>
                  </tr><tr>
                          <th>370</th><th>418</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_backend.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L392">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_backend.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L440">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>392</th><th>440</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr><tr>
                          <th>393</th><th>441</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;mSources;</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>442</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>443</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>444</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// Enable a flag.</ins> </td>
                  </tr><tr>
                          <th> </th><th>445</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /**</ins> </td>
                  </tr><tr>
                          <th> </th><th>446</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $FlagName string The name of the flag to enable.</ins> </td>
                  </tr><tr>
                          <th> </th><th>447</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</ins> </td>
                  </tr><tr>
                          <th> </th><th>448</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function EnableFlag($FlagName)</ins> </td>
                  </tr><tr>
                          <th> </th><th>449</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr>
                          <th> </th><th>450</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mFlags[$FlagName] = TRUE;</ins> </td>
                  </tr><tr>
                          <th> </th><th>451</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>452</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>453</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// Disable a flag.</ins> </td>
                  </tr><tr>
                          <th> </th><th>454</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /**</ins> </td>
                  </tr><tr>
                          <th> </th><th>455</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $FlagName string The name of the flag to disable.</ins> </td>
                  </tr><tr>
                          <th> </th><th>456</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</ins> </td>
                  </tr><tr>
                          <th> </th><th>457</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function DisableFlag($FlagName)</ins> </td>
                  </tr><tr>
                          <th> </th><th>458</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr>
                          <th> </th><th>459</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mFlags[$FlagName] = FALSE;</ins> </td>
                  </tr><tr>
                          <th> </th><th>460</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>461</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>462</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// Get the value of a flag.</ins> </td>
                  </tr><tr>
                          <th> </th><th>463</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /**</ins> </td>
                  </tr><tr>
                          <th> </th><th>464</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $FlagName string The name of the flag.</ins> </td>
                  </tr><tr>
                          <th> </th><th>465</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return bool The value of the flag specified by @a $FlagName.</ins> </td>
                  </tr><tr>
                          <th> </th><th>466</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</ins> </td>
                  </tr><tr>
                          <th> </th><th>467</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function GetFlag($FlagName)</ins> </td>
                  </tr><tr>
                          <th> </th><th>468</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr>
                          <th> </th><th>469</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;mFlags[$Flagname];</ins> </td>
                  </tr><tr>
                          <th> </th><th>470</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>471</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>472</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// Get the events from multiple sources</ins> </td>
                  </tr><tr>
                          <th> </th><th>473</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /**</ins> </td>
                  </tr><tr>
                          <th> </th><th>474</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return Array of messages to display.</ins> </td>
                  </tr><tr>
                          <th> </th><th>475</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</ins> </td>
                  </tr><tr>
                          <th> </th><th>476</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function FetchEventsFromSources($Sources)</ins> </td>
                  </tr><tr>
                          <th> </th><th>477</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr>
                          <th> </th><th>478</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!is_array($Sources)) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>479</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $Sources = array($Sources);</ins> </td>
                  </tr><tr>
                          <th> </th><th>480</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>481</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $CI = &amp; get_instance();</ins> </td>
                  </tr><tr>
                          <th> </th><th>482</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $messages = array();</ins> </td>
                  </tr><tr>
                          <th> </th><th>483</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Accumulate data from sources in $this</ins> </td>
                  </tr><tr>
                          <th> </th><th>484</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($Sources as $source) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>485</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try {</ins> </td>
                  </tr><tr>
                          <th> </th><th>486</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $source-&gt;FetchEvents($this);</ins> </td>
                  </tr><tr>
                          <th> </th><th>487</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } catch (Exception $e) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>488</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $messages[] = array('calendar data source failed: '.$e-&gt;getMessage(), 'error');</ins> </td>
                  </tr><tr>
                          <th> </th><th>489</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>490</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>491</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $messages;</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>394</th><th>492</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>395</th><th>493</th><td class="l"><span>}</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file10">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to system/application/libraries/Calendar_source_yorker.php" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/system/application/libraries/Calendar_source_yorker.php">system/application/libraries/Calendar_source_yorker.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision b35aae36ff4a5f71e6ae0f58522e5664dc1d1111">
                    <a title="Show revision b35aae36ff4a5f71e6ae0f58522e5664dc1d1111 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L21">
                      rb35aa</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L21">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>21</th><th>21</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mOccurrenceFilter;</span> </td>
                  </tr><tr>
                          <th>22</th><th>22</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>23</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// bool Whether todo list items are enabled.</ins> </td>
                  </tr><tr>
                          <th> </th><th>24</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; protected $mEnableTodo;</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>25</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>23</th><th>26</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Default constructor.</span> </td>
                  </tr><tr>
                          <th>24</th><th>27</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function __construct()</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L43">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L46">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>43</th><th>46</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>44</th><th>47</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>48</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// Enable todo list items.</ins> </td>
                  </tr><tr>
                          <th> </th><th>49</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function EnableTodo($Enable = TRUE)</ins> </td>
                  </tr><tr>
                          <th> </th><th>50</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr>
                          <th> </th><th>51</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mEnableTodo = $Enable;</ins> </td>
                  </tr><tr>
                          <th> </th><th>52</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>53</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>45</th><th>54</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Fedge the events of the source.</span> </td>
                  </tr><tr>
                          <th>46</th><th>55</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L55">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L64">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>55</th><th>64</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>56</th><th>65</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $filter-&gt;SetRange($this-&gt;mStartTime,$this-&gt;mEndTime);</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>66</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $filter-&gt;SetFlag('todo', $this-&gt;mEnableTodo);</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>57</th><th>67</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>58</th><th>68</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $CI = &amp; get_instance();</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>69</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>70</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $query = new EventOccurrenceQuery();</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>59</th><th>71</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>60</th><th>72</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $fields = array(</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L62">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L74">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>62</th><th>74</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'state'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'event_occurrences.event_occurrence_state',</span> </td>
                  </tr><tr>
                          <th>63</th><th>75</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'active'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; 'event_occurrences.event_occurrence_active_occurrence_id',</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>64</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'all_day'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'event_occurrences.event_occurrence_all_day',</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>65</th><th>76</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'start'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'UNIX_TIMESTAMP(event_occurrences.event_occurrence_start_time)',</span> </td>
                  </tr><tr>
                          <th>66</th><th>77</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'end'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'UNIX_TIMESTAMP(event_occurrences.event_occurrence_end_time)',</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>78</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'time_associated'&nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'event_occurrences.event_occurrence_time_associated',</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>67</th><th>79</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'location'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; 'event_occurrences.event_occurrence_location_name',</span> </td>
                  </tr><tr>
                          <th>68</th><th>80</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'ends_late'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'event_occurrences.event_occurrence_ends_late',</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>81</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>82</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // show on calendar if date associated and attending=TRUE or NULL</ins> </td>
                  </tr><tr>
                          <th> </th><th>83</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'show_on_calendar'&nbsp; &nbsp; &nbsp; =&gt; $query-&gt;ExpressionShowOnCalendar(),</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>84</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>69</th><th>85</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'user_last_update'&nbsp; &nbsp; &nbsp; =&gt; 'UNIX_TIMESTAMP(event_occurrence_users.event_occurrence_user_timestamp)',</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>70</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'user_attending'&nbsp; &nbsp; &nbsp; &nbsp; =&gt; 'event_occurrence_users.event_occurrence_user_state',</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>86</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'user_attending'&nbsp; &nbsp; &nbsp; &nbsp; =&gt; 'event_occurrence_users.event_occurrence_user_attending',</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>87</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'user_todo'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'event_occurrence_users.event_occurrence_user_todo',</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>71</th><th>88</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'user_progress'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'event_occurrence_users.event_occurrence_user_progress',</span> </td>
                  </tr><tr>
                          <th>72</th><th>89</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>73</th><th>90</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_id'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; 'events.event_id',</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>91</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_todo'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; 'events.event_todo',</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>74</th><th>92</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'category_name'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'event_types.event_type_name',</span> </td>
                  </tr><tr>
                          <th>75</th><th>93</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'category_colour'&nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'event_types.event_type_colour_hex',</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L77">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L95">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>77</th><th>95</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'description'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'events.event_description',</span> </td>
                  </tr><tr>
                          <th>78</th><th>96</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //'blurb'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'events.event_blurb',</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>97</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_time_associated' =&gt; 'events.event_time_associated',</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>79</th><th>98</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'last_update'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'UNIX_TIMESTAMP(events.event_timestamp)',</span> </td>
                  </tr><tr>
                          <th>80</th><th>99</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'subscribed'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; 'event_subscriptions.event_subscription_user_entity_id IS NOT NULL',</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L85">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L104">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>85</th><th>104</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'org_shortname'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'organisations.organisation_directory_entry_name',</span> </td>
                  </tr><tr>
                          <th>86</th><th>105</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>106</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>107</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;mEnableTodo) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>108</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // show on todo if user todo=TRUE or (NULL AND todo)</ins> </td>
                  </tr><tr>
                          <th> </th><th>109</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $fields['show_on_todo'] = $query-&gt;ExpressionShowOnTodo();</ins> </td>
                  </tr><tr>
                          <th> </th><th>110</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // effective start and end of todo if forced into one (from now until the beginning of the event)</ins> </td>
                  </tr><tr>
                          <th> </th><th>111</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $fields['todo_start']&nbsp; &nbsp;= $query-&gt;ExpressionTodoStart();</ins> </td>
                  </tr><tr>
                          <th> </th><th>112</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $fields['todo_end']&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= $query-&gt;ExpressionTodoEnd();</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>113</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>87</th><th>114</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $db_data = $filter-&gt;GenerateOccurrences($fields);</span> </td>
                  </tr><tr>
                          <th>88</th><th>115</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L103">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L130">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>103</th><th>130</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $event-&gt;Description = $row['description'];</span> </td>
                  </tr><tr>
                          <th>104</th><th>131</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $event-&gt;LastUpdate = $row['last_update'];</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>132</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $event-&gt;TimeAssociated = $row['event_time_associated'];</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>105</th><th>133</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>106</th><th>134</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!array_key_exists($occurrence_id, $occurrences)) {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>107</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence = $occurrences[$occurrence_id] = <del></del>$Data-&gt;NewOccurrence($events[$event_id]);</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>135</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence = $occurrences[$occurrence_id] = <ins>&amp; </ins>$Data-&gt;NewOccurrence($events[$event_id]);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>108</th><th>136</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence-&gt;SourceOccurrenceId = $occurrence_id;</span> </td>
                  </tr><tr>
                          <th>109</th><th>137</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @todo Active occurrence</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>110</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence-&gt;TimeAssociated = !$row['all_day'];</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>111</th><th>138</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL !== $row['start']) {</span> </td>
                  </tr><tr>
                          <th>112</th><th>139</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence-&gt;StartTime = new Academic_time((int)$row['start']);</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L115">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L142">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>115</th><th>142</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence-&gt;EndTime = new Academic_time((int)$row['end']);</span> </td>
                  </tr><tr>
                          <th>116</th><th>143</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>144</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence-&gt;TimeAssociated = $row['time_associated'];</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>117</th><th>145</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence-&gt;LocationDescription = $row['location'];</span> </td>
                  </tr><tr>
                          <th>118</th><th>146</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @todo location link</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L126">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_source_yorker.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L154">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>126</th><th>154</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL !== $row['user_progress']) {</span> </td>
                  </tr><tr>
                          <th>127</th><th>155</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence-&gt;UserProgress = (int)$row['user_progress'];</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>156</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>157</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //$occurrence-&gt;Todo = (bool)$row['todo'];</ins> </td>
                  </tr><tr>
                          <th> </th><th>158</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence-&gt;DisplayOnCalendar = (NULL !== $row['show_on_calendar'] &amp;&amp; (bool)$row['show_on_calendar']);</ins> </td>
                  </tr><tr>
                          <th> </th><th>159</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;mEnableTodo) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>160</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence-&gt;DisplayOnTodo = (NULL !== $row['show_on_todo'] &amp;&amp; (bool)$row['show_on_todo']);</ins> </td>
                  </tr><tr>
                          <th> </th><th>161</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL !== $row['todo_start']) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>162</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence-&gt;TodoStartTime = new Academic_time($row['todo_start']);</ins> </td>
                  </tr><tr>
                          <th> </th><th>163</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>164</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL !== $row['todo_end']) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>165</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence-&gt;TodoEndTime = new Academic_time($row['todo_end']);</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>166</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>128</th><th>167</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>129</th><th>168</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file11">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to system/application/libraries/Calendar_view_agenda.php" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/system/application/libraries/Calendar_view_agenda.php">system/application/libraries/Calendar_view_agenda.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision b35aae36ff4a5f71e6ae0f58522e5664dc1d1111">
                    <a title="Show revision b35aae36ff4a5f71e6ae0f58522e5664dc1d1111 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_view_agenda.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L21">
                      rb35aa</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_view_agenda.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L21">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>21</th><th>21</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr><tr>
                          <th>22</th><th>22</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; parent::__construct('calendar/agenda');</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>23</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>24</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;SetData('MiniMode', FALSE);</ins> </td>
                  </tr><tr>
                          <th> </th><th>25</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>26</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>27</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// Whether to use mini mode.</ins> </td>
                  </tr><tr>
                          <th> </th><th>28</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function SetMiniMode($Mini = TRUE)</ins> </td>
                  </tr><tr>
                          <th> </th><th>29</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>30</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;SetData('MiniMode', $Mini);</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>23</th><th>31</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>24</th><th>32</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_view_agenda.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L33">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_view_agenda.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L41">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>33</th><th>41</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected function ProcessEvents(&amp;$Data, $Categories)</span> </td>
                  </tr><tr>
                          <th>34</th><th>42</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>35</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrences = $Data-&gt;Get<del></del>Occurrences();</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>43</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrences = $Data-&gt;Get<ins>Calendar</ins>Occurrences();</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>36</th><th>44</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $events = $Data-&gt;GetEvents();</span> </td>
                  </tr><tr>
                          <th>37</th><th>45</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file12">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to system/application/libraries/Calendar_view_days.php" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/system/application/libraries/Calendar_view_days.php">system/application/libraries/Calendar_view_days.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 1b2bcaeb5f75398df4303b697f1f296099f649d2">
                    <a title="Show revision 1b2bcaeb5f75398df4303b697f1f296099f649d2 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_view_days.php?rev=1b2bcaeb5f75398df4303b697f1f296099f649d2#L17">
                      r1b2bc</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_view_days.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L17">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>17</th><th>17</th><td class="l"><span>class CalendarViewDays extends CalendarView</span> </td>
                  </tr><tr>
                          <th>18</th><th>18</th><td class="l"><span>{</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>19</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Academic_time Start time of view.</span> </td>
                      </tr><tr>
                        <th>20</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mStartTime;</span> </td>
                      </tr><tr>
                        <th>21</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Academic_time End time of view.</span> </td>
                      </tr><tr>
                        <th>22</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mEndTime;</span> </td>
                      </tr><tr>
                        <th>23</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Number of days to display</span> </td>
                      </tr><tr>
                        <th>24</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; private $mNumDays;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>19</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// timestamp Start time of range of events to fetch.</span> </td>
                      </tr><tr>
                        <th> </th><th>20</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mStartTime = NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>21</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// timestamp End time of range of events to fetch.</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>22</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mEndTime = NULL;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>25</th><th>23</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>26</th><th>24</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Default constructor.</span> </td>
                  </tr><tr>
                          <th>27</th><th>25</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function __construct()</span> </td>
                  </tr><tr>
                          <th>28</th><th>26</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>29</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; parent::__construct('calendar/calendar');</span> </td>
                      </tr><tr>
                        <th>30</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mNumDays = 7;</span> </td>
                      </tr><tr>
                        <th>31</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mUriFormat = Date_uri::DefaultFormat();</span> </td>
                      </tr><tr>
                        <th>32</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mUriBase = '';</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>27</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; parent::__construct('calendar/days');</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>33</th><th>28</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>34</th><th>29</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>35</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the base uri on which to base links.</span> </td>
                      </tr><tr>
                        <th>36</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>37</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $UriBase string URL of previous period of days.</span> </td>
                      </tr><tr>
                        <th>38</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>39</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetUriBase($UriBase)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>30</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetStartEnd($Start, $End)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>40</th><th>31</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>41</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mUriBase = $UriBase;</span> </td>
                      </tr><tr>
                        <th>42</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>43</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>44</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the uri format.</span> </td>
                      </tr><tr>
                        <th>45</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>46</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Format string Formatting string as used by Date_uri.</span> </td>
                      </tr><tr>
                        <th>47</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>48</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetUriFormat($Format)</span> </td>
                      </tr><tr>
                        <th>49</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>50</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mUriFormat = $Format;</span> </td>
                      </tr><tr>
                        <th>51</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>52</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>53</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Use date_uri to produce a valid uri for a date</span> </td>
                      </tr><tr>
                        <th>54</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>55</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Date Academic_time Time to encode in a URI.</span> </td>
                      </tr><tr>
                        <th>56</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return string Full site url with encoded date.</span> </td>
                      </tr><tr>
                        <th>57</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>58</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function GenerateUri($Start, $End = FALSE)</span> </td>
                      </tr><tr>
                        <th>59</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>60</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $CI = &amp;get_instance();</span> </td>
                      </tr><tr>
                        <th>61</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return site_url($this-&gt;mUriBase . $CI-&gt;date_uri-&gt;GenerateUri($this-&gt;mUriFormat, $Start, $End));</span> </td>
                      </tr><tr>
                        <th>62</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>63</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>64</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the day range to display.</span> </td>
                      </tr><tr>
                        <th>65</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>66</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $StartTime Academic_time Start time of calendar.</span> </td>
                      </tr><tr>
                        <th>67</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $NumDays integer Number of days to display.</span> </td>
                      </tr><tr>
                        <th>68</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>69</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @todo The first 3 statements don't really belong here. Move elsewhere.</span> </td>
                      </tr><tr>
                        <th>70</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>71</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetRange($StartTime, $NumDays)</span> </td>
                      </tr><tr>
                        <th>72</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>73</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $CI = &amp;get_instance();</span> </td>
                      </tr><tr>
                        <th>74</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>75</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Load my "minitemplater" helper.</span> </td>
                      </tr><tr>
                        <th>76</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // This is a very basic S&amp;R script</span> </td>
                      </tr><tr>
                        <th>77</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // : Allows chunks of template code to be parsed without cluttering</span> </td>
                      </tr><tr>
                        <th>78</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // up the script :)</span> </td>
                      </tr><tr>
                        <th>79</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $CI-&gt;load-&gt;helper('minitemplater');</span> </td>
                      </tr><tr>
                        <th>80</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>81</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Don't trust users to set their clocks properly</span> </td>
                      </tr><tr>
                        <th>82</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;SetData('server_dt', time());</span> </td>
                      </tr><tr>
                        <th>83</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>84</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mNumDays = $NumDays;</span> </td>
                      </tr><tr>
                        <th>85</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>86</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Make sure that the time is rounded back to midnight</span> </td>
                      </tr><tr>
                        <th>87</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $StartTime = $StartTime-&gt;Midnight();</span> </td>
                      </tr><tr>
                        <th>88</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>89</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @todo compensate if not in a valid academic term.</span> </td>
                      </tr><tr>
                        <th>90</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>91</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;SetData('academic_year', $StartTime-&gt;AcademicYearName());</span> </td>
                      </tr><tr>
                        <th>92</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;SetData('academic_term', $StartTime-&gt;AcademicTermName() . ' ' . $StartTime-&gt;AcademicTermTypeName());</span> </td>
                      </tr><tr>
                        <th>93</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;SetData('academic_week', $StartTime-&gt;AcademicWeek());</span> </td>
                      </tr><tr>
                        <th>94</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>95</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $end_time = $StartTime-&gt;Adjust($NumDays.'day');</span> </td>
                      </tr><tr>
                        <th>96</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Get the stuff from the db</span> </td>
                      </tr><tr>
                        <th>97</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;_SetRange($StartTime, $end_time);</span> </td>
                      </tr><tr>
                        <th>98</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>99</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>100</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the range to display (internal function).</span> </td>
                      </tr><tr>
                        <th>101</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>102</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $StartTime Academic_time Start time of calendar.</span> </td>
                      </tr><tr>
                        <th>103</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $EndTime Academic_time End time of calendar.</span> </td>
                      </tr><tr>
                        <th>104</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>105</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected function _SetRange($StartTime, $EndTime)</span> </td>
                      </tr><tr>
                        <th>106</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>107</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mStartTime = $StartTime;</span> </td>
                      </tr><tr>
                        <th>108</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mEndTime = $EndTime;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>32</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mStartTime = $Start;</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>33</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mEndTime = $End;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>109</th><th>34</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>110</th><th>35</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_view_days.php?rev=1b2bcaeb5f75398df4303b697f1f296099f649d2#L119">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_view_days.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L44">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>119</th><th>44</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected function ProcessEvents(&amp;$Data, $Categories)</span> </td>
                  </tr><tr>
                          <th>120</th><th>45</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>121</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrences = $Data-&gt;Get<del></del>Occurrences();</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>46</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrences = $Data-&gt;Get<ins>Calendar</ins>Occurrences();</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>122</th><th>47</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $events = $Data-&gt;GetEvents();</span> </td>
                  </tr><tr>
                          <th>123</th><th>48</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>124</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days_information = array();</span> </td>
                      </tr><tr>
                        <th>125</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Initialise the day info array</span> </td>
                      </tr><tr>
                        <th>126</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $current_time = $this-&gt;mStartTime-&gt;Midnight();</span> </td>
                      </tr><tr>
                        <th>127</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $current_index = 0;</span> </td>
                      </tr><tr>
                        <th>128</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while ($current_time-&gt;Timestamp() &lt; $this-&gt;mEndTime-&gt;Timestamp()) {</span> </td>
                      </tr><tr>
                        <th>129</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days_information[$current_time-&gt;Timestamp()] = array(</span> </td>
                      </tr><tr>
                        <th>130</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'index' =&gt; $current_index,</span> </td>
                      </tr><tr>
                        <th>131</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'date' =&gt; $current_time,</span> </td>
                      </tr><tr>
                        <th>132</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'special_headings' =&gt; array(),</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>49</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days = array();</span> </td>
                      </tr><tr>
                        <th> </th><th>50</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start = $this-&gt;mStartTime;</span> </td>
                      </tr><tr>
                        <th> </th><th>51</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $end = $this-&gt;mEndTime;</span> </td>
                      </tr><tr>
                        <th> </th><th>52</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while ($start &lt; $end) {</span> </td>
                      </tr><tr>
                        <th> </th><th>53</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $date = date('Ymd', $start);</span> </td>
                      </tr><tr>
                        <th> </th><th>54</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days[$date] = array(</span> </td>
                      </tr><tr>
                        <th> </th><th>55</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'date' =&gt; new Academic_time($start),</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>56</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'events' =&gt; array(),</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>133</th><th>57</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>134</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>135</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Onto the next day</span> </td>
                      </tr><tr>
                        <th>136</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $current_time = $current_time-&gt;Adjust('1day');</span> </td>
                      </tr><tr>
                        <th>137</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ++$current_index;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>58</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start = strtotime('1day',$start);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>138</th><th>59</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>139</th><th>60</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>140</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($occurrences as $key =&gt; $event) {</span> </td>
                      </tr><tr>
                        <th>141</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $midnight_time = $event-&gt;StartTime-&gt;Midnight()-&gt;Timestamp();</span> </td>
                      </tr><tr>
                        <th>142</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (array_key_exists($midnight_time, $days_information)) {</span> </td>
                      </tr><tr>
                        <th>143</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrences[$key]-&gt;Day = $days_information[$midnight_time]['index'];</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>61</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($occurrences as $key =&gt; $occurrence) {</span> </td>
                      </tr><tr>
                        <th> </th><th>62</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occ = &amp; $occurrences[$key];</span> </td>
                      </tr><tr>
                        <th> </th><th>63</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $date = $occ-&gt;StartTime-&gt;Format('Ymd');</span> </td>
                      </tr><tr>
                        <th> </th><th>64</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $time = $occ-&gt;StartTime-&gt;Format('His');</span> </td>
                      </tr><tr>
                        <th> </th><th>65</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (array_key_exists($date, $days)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>66</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!array_key_exists($time, $days[$date]['events'])) {</span> </td>
                      </tr><tr>
                        <th> </th><th>67</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days[$date]['events'][$time] = array();</span> </td>
                      </tr><tr>
                        <th> </th><th>68</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>69</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days[$date]['events'][$time][] = &amp;$occ;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>144</th><th>70</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>145</th><th>71</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>72</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>73</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($days as $date =&gt; $times) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>74</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ksort($days[$date]);</ins> </td>
                  </tr><tr>
                          <th> </th><th>75</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>76</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>146</th><th>77</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;SetData('Occurrences', $occurrences);</span> </td>
                  </tr><tr>
                          <th>147</th><th>78</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;SetData('Events', $events);</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>148</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>149</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // this is temporary for testing only</span> </td>
                      </tr><tr>
                        <th>150</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;SetData('days', array());</span> </td>
                      </tr><tr>
                        <th>151</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDataArray['dayinfo'] = array();</span> </td>
                      </tr><tr>
                        <th>152</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($days_information as $day_info) {</span> </td>
                      </tr><tr>
                        <th>153</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day_time = $day_info['date'];</span> </td>
                      </tr><tr>
                        <th>154</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDataArray['days'][$day_info['index']] = $day_time-&gt;Format('jS M');</span> </td>
                      </tr><tr>
                        <th>155</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>156</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day_info['is_holiday'&nbsp; &nbsp; ] = $day_time-&gt;IsHoliday();</span> </td>
                      </tr><tr>
                        <th>157</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day_info['is_weekend'&nbsp; &nbsp; ] = $day_time-&gt;DayOfWeek() &gt; 5;</span> </td>
                      </tr><tr>
                        <th>158</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day_info['year'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] = $day_time-&gt;AcademicYear();</span> </td>
                      </tr><tr>
                        <th>159</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day_info['date'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] = $day_time-&gt;Format('jS');</span> </td>
                      </tr><tr>
                        <th>160</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day_info['month_short'&nbsp; &nbsp;] = $day_time-&gt;Format('M');</span> </td>
                      </tr><tr>
                        <th>161</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day_info['month_long'&nbsp; &nbsp; ] = $day_time-&gt;Format('F');</span> </td>
                      </tr><tr>
                        <th>162</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day_info['day_of_week'&nbsp; &nbsp;] = $day_time-&gt;Format('l');</span> </td>
                      </tr><tr>
                        <th>163</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day_info['academic_year' ] = $day_time-&gt;AcademicYearName(2);</span> </td>
                      </tr><tr>
                        <th>164</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day_info['academic_term' ] = $day_time-&gt;AcademicTermName().' '.$day_time-&gt;AcademicTermTypeName();</span> </td>
                      </tr><tr>
                        <th>165</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day_info['academic_week' ] = $day_time-&gt;AcademicWeek();</span> </td>
                      </tr><tr>
                        <th>166</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>167</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDataArray['dayinfo'][$day_info['index']] = $day_info;</span> </td>
                      </tr><tr>
                        <th>168</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>169</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>170</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //$this-&gt;SetData('prev', $this-&gt;GenerateUri($this-&gt;mStartTime-&gt;Adjust((-($this-&gt;mNumDays)).'day'),$this-&gt;mStartTime));</span> </td>
                      </tr><tr>
                        <th>171</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //$this-&gt;SetData('next', $this-&gt;GenerateUri($this-&gt;mEndTime,$this-&gt;mEndTime-&gt;Adjust($this-&gt;mNumDays.'day')));</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>79</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;SetData('Days', $days);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>172</th><th>80</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>173</th><th>81</th><td class="l"><span>}</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file14">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to system/application/libraries/Calendar_view_todo_list.php" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/system/application/libraries/Calendar_view_todo_list.php">system/application/libraries/Calendar_view_todo_list.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision b35aae36ff4a5f71e6ae0f58522e5664dc1d1111">
                    <a title="Show revision b35aae36ff4a5f71e6ae0f58522e5664dc1d1111 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_view_todo_list.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L21">
                      rb35aa</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_view_todo_list.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L21">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>21</th><th>21</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr><tr>
                          <th>22</th><th>22</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; parent::__construct('calendar/todo_list');</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>23</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>24</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $CI = &amp; get_instance();</ins> </td>
                  </tr><tr>
                          <th> </th><th>25</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>26</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;SetData('InlineAdder', TRUE);</ins> </td>
                  </tr><tr>
                          <th> </th><th>27</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;SetData('InlineAdderTarget', site_url('calendar/actions/add/todo'.$CI-&gt;uri-&gt;uri_string()));</ins> </td>
                  </tr><tr>
                          <th> </th><th>28</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>29</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>30</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// Disable the cunning inline todo adder.</ins> </td>
                  </tr><tr>
                          <th> </th><th>31</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function DisableInlineAdder()</ins> </td>
                  </tr><tr>
                          <th> </th><th>32</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>33</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;SetData('InlineAdder', FALSE);</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>23</th><th>34</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>24</th><th>35</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_view_todo_list.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L33">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_view_todo_list.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L44">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>33</th><th>44</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected function ProcessEvents(&amp;$Data, $Categories)</span> </td>
                  </tr><tr>
                          <th>34</th><th>45</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>35</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrences = $Data-&gt;GetOccurrences();</span> </td>
                      </tr><tr>
                        <th>36</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $events = $Data-&gt;GetEvents();</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>46</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $items = $Data-&gt;GetTodoOccurrences();</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>37</th><th>47</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>38</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;SetData('Occurrences', $occurrences);</span> </td>
                      </tr><tr>
                        <th>39</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;SetData('Events', $events);</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>48</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;SetData('Items', $items);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>40</th><th>49</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>41</th><th>50</th><td class="l"><span>}</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file15">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to system/application/libraries/Calendar_view_weeks.php" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/system/application/libraries/Calendar_view_weeks.php">system/application/libraries/Calendar_view_weeks.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision b35aae36ff4a5f71e6ae0f58522e5664dc1d1111">
                    <a title="Show revision b35aae36ff4a5f71e6ae0f58522e5664dc1d1111 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_view_weeks.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L33">
                      rb35aa</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Calendar_view_weeks.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L33">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>33</th><th>33</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected function ProcessEvents(&amp;$Data, $Categories)</span> </td>
                  </tr><tr>
                          <th>34</th><th>34</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>35</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrences = $Data-&gt;Get<del></del>Occurrences();</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>35</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrences = $Data-&gt;Get<ins>Calendar</ins>Occurrences();</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>36</th><th>36</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $events = $Data-&gt;GetEvents();</span> </td>
                  </tr><tr>
                          <th>37</th><th>37</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file16">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to system/application/libraries/Date_uri.php" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/system/application/libraries/Date_uri.php">system/application/libraries/Date_uri.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision e2dcfedd5bc575250a5be2174374af48d5587b17">
                    <a title="Show revision e2dcfedd5bc575250a5be2174374af48d5587b17 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Date_uri.php?rev=e2dcfedd5bc575250a5be2174374af48d5587b17#L170">
                      re2dcf</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Date_uri.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L170">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>170</th><th>170</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (TRUE) {</span> </td>
                  </tr><tr>
                          <th>171</th><th>171</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Echo the regular expression</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>172</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo '<del>Debug output (not html formatted, see source):'."\n\n"</del>;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>172</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo '<ins>&lt;h2&gt;Debug output&lt;h2&gt;&lt;pre&gt;'</ins>;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>173</th><th>173</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo '&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($AllowRange) {'."\n";</span> </td>
                  </tr><tr>
                          <th>174</th><th>174</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo '&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return \''.$multiple_regex."';\n";</span> </td>
                  </tr><tr>
                          <th>175</th><th>175</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo '&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {'."\n";</span> </td>
                  </tr><tr>
                          <th>176</th><th>176</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo '&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return \''.$single_regex."';\n";</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>177</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo '&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }'."\n<del>\n</del>";</span> </td>
                      </tr><tr>
                        <th>178</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo '<del>End of Debug output'."\n\n"</del>;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>177</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo '&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }'."\n<ins></ins>";</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>178</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo '<ins>&lt;/pre&gt;&lt;h2&gt;End of Debug output&lt;/h2&gt;'</ins>;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>179</th><th>179</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>180</th><th>180</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file17">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to system/application/libraries/Messages.php" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/system/application/libraries/Messages.php">system/application/libraries/Messages.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision cd4013164e769b5c6358067b209c9c1c22def907">
                    <a title="Show revision cd4013164e769b5c6358067b209c9c1c22def907 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Messages.php?rev=cd4013164e769b5c6358067b209c9c1c22def907#L10">
                      rcd401</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Messages.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L10">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>10</th><th>10</th><td class="l"><span>$CI = &amp;get_instance();</span> </td>
                  </tr><tr>
                          <th>11</th><th>11</th><td class="l"><span>$CI-&gt;load-&gt;library('frames');</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>12</th><th> </th><td class="l"><del>$CI-&gt;load-&gt;helper('text');</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>13</th><th>12</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>14</th><th>13</th><td class="l"><span>/// Message class.</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Messages.php?rev=cd4013164e769b5c6358067b209c9c1c22def907#L96">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Messages.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L95">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>96</th><th>95</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>97</th><th>96</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>97</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// Add multiple messages to the queue.</ins> </td>
                  </tr><tr>
                          <th> </th><th>98</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /**</ins> </td>
                  </tr><tr>
                          <th> </th><th>99</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Messages array[array($message[, $type, [$persistent]])] Messages.</ins> </td>
                  </tr><tr>
                          <th> </th><th>100</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $DefaultType string</ins> </td>
                  </tr><tr>
                          <th> </th><th>101</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $DefaultPersistence bool</ins> </td>
                  </tr><tr>
                          <th> </th><th>102</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</ins> </td>
                  </tr><tr>
                          <th> </th><th>103</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function AddMessages($Messages, $DefaultType = 'information', $DefaultPersistence = TRUE)</ins> </td>
                  </tr><tr>
                          <th> </th><th>104</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr>
                          <th> </th><th>105</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($Messages as $message) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>106</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!is_array($message)) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>107</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $message = array($message);</ins> </td>
                  </tr><tr>
                          <th> </th><th>108</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>109</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $args = count($messages);</ins> </td>
                  </tr><tr>
                          <th> </th><th>110</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($args === 1) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>111</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;AddMessage($DefaultType, $message[0], $DefaultPersistence);</ins> </td>
                  </tr><tr>
                          <th> </th><th>112</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif ($args === 2) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>113</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;AddMessage($message[1], $message[0], $DefaultPersistence);</ins> </td>
                  </tr><tr>
                          <th> </th><th>114</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif ($args &gt; 2) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>115</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;AddMessage($message[1], $message[0], $message[2]);</ins> </td>
                  </tr><tr>
                          <th> </th><th>116</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>117</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>118</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>119</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>98</th><th>120</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Add a variable dump in a message to the queue.</span> </td>
                  </tr><tr>
                          <th>99</th><th>121</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Messages.php?rev=cd4013164e769b5c6358067b209c9c1c22def907#L105">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Messages.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L127">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>105</th><th>127</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $CI = &amp;get_instance();</span> </td>
                  </tr><tr>
                          <th>106</th><th>128</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;AddMessage('information', '&lt;h4&gt;Variable: ' . $Name . ' in '.$CI-&gt;uri-&gt;uri_string().'&lt;/h4&gt;'.</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>107</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '&lt;pre&gt;'.<del>ascii_to_entities(var_export($Variable,true)</del>).'&lt;/pre&gt;');</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>129</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '&lt;pre&gt;'.<ins>var_export($Variable,true</ins>).'&lt;/pre&gt;');</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>108</th><th>130</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>109</th><th>131</th><td class="l"><span></span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file18">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to system/application/models/calendar/events_model.php" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/system/application/models/calendar/events_model.php">system/application/models/calendar/events_model.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision b35aae36ff4a5f71e6ae0f58522e5664dc1d1111">
                    <a title="Show revision b35aae36ff4a5f71e6ae0f58522e5664dc1d1111 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L27">
                      rb35aa</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L27">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>27</th><th>27</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $EntityId = $this-&gt;mEntityId;</span> </td>
                  </tr><tr>
                          <th>28</th><th>28</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>29</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return&nbsp; '(&nbsp; &nbsp; &nbsp; event_entities.event_entity_entity_id = ' . $EntityId . '</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>29</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return&nbsp; '(events.event_organizer_entity_id = ' . $EntityId . ' OR</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>30</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (&nbsp; &nbsp; &nbsp; &nbsp;event_entities.event_entity_entity_id = ' . $EntityId . '</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>30</th><th>31</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AND&nbsp; &nbsp; &nbsp;event_entities.event_entity_confirmed = 1</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>31</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AND&nbsp; &nbsp; &nbsp;event_entities.event_entity_relationship = \'own\')<del></del>';</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>32</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AND&nbsp; &nbsp; &nbsp;event_entities.event_entity_relationship = \'own\')<ins>)</ins>';</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>32</th><th>33</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>33</th><th>34</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L45">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L46">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>45</th><th>46</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function ExpressionVisibilityRsvp()</span> </td>
                  </tr><tr>
                          <th>46</th><th>47</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>47</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return&nbsp; 'event_occurrence_users.event_occurrence_user_<del>state=\'rsvp\'</del>';</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>48</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return&nbsp; 'event_occurrence_users.event_occurrence_user_<ins>attending=TRUE</ins>';</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>48</th><th>49</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>49</th><th>50</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L51">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L52">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>51</th><th>52</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function ExpressionVisibilityHidden()</span> </td>
                  </tr><tr>
                          <th>52</th><th>53</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>53</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return&nbsp; 'event_occurrence_users.event_occurrence_user_<del>state=\'hide\'</del>';</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>54</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return&nbsp; 'event_occurrence_users.event_occurrence_user_<ins>attending=FALSE</ins>';</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>54</th><th>55</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>55</th><th>56</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L57">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L58">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>57</th><th>58</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function ExpressionVisibilityNormal()</span> </td>
                  </tr><tr>
                          <th>58</th><th>59</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>59</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return&nbsp; '(&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_users.event_occurrence_user_state=\'show\'</span> </td>
                      </tr><tr>
                        <th>60</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; OR&nbsp; &nbsp; &nbsp; event_occurrence_users.event_occurrence_user_state IS NULL)';</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>60</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return&nbsp; 'event_occurrence_users.event_occurrence_user_attending IS NULL';</span> </td>
                      </tr><tr>
                        <th> </th><th>61</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>62</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>63</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Produce an SQL expression for whether an occurrence should be on a users calendar.</span> </td>
                      </tr><tr>
                        <th> </th><th>64</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function ExpressionShowOnCalendar()</span> </td>
                      </tr><tr>
                        <th> </th><th>65</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>66</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return 'event_occurrences.event_occurrence_end_time IS NOT NULL '.</span> </td>
                      </tr><tr>
                        <th> </th><th>67</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'AND (&nbsp; event_occurrence_users.event_occurrence_user_attending IS NULL'.</span> </td>
                      </tr><tr>
                        <th> </th><th>68</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '&nbsp; &nbsp; &nbsp; &nbsp;OR&nbsp; &nbsp; &nbsp; event_occurrence_users.event_occurrence_user_attending = TRUE)';</span> </td>
                      </tr><tr>
                        <th> </th><th>69</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>70</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>71</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Produce an SQL expression for whether an occurrence should be on a users todo list.</span> </td>
                      </tr><tr>
                        <th> </th><th>72</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function ExpressionShowOnTodo()</span> </td>
                      </tr><tr>
                        <th> </th><th>73</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>74</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return 'event_occurrence_users.event_occurrence_user_todo = TRUE '.</span> </td>
                      </tr><tr>
                        <th> </th><th>75</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'OR (&nbsp; &nbsp;event_occurrence_users.event_occurrence_user_todo IS NULL'.</span> </td>
                      </tr><tr>
                        <th> </th><th>76</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '&nbsp; &nbsp; &nbsp; &nbsp;AND&nbsp; &nbsp; &nbsp;events.event_todo)';</span> </td>
                      </tr><tr>
                        <th> </th><th>77</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>78</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>79</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Produce an SQL expression for the effective todo start time.</span> </td>
                      </tr><tr>
                        <th> </th><th>80</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function ExpressionTodoStart()</span> </td>
                      </tr><tr>
                        <th> </th><th>81</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>82</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return 'IF(event_occurrence_users.event_occurrence_user_todo = TRUE '.</span> </td>
                      </tr><tr>
                        <th> </th><th>83</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '&nbsp; &nbsp; &nbsp; &nbsp;AND events.event_todo = FALSE,'.</span> </td>
                      </tr><tr>
                        <th> </th><th>84</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'UNIX_TIMESTAMP(CURRENT_TIMESTAMP),'.</span> </td>
                      </tr><tr>
                        <th> </th><th>85</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'UNIX_TIMESTAMP(event_occurrences.event_occurrence_start_time))';</span> </td>
                      </tr><tr>
                        <th> </th><th>86</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>87</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>88</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Produce an SQL expression for the effective todo end time.</span> </td>
                      </tr><tr>
                        <th> </th><th>89</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function ExpressionTodoEnd()</span> </td>
                      </tr><tr>
                        <th> </th><th>90</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>91</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return 'IF(event_occurrence_users.event_occurrence_user_todo = TRUE '.</span> </td>
                      </tr><tr>
                        <th> </th><th>92</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '&nbsp; &nbsp; &nbsp; &nbsp;AND events.event_todo = FALSE,'.</span> </td>
                      </tr><tr>
                        <th> </th><th>93</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'UNIX_TIMESTAMP(event_occurrences.event_occurrence_start_time),'.</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>94</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'UNIX_TIMESTAMP(event_occurrences.event_occurrence_end_time))';</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>61</th><th>95</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>62</th><th>96</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L65">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L99">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>65</th><th>99</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr><tr>
                          <th>66</th><th>100</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('is_array($Range)');</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>67</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('is_int($Range[0]) || <del>FALSE</del> === $Range[0]');</span> </td>
                      </tr><tr>
                        <th>68</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('is_int($Range[1]) || <del>FALSE</del> === $Range[1]');</span> </td>
                      </tr><tr>
                        <th>69</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <del></del></span> </td>
                      </tr><tr>
                        <th>70</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $conditions = array(<del></del>);</span> </td>
                      </tr><tr>
                        <th>71</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (<del>FALSE</del> !== $Range[0]) {</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>101</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('is_int($Range[0]) || <ins>NULL</ins> === $Range[0]');</span> </td>
                      </tr><tr>
                        <th> </th><th>102</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('is_int($Range[1]) || <ins>NULL</ins> === $Range[1]');</span> </td>
                      </tr><tr>
                        <th> </th><th>103</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ins></ins></span> </td>
                      </tr><tr>
                        <th> </th><th>104</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $conditions = array(<ins>$this-&gt;ExpressionShowOnCalendar()</ins>);</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>105</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (<ins>NULL</ins> !== $Range[0]) {</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>72</th><th>106</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $conditions[] = 'event_occurrences.event_occurrence_end_time &gt;</span> </td>
                  </tr><tr>
                          <th>73</th><th>107</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FROM_UNIXTIME('.$Range[0].')';</span> </td>
                  </tr><tr>
                          <th>74</th><th>108</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>75</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (<del>FALSE</del> !== $Range[1]) {</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>109</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (<ins>NULL</ins> !== $Range[1]) {</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>76</th><th>110</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $conditions[] = 'event_occurrences.event_occurrence_start_time &lt;</span> </td>
                  </tr><tr>
                          <th>77</th><th>111</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FROM_UNIXTIME('.$Range[1].')';</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>112</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>113</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (empty($conditions)) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>114</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return 'TRUE';</ins> </td>
                  </tr><tr>
                          <th> </th><th>115</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</ins> </td>
                  </tr><tr>
                          <th> </th><th>116</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return '('.implode(' AND ',$conditions).')';</ins> </td>
                  </tr><tr>
                          <th> </th><th>117</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>118</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>119</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>120</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// Produce an SQL expression for all and only todos in a range of time.</ins> </td>
                  </tr><tr>
                          <th> </th><th>121</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function ExpressionTodoRange($Range)</ins> </td>
                  </tr><tr>
                          <th> </th><th>122</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr>
                          <th> </th><th>123</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('is_array($Range)');</ins> </td>
                  </tr><tr>
                          <th> </th><th>124</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('is_int($Range[0]) || NULL === $Range[0]');</ins> </td>
                  </tr><tr>
                          <th> </th><th>125</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('is_int($Range[1]) || NULL === $Range[1]');</ins> </td>
                  </tr><tr>
                          <th> </th><th>126</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>127</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $conditions = array($this-&gt;ExpressionShowOnTodo());</ins> </td>
                  </tr><tr>
                          <th> </th><th>128</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL !== $Range[0]) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>129</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $conditions[] = '(&nbsp; &nbsp; &nbsp; event_occurrence_users.event_occurrence_user_progress IS NULL '.</ins> </td>
                  </tr><tr>
                          <th> </th><th>130</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'OR&nbsp; &nbsp; &nbsp;event_occurrence_users.event_occurrence_user_progress &lt; 100 '.</ins> </td>
                  </tr><tr>
                          <th> </th><th>131</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'OR&nbsp; &nbsp; &nbsp;DATE_ADD(event_occurrence_users.event_occurrence_user_timestamp, INTERVAL 1 WEEK) &gt; FROM_UNIXTIME('.$Range[0].'))';</ins> </td>
                  </tr><tr>
                          <th> </th><th>132</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>133</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL !== $Range[1]) {</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>134</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $conditions[] = 'FROM_UNIXTIME('.$Range[1].') &gt; '.$this-&gt;ExpressionTodoStart();</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>78</th><th>135</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>79</th><th>136</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (empty($conditions)) {</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L180">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L237">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>180</th><th>237</th><td class="l"><span>{</span> </td>
                  </tr><tr>
                          <th>181</th><th>238</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array[bool] For enabling/disabling sources of events.</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>182</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mSources;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>239</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mSources = array(</span> </td>
                      </tr><tr>
                        <th> </th><th>240</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'owned'&nbsp; &nbsp; &nbsp; =&gt; TRUE,</span> </td>
                      </tr><tr>
                        <th> </th><th>241</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'subscribed' =&gt; TRUE,</span> </td>
                      </tr><tr>
                        <th> </th><th>242</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'inclusions' =&gt; FALSE,</span> </td>
                      </tr><tr>
                        <th> </th><th>243</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'all'&nbsp; &nbsp; &nbsp; &nbsp; =&gt; FALSE,</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>244</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>183</th><th>245</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>184</th><th>246</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array[bool] For filtering sources of events.</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>185</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mFilters;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>247</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mFilters = array(</span> </td>
                      </tr><tr>
                        <th> </th><th>248</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'private'&nbsp; &nbsp; =&gt; TRUE,</span> </td>
                      </tr><tr>
                        <th> </th><th>249</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'active'&nbsp; &nbsp; &nbsp;=&gt; TRUE,</span> </td>
                      </tr><tr>
                        <th> </th><th>250</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'inactive'&nbsp; &nbsp;=&gt; TRUE,</span> </td>
                      </tr><tr>
                        <th> </th><th>251</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>252</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'hide'&nbsp; &nbsp; &nbsp; &nbsp;=&gt; FALSE,</span> </td>
                      </tr><tr>
                        <th> </th><th>253</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'show'&nbsp; &nbsp; &nbsp; &nbsp;=&gt; TRUE,</span> </td>
                      </tr><tr>
                        <th> </th><th>254</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'rsvp'&nbsp; &nbsp; &nbsp; &nbsp;=&gt; TRUE,</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>255</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>186</th><th>256</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>187</th><th>257</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array[feed] For including additional sources.</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>188</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mInclusions<del></del>;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>258</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mInclusions<ins>&nbsp;= array()</ins>;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>189</th><th>259</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>190</th><th>260</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array[2*timestamp] For filtering by time.</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>191</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mRange;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>261</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mRange = array( NULL, NULL );</span> </td>
                      </tr><tr>
                        <th> </th><th>262</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>263</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array[string=&gt;bool] Whether each type of event is enabled (require different range methods).</span> </td>
                      </tr><tr>
                        <th> </th><th>264</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mFlags = array(</span> </td>
                      </tr><tr>
                        <th> </th><th>265</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event' =&gt; TRUE,</span> </td>
                      </tr><tr>
                        <th> </th><th>266</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'todo' =&gt; FALSE</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>267</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>192</th><th>268</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>193</th><th>269</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// string Special mysql condition.</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>194</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mSpecialCondition;</span> </td>
                      </tr><tr>
                        <th>195</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>196</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Default constructor</span> </td>
                      </tr><tr>
                        <th>197</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function __construct()</span> </td>
                      </tr><tr>
                        <th>198</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>199</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; parent::__construct();</span> </td>
                      </tr><tr>
                        <th>200</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>201</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Initialise sources + filters</span> </td>
                      </tr><tr>
                        <th>202</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mSources = array(</span> </td>
                      </tr><tr>
                        <th>203</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'owned'&nbsp; &nbsp; &nbsp; =&gt; TRUE,</span> </td>
                      </tr><tr>
                        <th>204</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'subscribed' =&gt; TRUE,</span> </td>
                      </tr><tr>
                        <th>205</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'inclusions' =&gt; FALSE,</span> </td>
                      </tr><tr>
                        <th>206</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'all'&nbsp; &nbsp; &nbsp; &nbsp; =&gt; FALSE,</span> </td>
                      </tr><tr>
                        <th>207</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th>208</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mFilters = array(</span> </td>
                      </tr><tr>
                        <th>209</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'private'&nbsp; &nbsp; =&gt; TRUE,</span> </td>
                      </tr><tr>
                        <th>210</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'active'&nbsp; &nbsp; &nbsp;=&gt; TRUE,</span> </td>
                      </tr><tr>
                        <th>211</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'inactive'&nbsp; &nbsp;=&gt; TRUE,</span> </td>
                      </tr><tr>
                        <th>212</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>213</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'hide'&nbsp; &nbsp; &nbsp; &nbsp;=&gt; FALSE,</span> </td>
                      </tr><tr>
                        <th>214</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'show'&nbsp; &nbsp; &nbsp; &nbsp;=&gt; TRUE,</span> </td>
                      </tr><tr>
                        <th>215</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'rsvp'&nbsp; &nbsp; &nbsp; &nbsp;=&gt; TRUE,</span> </td>
                      </tr><tr>
                        <th>216</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th>217</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>218</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mInclusions = array();</span> </td>
                      </tr><tr>
                        <th>219</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>220</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mRange = array( FALSE, FALSE );</span> </td>
                      </tr><tr>
                        <th>221</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>222</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mSpecialCondition = FALSE;</span> </td>
                      </tr><tr>
                        <th>223</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>270</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mSpecialCondition = FALSE;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>224</th><th>271</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>225</th><th>272</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Retrieve specified fields of event occurrences.</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L302">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L349">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>302</th><th>349</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>303</th><th>350</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>304</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;mSources['inclusions'] &amp;&amp; count($this-&gt;mInclusions) &gt; 0)</span> </td>
                      </tr><tr>
                        <th>305</th><th> </th><td class="l"><span>{</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>351</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;mSources['inclusions'] &amp;&amp; count($this-&gt;mInclusions) &gt; 0) {</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>306</th><th>352</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $includes = array();</span> </td>
                  </tr><tr>
                          <th>307</th><th>353</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($this-&gt;mInclusions as $inclusion) {</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L359">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L405">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>359</th><th>405</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>360</th><th>406</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // DATE RANGE ----------------------------------------------------------</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>361</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>362</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $date_range = $this-&gt;ExpressionDateRange($this-&gt;mRange);</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>407</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ranges = array();</span> </td>
                      </tr><tr>
                        <th> </th><th>408</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;mFlags['event']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>409</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ranges[] = $this-&gt;ExpressionDateRange($this-&gt;mRange);</span> </td>
                      </tr><tr>
                        <th> </th><th>410</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>411</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;mFlags['todo']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>412</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ranges[] = $this-&gt;ExpressionTodoRange($this-&gt;mRange);</span> </td>
                      </tr><tr>
                        <th> </th><th>413</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>414</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>363</th><th>415</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>364</th><th>416</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // SPECIAL CONDITION ---------------------------------------------------</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>365</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>366</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $conditions = array($date_range,$sources,$filters);</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>417</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $conditions = array('('.implode(' OR ',$ranges).')', $sources, $filters);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>367</th><th>418</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>368</th><th>419</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (FALSE !== $this-&gt;mSpecialCondition) {</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L491">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L542">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>491</th><th>542</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr><tr>
                          <th>492</th><th>543</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mSpecialCondition = $Condition;</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>544</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>545</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>546</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// Enable/disable something.</ins> </td>
                  </tr><tr>
                          <th> </th><th>547</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function SetFlag($FlagName, $Value)</ins> </td>
                  </tr><tr>
                          <th> </th><th>548</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>549</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mFlags[$FlagName] = $Value;</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>493</th><th>550</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>494</th><th>551</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L755">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L812">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>755</th><th>812</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AND&nbsp; &nbsp; &nbsp;subscriptions.subscription_organisation_entity_id</span> </td>
                  </tr><tr>
                          <th>756</th><th>813</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = ' . $this-&gt;GetActiveEntityId() . '</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>757</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WHERE&nbsp; &nbsp;event_occurrence_users.event_occurrence_user_<del>state = \'rsvp\'</del>';</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>814</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WHERE&nbsp; &nbsp;event_occurrence_users.event_occurrence_user_<ins>attending = TRUE</ins>';</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>758</th><th>815</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bind_data = array($EventId, $EventId);</span> </td>
                  </tr><tr>
                          <th>759</th><th>816</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L804">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L861">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>804</th><th>861</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ON locations.location_id</span> </td>
                  </tr><tr>
                          <th>805</th><th>862</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = event_occurrences.event_occurrence_location_id</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>806</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WHERE&nbsp; &nbsp;event_occurrence_users.event_occurrence_user_<del>state = \'rsvp\'</del>';</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>863</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WHERE&nbsp; &nbsp;event_occurrence_users.event_occurrence_user_<ins>attending = TRUE</ins>';</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>807</th><th>864</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>808</th><th>865</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $query = $this-&gt;db-&gt;query($sql);</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L893">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L950">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>893</th><th>950</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>894</th><th>951</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>952</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// Get a list of available event categories.</ins> </td>
                  </tr><tr>
                          <th> </th><th>953</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /**</ins> </td>
                  </tr><tr>
                          <th> </th><th>954</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array[array('id' =&gt;, 'name' =&gt;, 'colour' =&gt;)]</ins> </td>
                  </tr><tr>
                          <th> </th><th>955</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</ins> </td>
                  </tr><tr>
                          <th> </th><th>956</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function CategoriesGet()</ins> </td>
                  </tr><tr>
                          <th> </th><th>957</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr>
                          <th> </th><th>958</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;db-&gt;select(</ins> </td>
                  </tr><tr>
                          <th> </th><th>959</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_type_id&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AS id,'.</ins> </td>
                  </tr><tr>
                          <th> </th><th>960</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_type_name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AS name,'.</ins> </td>
                  </tr><tr>
                          <th> </th><th>961</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_type_colour_hex&nbsp; AS colour'</ins> </td>
                  </tr><tr>
                          <th> </th><th>962</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</ins> </td>
                  </tr><tr>
                          <th> </th><th>963</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $category_query = $this-&gt;db-&gt;Get('event_types');</ins> </td>
                  </tr><tr>
                          <th> </th><th>964</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $categories = array();</ins> </td>
                  </tr><tr>
                          <th> </th><th>965</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($category_query-&gt;result_array() as $category) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>966</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $categories[(int)$category['id']] = $category;</ins> </td>
                  </tr><tr>
                          <th> </th><th>967</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>968</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $categories;</ins> </td>
                  </tr><tr>
                          <th> </th><th>969</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>970</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>895</th><th>971</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>896</th><th>972</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Get an existing event.</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L910">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L986">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>910</th><th>986</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function EventsGet($Fields, $EventId = FALSE, $RecurrenceRule = FALSE, $Filter = '', $FilterBind = array())</span> </td>
                  </tr><tr>
                          <th>911</th><th>987</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>988</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @todo Tweak to get recurrence rules with new system</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>989</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert(FALSE);</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>912</th><th>990</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($RecurrenceRule) {</span> </td>
                  </tr><tr>
                          <th>913</th><th>991</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $Fields[] = $this-&gt;recurrence_model-&gt;SqlSelectRecurrenceRule();</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L972">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1050">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>972</th><th>1050</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>973</th><th>1051</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>1052</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /// Generate a unique identifier for an event.</ins> </td>
                  </tr><tr>
                          <th> </th><th>1053</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function GenerateEventUid($EventTime)</ins> </td>
                  </tr><tr>
                          <th> </th><th>1054</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; {</ins> </td>
                  </tr><tr>
                          <th> </th><th>1055</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $now = time();</ins> </td>
                  </tr><tr>
                          <th> </th><th>1056</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $nowtime = gmdate('Ymd',$now).'T'.gmdate('His',$now).'Z';</ins> </td>
                  </tr><tr>
                          <th> </th><th>1057</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $eventtime = gmdate('Ymd',$EventTime).'T'.gmdate('His',$EventTime).'Z';</ins> </td>
                  </tr><tr>
                          <th> </th><th>1058</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>1059</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $result = $nowtime.'-'.sha1($eventtime.'YORKER'.mt_rand().$_SERVER['SERVER_ADDR'].session_id());</ins> </td>
                  </tr><tr>
                          <th> </th><th>1060</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $result .= '@theyorker.co.uk';</ins> </td>
                  </tr><tr>
                          <th> </th><th>1061</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $result;</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>1062</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>974</th><th>1063</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>975</th><th>1064</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Create a new event.</span> </td>
                  </tr><tr>
                          <th>976</th><th>1065</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>977</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $EventData array Event data.</span> </td>
                      </tr><tr>
                        <th>978</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array(</span> </td>
                      </tr><tr>
                        <th>979</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; 'event_id' =&gt; new event id,</span> </td>
                      </tr><tr>
                        <th>980</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; 'occurrences' =&gt; occurrences added)</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1066</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $EventData array Event data. The following are compulsory:</span> </td>
                      </tr><tr>
                        <th> </th><th>1067</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 'recur' RecurrenceSet Recurrences.</span> </td>
                      </tr><tr>
                        <th> </th><th>1068</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array</span> </td>
                      </tr><tr>
                        <th> </th><th>1069</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 'event_id' =&gt; new event id,</span> </td>
                      </tr><tr>
                        <th> </th><th>1070</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 'occurrences' array['YYYYMMDD' =&gt; array['HHMMSS' =&gt; array]] recur property overrides.</span> </td>
                      </tr><tr>
                        <th> </th><th>1071</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Fields are:</span> </td>
                      </tr><tr>
                        <th> </th><th>1072</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'location_id'</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1073</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'location_name'</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>981</th><th>1074</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @exception Exception The event could not be created.</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>1075</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</ins> </td>
                  </tr><tr>
                          <th> </th><th>1076</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Uses @a $EventData to create a new event.</ins> </td>
                  </tr><tr>
                          <th> </th><th>1077</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Uses @a $EventData['recur'] to generate occurrences.</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>1078</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Uses @a $EventData['occurrences'] to set occurrence specific properties.</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>982</th><th>1079</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                  </tr><tr>
                          <th>983</th><th>1080</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function EventCreate($EventData)</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L986">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1083">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>986</th><th>1083</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new Exception(self::$cReadOnlyMessage);</span> </td>
                  </tr><tr>
                          <th>987</th><th>1084</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>1085</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // if the recurrence rule isn't set set it and force it to be a todo</ins> </td>
                  </tr><tr>
                          <th> </th><th>1086</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!array_key_exists('recur', $EventData)) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>1087</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $EventData['recur'] = new RecurrenceSet();</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>1088</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>988</th><th>1089</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; static $translation = array(</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>989</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'name'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; 'events.event_name',</span> </td>
                      </tr><tr>
                        <th>990</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'description'&nbsp; &nbsp;=&gt; 'events.event_description',</span> </td>
                      </tr><tr>
                        <th>991</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'parent'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; 'events.event_parent_id',</span> </td>
                      </tr><tr>
                        <th>992</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'recurrence_rule_id'&nbsp; &nbsp; =&gt; 'events.event_recurrence_rule_id',</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1090</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'name'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; 'event_name',</span> </td>
                      </tr><tr>
                        <th> </th><th>1091</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'description'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'event_description',</span> </td>
                      </tr><tr>
                        <th> </th><th>1092</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre $EventData['category'] is valid</span> </td>
                      </tr><tr>
                        <th> </th><th>1093</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'category'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; 'event_type_id',</span> </td>
                      </tr><tr>
                        <th> </th><th>1094</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'parent'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; 'event_parent_id',</span> </td>
                      </tr><tr>
                        <th> </th><th>1095</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'time_associated'&nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'event_time_associated',</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1096</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'todo'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; 'event_todo',</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>993</th><th>1097</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>994</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $fields = array();</span> </td>
                      </tr><tr>
                        <th>995</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bind_data = array();</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1098</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; list($start, $end) = $EventData['recur']-&gt;GetStartEnd();</span> </td>
                      </tr><tr>
                        <th> </th><th>1099</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $start) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1100</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start = time();</span> </td>
                      </tr><tr>
                        <th> </th><th>1101</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $EventData['recur']-&gt;SetStartEnd($start, $end);</span> </td>
                      </tr><tr>
                        <th> </th><th>1102</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1103</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre Start must be a timestamp</span> </td>
                      </tr><tr>
                        <th> </th><th>1104</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('is_int($start)');</span> </td>
                      </tr><tr>
                        <th> </th><th>1105</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre End must be a timestamp or NULL</span> </td>
                      </tr><tr>
                        <th> </th><th>1106</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('is_int($end) || NULL === $end');</span> </td>
                      </tr><tr>
                        <th> </th><th>1107</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $end) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1108</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $EventData['todo'] = TRUE;</span> </td>
                      </tr><tr>
                        <th> </th><th>1109</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1110</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1111</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $fields = array(</span> </td>
                      </tr><tr>
                        <th> </th><th>1112</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_organizer_entity_id = '.$this-&gt;GetActiveEntityId(),</span> </td>
                      </tr><tr>
                        <th> </th><th>1113</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_uid = "'.$this-&gt;GenerateEventUid($start).'"',</span> </td>
                      </tr><tr>
                        <th> </th><th>1114</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th> </th><th>1115</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $fields[] = 'event_start = FROM_UNIXTIME('.$start.')';</span> </td>
                      </tr><tr>
                        <th> </th><th>1116</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_int($end)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1117</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $fields[] = 'event_end = FROM_UNIXTIME('.$end.')';</span> </td>
                      </tr><tr>
                        <th> </th><th>1118</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>1119</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $fields[] = 'event_end = NULL';</span> </td>
                      </tr><tr>
                        <th> </th><th>1120</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1121</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>996</th><th>1122</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($translation as $input_name =&gt; $field_name) {</span> </td>
                  </tr><tr>
                          <th>997</th><th>1123</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (array_key_exists($input_name, $EventData)) {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>998</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $fields[] = $field_name.'=?';</span> </td>
                      </tr><tr>
                        <th>999</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bind_data[] = $EventData[$input_name];</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1124</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $fields[] = $field_name.'='.$this-&gt;db-&gt;escape($EventData[$input_name]);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1000</th><th>1125</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>1001</th><th>1126</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>1002</th><th>1127</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>1128</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Range to generate occurrences within</ins> </td>
                  </tr><tr>
                          <th> </th><th>1129</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $generate_min = max($start, strtotime('-1month'));</ins> </td>
                  </tr><tr>
                          <th> </th><th>1130</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $generate_until = strtotime('2year');</ins> </td>
                  </tr><tr>
                          <th> </th><th>1131</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>1132</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Generate</ins> </td>
                  </tr><tr>
                          <th> </th><th>1133</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recurrence_set = $EventData['recur']-&gt;Resolve($generate_min, $generate_until);</ins> </td>
                  </tr><tr>
                          <th> </th><th>1134</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>1135</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Now go through, making a list</ins> </td>
                  </tr><tr>
                          <th> </th><th>1136</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrences = array();</ins> </td>
                  </tr><tr>
                          <th> </th><th>1137</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($recurrence_set as $date =&gt; $times) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>1138</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($times as $time =&gt; $duration) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>1139</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence = array();</ins> </td>
                  </tr><tr>
                          <th> </th><th>1140</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $time) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>1141</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence['start'] = strtotime($date);</ins> </td>
                  </tr><tr>
                          <th> </th><th>1142</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</ins> </td>
                  </tr><tr>
                          <th> </th><th>1143</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence['start'] = strtotime($date.' '.$time);</ins> </td>
                  </tr><tr>
                          <th> </th><th>1144</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>1145</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Handle unending todo</ins> </td>
                  </tr><tr>
                          <th> </th><th>1146</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $duration) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>1147</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence['end'] = NULL;</ins> </td>
                  </tr><tr>
                          <th> </th><th>1148</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</ins> </td>
                  </tr><tr>
                          <th> </th><th>1149</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence['end'] = $occurrence['start'] + $duration;</ins> </td>
                  </tr><tr>
                          <th> </th><th>1150</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>1151</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (array_key_exists('time_associated', $EventData)) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>1152</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence['time_associated'] = $EventData['time_associated'];</ins> </td>
                  </tr><tr>
                          <th> </th><th>1153</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>1154</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence['state'] = 'draft';</ins> </td>
                  </tr><tr>
                          <th> </th><th>1155</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrences[] = $occurrence;</ins> </td>
                  </tr><tr>
                          <th> </th><th>1156</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>1157</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>1158</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>1159</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $fields[] = 'event_recurrence_updated_until = FROM_UNIXTIME('.$generate_until.')';</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>1160</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1003</th><th>1161</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // create new event</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1004</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql<del>&nbsp;= 'INSERT INTO events SET '.implode(',',</del>$fields);</span> </td>
                      </tr><tr>
                        <th>1005</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $<del>query = $this-&gt;db-&gt;query($sql, $bind_data</del>);</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1162</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql<ins>_insert = 'INSERT INTO events SET '.implode(',', </ins>$fields);</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1163</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $<ins>this-&gt;db-&gt;query($sql_insert</ins>);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1006</th><th>1164</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $affected_rows = $this-&gt;db-&gt;affected_rows();</span> </td>
                  </tr><tr>
                          <th>1007</th><th>1165</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($affected_rows == 0) {</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L1010">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1168">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1010</th><th>1168</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $event_id = $this-&gt;db-&gt;insert_id();</span> </td>
                  </tr><tr>
                          <th>1011</th><th>1169</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1012</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // link event to creater</span> </td>
                      </tr><tr>
                        <th>1013</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql = 'INSERT INTO event_entities (</span> </td>
                      </tr><tr>
                        <th>1014</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_entity_entity_id,</span> </td>
                      </tr><tr>
                        <th>1015</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_entity_event_id,</span> </td>
                      </tr><tr>
                        <th>1016</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_entity_relationship,</span> </td>
                      </tr><tr>
                        <th>1017</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_entity_confirmed)</span> </td>
                      </tr><tr>
                        <th>1018</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; VALUES';</span> </td>
                      </tr><tr>
                        <th>1019</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql .= ' ('.$this-&gt;GetActiveEntityId().','.$event_id.',\'own\',1)';</span> </td>
                      </tr><tr>
                        <th>1020</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $query = $this-&gt;db-&gt;query($sql);</span> </td>
                      </tr><tr>
                        <th>1021</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $affected_rows = $this-&gt;db-&gt;affected_rows();</span> </td>
                      </tr><tr>
                        <th>1022</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($affected_rows == 0) {</span> </td>
                      </tr><tr>
                        <th>1023</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Should now delete event since couldn't bind to entity</span> </td>
                      </tr><tr>
                        <th>1024</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql = 'DELETE FROM events WHERE events.event_id='.$event_id;</span> </td>
                      </tr><tr>
                        <th>1025</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $query = $this-&gt;db-&gt;query($sql);</span> </td>
                      </tr><tr>
                        <th>1026</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $affected_rows = $this-&gt;db-&gt;affected_rows();</span> </td>
                      </tr><tr>
                        <th>1027</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Throw error message</span> </td>
                      </tr><tr>
                        <th>1028</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $message = 'Event could not be created (';</span> </td>
                      </tr><tr>
                        <th>1029</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($affected_rows == 1) {</span> </td>
                      </tr><tr>
                        <th>1030</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $message .= '2-clean)';</span> </td>
                      </tr><tr>
                        <th>1031</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th>1032</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $message .= '2-unclean)';</span> </td>
                      </tr><tr>
                        <th>1033</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>1034</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new Exception($message);</span> </td>
                      </tr><tr>
                        <th>1035</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>1036</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>1037</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (array_key_exists('occurrences',$EventData)) {</span> </td>
                      </tr><tr>
                        <th>1038</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $num_occurrences = $this-&gt;OccurrencesAdd($event_id, $EventData['occurrences']);</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1170</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;recurrence_model-&gt;InsertRecurrenceSet($EventData['recur'], $event_id);</span> </td>
                      </tr><tr>
                        <th> </th><th>1171</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1172</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!empty($occurrences)) {</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1173</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $num_occurrences = $this-&gt;OccurrencesAdd($event_id, $occurrences);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1039</th><th>1174</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                  </tr><tr>
                          <th>1040</th><th>1175</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $num_occurrences = 0;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L1067">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1202">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1067</th><th>1202</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>1068</th><th>1203</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; static $translation = array(</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1069</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'name'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <del>&nbsp; &nbsp; &nbsp; &nbsp; </del>=&gt; 'events.event_name',</span> </td>
                      </tr><tr>
                        <th>1070</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'description'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<del>&nbsp; &nbsp; &nbsp; &nbsp; </del>=&gt; 'events.event_description',</span> </td>
                      </tr><tr>
                        <th>1071</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '<del>recurrence_rule_id'&nbsp; &nbsp; =&gt; 'events.event_recurrence_rule_i</del>d',</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1204</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'name'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ins></ins>=&gt; 'events.event_name',</span> </td>
                      </tr><tr>
                        <th> </th><th>1205</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'description'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<ins></ins>=&gt; 'events.event_description',</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1206</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '<ins>time_associated'&nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'events.event_time_associate</ins>d',</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1072</th><th>1207</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                  </tr><tr>
                          <th>1073</th><th>1208</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $fields = array();</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L1212">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1347">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1212</th><th>1347</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($recurrences as $when =&gt; $value) {</span> </td>
                  </tr><tr>
                          <th>1213</th><th>1348</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrence_data[] = array(</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1214</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'state'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<del></del>=&gt; 'published',</span> </td>
                      </tr><tr>
                        <th>1215</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '<del>all_day'&nbsp; &nbsp; &nbsp; &nbsp;</del>&nbsp; &nbsp; &nbsp; &nbsp; =&gt; TRUE,</span> </td>
                      </tr><tr>
                        <th>1216</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'ends_late'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<del></del>=&gt; FALSE,</span> </td>
                      </tr><tr>
                        <th>1217</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'start'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<del></del>=&gt; $when,</span> </td>
                      </tr><tr>
                        <th>1218</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'end'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<del></del>=&gt; strtotime('+1day',$when),</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1349</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'state'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins>=&gt; 'published',</span> </td>
                      </tr><tr>
                        <th> </th><th>1350</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '<ins>time_associated'</ins>&nbsp; &nbsp; &nbsp; &nbsp;=&gt; TRUE,</span> </td>
                      </tr><tr>
                        <th> </th><th>1351</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'ends_late'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins>=&gt; FALSE,</span> </td>
                      </tr><tr>
                        <th> </th><th>1352</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'start'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins>=&gt; $when,</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1353</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'end'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins>=&gt; strtotime('+1day',$when),</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1219</th><th>1354</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                  </tr><tr>
                          <th>1220</th><th>1355</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L1263">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1398">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1263</th><th>1398</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; static $translation2 = array(</span> </td>
                  </tr><tr>
                          <th>1264</th><th>1399</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'state',</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>1265</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'description',</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1266</th><th>1400</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'location',</span> </td>
                  </tr><tr>
                          <th>1267</th><th>1401</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'postcode',</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1268</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '<del>all_day</del>',</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1402</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '<ins>time_associated</ins>',</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1269</th><th>1403</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'ends_late',</span> </td>
                  </tr><tr>
                          <th>1270</th><th>1404</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                  </tr><tr>
                          <th>1271</th><th>1405</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1272</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql_owned = 'SELECT COUNT(*) FROM event_entities</span> </td>
                      </tr><tr>
                        <th>1273</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WHERE event_entities.event_entity_event_id = '.$this-&gt;db-&gt;escape($EventId).'</span> </td>
                      </tr><tr>
                        <th>1274</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AND ' . $occurrence_query-&gt;ExpressionOwned();</span> </td>
                      </tr><tr>
                        <th>1275</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $query = $this-&gt;db-&gt;query($sql_owned);</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1406</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Check owned</span> </td>
                      </tr><tr>
                        <th> </th><th>1407</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;db-&gt;select('COUNT(*)');</span> </td>
                      </tr><tr>
                        <th> </th><th>1408</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;db-&gt;from('events');</span> </td>
                      </tr><tr>
                        <th> </th><th>1409</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;db-&gt;join('event_entities','event_id = event_entity_event_id','left');</span> </td>
                      </tr><tr>
                        <th> </th><th>1410</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;db-&gt;where('event_entity_event_id', $EventId);</span> </td>
                      </tr><tr>
                        <th> </th><th>1411</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;db-&gt;where($occurrence_query-&gt;ExpressionOwned());</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1412</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $query = $this-&gt;db-&gt;get();</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1276</th><th>1413</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($query-&gt;num_rows() &gt; 0) {</span> </td>
                  </tr><tr>
                          <th>1277</th><th>1414</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L1280">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1417">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1280</th><th>1417</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_event_id,</span> </td>
                  </tr><tr>
                          <th>1281</th><th>1418</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_state,</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>1282</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_description,</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1283</th><th>1419</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_location_name,</span> </td>
                  </tr><tr>
                          <th>1284</th><th>1420</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_postcode,</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>1421</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_original_start_time,</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1285</th><th>1422</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_start_time,</span> </td>
                  </tr><tr>
                          <th>1286</th><th>1423</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_end_time,</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1287</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_<del>all_day</del>,</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1424</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_<ins>time_associated</ins>,</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1288</th><th>1425</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_ends_late)</span> </td>
                  </tr><tr>
                          <th>1289</th><th>1426</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; VALUES';</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L1318">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1455">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1318</th><th>1455</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql .= ' ('.$EventId.</span> </td>
                  </tr><tr>
                          <th>1319</th><th>1456</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ','.$values[0].&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// state</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1320</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ','.$values[1].&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// description</span> </td>
                      </tr><tr>
                        <th>1321</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ','.$values[2].&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// location</span> </td>
                      </tr><tr>
                        <th>1322</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ','.$values[3];&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// postcode</span> </td>
                      </tr><tr>
                        <th>1323</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // start time</span> </td>
                      </tr><tr>
                        <th>1324</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (array_key_exists('start', $occurrence))</span> </td>
                      </tr><tr>
                        <th>1325</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql .= ',FROM_UNIXTIME('.$occurrence['start'].')';</span> </td>
                      </tr><tr>
                        <th>1326</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1457</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ','.$values[1].&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// location</span> </td>
                      </tr><tr>
                        <th> </th><th>1458</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ','.$values[2];&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// postcode</span> </td>
                      </tr><tr>
                        <th> </th><th>1459</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // original and start time</span> </td>
                      </tr><tr>
                        <th> </th><th>1460</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (array_key_exists('start', $occurrence)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1461</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql .= str_repeat(',FROM_UNIXTIME('.$occurrence['start'].')', 2);</span> </td>
                      </tr><tr>
                        <th> </th><th>1462</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>1463</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql .= str_repeat(',DEFAULT', 2);</span> </td>
                      </tr><tr>
                        <th> </th><th>1464</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1465</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // end time</span> </td>
                      </tr><tr>
                        <th> </th><th>1466</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (array_key_exists('end', $occurrence) &amp;&amp; NULL !== $occurrence['end']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1467</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql .= ',FROM_UNIXTIME('.$occurrence['end'].')';</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1468</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1327</th><th>1469</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql .= ',DEFAULT';</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1328</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // end time</span> </td>
                      </tr><tr>
                        <th>1329</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (array_key_exists('end', $occurrence))</span> </td>
                      </tr><tr>
                        <th>1330</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql .= ',FROM_UNIXTIME('.$occurrence['end'].')';</span> </td>
                      </tr><tr>
                        <th>1331</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else</span> </td>
                      </tr><tr>
                        <th>1332</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql .= ',DEFAULT';</span> </td>
                      </tr><tr>
                        <th>1333</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>1334</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql .= ','.$values[4].&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// all_day</span> </td>
                      </tr><tr>
                        <th>1335</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ','.$values[5].')'; // ends_late</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1470</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1471</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql .= ','.$values[3].&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// time associated</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1472</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ','.$values[4].')'; // ends_late</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1336</th><th>1473</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>1337</th><th>1474</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $first = FALSE;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L1358">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1495">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1358</th><th>1495</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>1359</th><th>1496</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; static $translation = array(</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1360</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'description'&nbsp; &nbsp;=&gt; 'event_occurrences.event_occurrence_description',</span> </td>
                      </tr><tr>
                        <th>1361</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'location'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; 'event_occurrences.event_occurrence_location_name',</span> </td>
                      </tr><tr>
                        <th>1362</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'postcode'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; 'event_occurrences.event_occurrence_postcode',</span> </td>
                      </tr><tr>
                        <th>1363</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'all_day'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; 'event_occurrences.event_occurrence_all_day',</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1497</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'location'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; 'event_occurrences.event_occurrence_location_name',</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1498</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'postcode'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; 'event_occurrences.event_occurrence_postcode',</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1364</th><th>1499</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                  </tr><tr>
                          <th>1365</th><th>1500</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $result = 0;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L1423">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1558">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1423</th><th>1558</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AND ' . $occurrence_query-&gt;ExpressionOwned() . '</span> </td>
                  </tr><tr>
                          <th>1424</th><th>1559</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SET&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;event_occurrences.event_occurrence_state=?,</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1425</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrences.event_occurrence_<del>timestamp</del>=CURRENT_TIMESTAMP()</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1560</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrences.event_occurrence_<ins>last_modified</ins>=CURRENT_TIMESTAMP()</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1426</th><th>1561</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WHERE&nbsp; &nbsp;event_occurrences.event_occurrence_event_id=?';</span> </td>
                  </tr><tr>
                          <th>1427</th><th>1562</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bind_data = array($NewState, $EventId);</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L1551">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1686">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1551</th><th>1686</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FROM event_occurrences AS preactive</span> </td>
                  </tr><tr>
                          <th>1552</th><th>1687</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WHERE preactive.event_occurrence_active_occurrence_id = occurrence_id</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1553</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ORDER BY preactive.event_occurrence_<del>timestamp</del> DESC</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1688</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ORDER BY preactive.event_occurrence_<ins>last_modified</ins> DESC</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1554</th><th>1689</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LIMIT 1;</span> </td>
                  </tr><tr>
                          <th>1555</th><th>1690</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UPDATE&nbsp; event_occurrences</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L1708">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1843">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1708</th><th>1843</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_event_id,</span> </td>
                  </tr><tr>
                          <th>1709</th><th>1844</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_state,</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>1710</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_description,</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1711</th><th>1845</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_location_id,</span> </td>
                  </tr><tr>
                          <th>1712</th><th>1846</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_location_name,</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L1714">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1848">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1714</th><th>1848</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_start_time,</span> </td>
                  </tr><tr>
                          <th>1715</th><th>1849</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_end_time,</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>1716</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_all_day,</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1717</th><th>1850</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_ends_late)</span> </td>
                  </tr><tr>
                          <th>1718</th><th>1851</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SELECT</span> </td>
                  </tr><tr>
                          <th>1719</th><th>1852</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrences.event_occurrence_event_id,</span> </td>
                  </tr><tr>
                          <th>1720</th><th>1853</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \'movedraft\',</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>1721</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrences.event_occurrence_description,</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1722</th><th>1854</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrences.event_occurrence_location_id,</span> </td>
                  </tr><tr>
                          <th>1723</th><th>1855</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrences.event_occurrence_location_name,</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L1725">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1857">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1725</th><th>1857</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrences.event_occurrence_start_time,</span> </td>
                  </tr><tr>
                          <th>1726</th><th>1858</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrences.event_occurrence_end_time,</span> </td>
                  </tr>
            </tbody><tbody class="rem">
                  <tr class="last first">
                          <th>1727</th><th> </th><td class="l"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrences.event_occurrence_all_day,</del> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1728</th><th>1859</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrences.event_occurrence_ends_late</span> </td>
                  </tr><tr>
                          <th>1729</th><th>1860</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FROM event_occurrences</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L1750">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1881">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1750</th><th>1881</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrences.event_occurrence_state</span> </td>
                  </tr><tr>
                          <th>1751</th><th>1882</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = \'cancelled\',</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1752</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrences.event_occurrence_<del>timestamp</del></span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1883</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrences.event_occurrence_<ins>last_modified</ins></span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1753</th><th>1884</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = IF(event_occurrences.event_occurrence_id = ?,</span> </td>
                  </tr><tr>
                          <th>1754</th><th>1885</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CURRENT_TIMESTAMP(),</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1755</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrences.event_occurrence_<del>timestamp</del>)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1886</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrences.event_occurrence_<ins>last_modified</ins>)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1756</th><th>1887</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WHERE&nbsp; &nbsp;event_occurrences.event_occurrence_id = ?</span> </td>
                  </tr><tr>
                          <th>1757</th><th>1888</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; OR&nbsp; &nbsp; &nbsp; event_occurrences.event_occurrence_active_occurrence_id = ?';</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L1798">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1929">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1798</th><th>1929</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                  </tr><tr>
                          <th>1799</th><th>1930</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $OccurrenceId integer Id of occurrence.</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1800</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $NewState string new db state:</span> </td>
                      </tr><tr>
                        <th>1801</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 'show' (show the event normally).</span> </td>
                      </tr><tr>
                        <th>1802</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 'hide' (hide the event).</span> </td>
                      </tr><tr>
                        <th>1803</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 'rsvp' (rsvp the event).</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1931</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $NewAttending bool,NULL Whether the user is attending</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1804</th><th>1932</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return bool True on success, False on failure.</span> </td>
                  </tr><tr>
                          <th>1805</th><th>1933</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @pre Occurrence is visible to user.</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1806</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @post Occurrence is RSVP'd to user.</span> </td>
                      </tr><tr>
                        <th>1807</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>1808</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected function SetOccurrenceUserState($OccurrenceId, $NewState)</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1934</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1935</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected function SetOccurrenceUserAttending($OccurrenceId, $NewAttending)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1809</th><th>1936</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr><tr>
                          <th>1810</th><th>1937</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre GetActiveEntityId() === $sEntityUser</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L1817">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1944">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1817</th><th>1944</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_users.event_occurrence_user_user_entity_id,</span> </td>
                  </tr><tr>
                          <th>1818</th><th>1945</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_users.event_occurrence_user_event_occurrence_id,</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1819</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_users.event_occurrence_user_<del>state</del>)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1946</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_users.event_occurrence_user_<ins>attending</ins>)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1820</th><th>1947</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SELECT&nbsp; '.$this-&gt;GetActiveEntityId().', ?, ?</span> </td>
                  </tr><tr>
                          <th>1821</th><th>1948</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FROM&nbsp; &nbsp; event_occurrences</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L1823">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1950">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1823</th><th>1950</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AND&nbsp; &nbsp; &nbsp;'.$occurrence_query-&gt;ExpressionPublic().')</span> </td>
                  </tr><tr>
                          <th>1824</th><th>1951</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ON DUPLICATE KEY UPDATE</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1825</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_users.event_occurrence_user_<del>state</del> = ?';</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1952</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_occurrence_users.event_occurrence_user_<ins>attending</ins> = ?';</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1826</th><th>1953</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bind_data = array(</span> </td>
                  </tr><tr>
                          <th>1827</th><th>1954</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $OccurrenceId,</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1828</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $New<del>State</del>,</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1955</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $New<ins>Attending</ins>,</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1829</th><th>1956</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $OccurrenceId,</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1830</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $New<del>State</del>,</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1957</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $New<ins>Attending</ins>,</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1831</th><th>1958</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                  </tr><tr>
                          <th>1832</th><th>1959</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $query = $this-&gt;db-&gt;query($sql, $bind_data);</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L1844">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1971">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1844</th><th>1971</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function OccurrenceRsvp($OccurrenceId)</span> </td>
                  </tr><tr>
                          <th>1845</th><th>1972</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1846</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;SetOccurrenceUser<del>State($OccurrenceId, 'rsvp'</del>);</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1973</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;SetOccurrenceUser<ins>Attending($OccurrenceId, TRUE</ins>);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1847</th><th>1974</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>1848</th><th>1975</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L1857">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1984">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1857</th><th>1984</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function OccurrenceHide($OccurrenceId)</span> </td>
                  </tr><tr>
                          <th>1858</th><th>1985</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1859</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;SetOccurrenceUser<del>State($OccurrenceId, 'hide'</del>);</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1986</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;SetOccurrenceUser<ins>Attending($OccurrenceId, FALSE</ins>);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1860</th><th>1987</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>1861</th><th>1988</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L1870">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/events_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1997">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>1870</th><th>1997</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function OccurrenceShow($OccurrenceId)</span> </td>
                  </tr><tr>
                          <th>1871</th><th>1998</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1872</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;SetOccurrenceUser<del>State($OccurrenceId, 'show'</del>);</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1999</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;SetOccurrenceUser<ins>Attending($OccurrenceId, NULL</ins>);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1873</th><th>2000</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>1874</th><th>2001</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file19">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to system/application/models/calendar/recurrence_model.php" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/system/application/models/calendar/recurrence_model.php">system/application/models/calendar/recurrence_model.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision b35aae36ff4a5f71e6ae0f58522e5664dc1d1111">
                    <a title="Show revision b35aae36ff4a5f71e6ae0f58522e5664dc1d1111 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/recurrence_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L2">
                      rb35aa</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/recurrence_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L2">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>2</th><th>2</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>3</th><th>3</th><td class="l"><span>/**</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>4</th><th> </th><td class="l"><span>&nbsp;* @file <del></del>recurrence_model.php</span> </td>
                      </tr><tr>
                        <th>5</th><th> </th><td class="l"><span>&nbsp;* @brief <del>Date Recurrence Rule model</del>.</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>4</th><td class="r"><span>&nbsp;* @file <ins>models/calendar/</ins>recurrence_model.php</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>5</th><td class="r"><span>&nbsp;* @brief <ins>Recurrencce classes</ins>.</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>6</th><th>6</th><td class="l"><span>&nbsp;* @author James Hogan (jh559@cs.york.ac.uk)</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>7</th><td class="r"><ins>&nbsp;* @todo Tidy up these classes at the top and redistribute the code which</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>8</th><td class="r"><ins>&nbsp;* varies between frequencies.</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>7</th><th>9</th><td class="l"><span>&nbsp;*/</span> </td>
                  </tr><tr>
                          <th>8</th><th>10</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>9</th><th> </th><td class="l"><span>/// Represents a rule for a set of dates following a common pattern.</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>11</th><td class="r"><span>// dateOfWeek() takes a date in Ymd and a day of week in 3 letters or more</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>12</th><td class="r"><span>// and returns the date of that day. (ie: "sun" or "sunday" would be acceptable values of $day but not "su")</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>10</th><th>13</th><td class="l"><span>/**</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>11</th><th> </th><td class="l"><span>&nbsp;* @author James Hogan (jh559@cs.york.ac.uk)</span> </td>
                      </tr><tr>
                        <th>12</th><th> </th><td class="l"><span>&nbsp;*</span> </td>
                      </tr><tr>
                        <th>13</th><th> </th><td class="l"><span>&nbsp;* This class allows a recurring date pattern to be set up, then for dates</span> </td>
                      </tr><tr>
                        <th>14</th><th> </th><td class="l"><span>&nbsp;*&nbsp; &nbsp; &nbsp; within a particular range to be extracted.</span> </td>
                      </tr><tr>
                        <th>15</th><th> </th><td class="l"><span>&nbsp;*</span> </td>
                      </tr><tr>
                        <th>16</th><th> </th><td class="l"><span>&nbsp;* The objective is to support the majority of special calendar days</span> </td>
                      </tr><tr>
                        <th>17</th><th> </th><td class="l"><span>&nbsp;*&nbsp; &nbsp; &nbsp; (bank holidays, religious feasts, birthdays + anniversaries etc).</span> </td>
                      </tr><tr>
                        <th>18</th><th> </th><td class="l"><span>&nbsp;* User and organisation events are unlikely to use this class.</span> </td>
                      </tr><tr>
                        <th>19</th><th> </th><td class="l"><span>&nbsp;*</span> </td>
                      </tr><tr>
                        <th>20</th><th> </th><td class="l"><span>&nbsp;* Supports:</span> </td>
                      </tr><tr>
                        <th>21</th><th> </th><td class="l"><span>&nbsp;*&nbsp; &nbsp; &nbsp; - Regular year intervals (e.g. every 4 years from 2001).</span> </td>
                      </tr><tr>
                        <th>22</th><th> </th><td class="l"><span>&nbsp;*&nbsp; &nbsp; &nbsp; - Base: N days past the start of any combination of months in a matching year.</span> </td>
                      </tr><tr>
                        <th>23</th><th> </th><td class="l"><span>&nbsp;*&nbsp; &nbsp; &nbsp; - Base: A term number and any pattern of weeks in a matching year.</span> </td>
                      </tr><tr>
                        <th>24</th><th> </th><td class="l"><span>&nbsp;*&nbsp; &nbsp; &nbsp; - Base: Easter sunday of a matching year (so that easter is supported).</span> </td>
                      </tr><tr>
                        <th>25</th><th> </th><td class="l"><span>&nbsp;*&nbsp; &nbsp; &nbsp; - The nth certain day after the base, or a pattern of days starting from the base.</span> </td>
                      </tr><tr>
                        <th>26</th><th> </th><td class="l"><span>&nbsp;*&nbsp; &nbsp; &nbsp; - An offset of days and minutes added to that.</span> </td>
                      </tr><tr>
                        <th>27</th><th> </th><td class="l"><span>&nbsp;*</span> </td>
                      </tr><tr>
                        <th>28</th><th> </th><td class="l"><span>&nbsp;* Other base ideas:</span> </td>
                      </tr><tr>
                        <th>29</th><th> </th><td class="l"><span>&nbsp;*&nbsp; &nbsp; &nbsp; - Base: Lunar months.</span> </td>
                      </tr><tr>
                        <th>30</th><th> </th><td class="l"><span>&nbsp;*&nbsp; &nbsp; &nbsp; - Base: [Any other useful bases? only ones which will be used!].</span> </td>
                      </tr><tr>
                        <th>31</th><th> </th><td class="l"><span>&nbsp;*</span> </td>
                      </tr><tr>
                        <th>32</th><th> </th><td class="l"><span>&nbsp;* @note This started off as a bit of a hack so feel free to make suggestions</span> </td>
                      </tr><tr>
                        <th>33</th><th> </th><td class="l"><span>&nbsp;*&nbsp; &nbsp; &nbsp; regarding the behaviour or patterns that it should support.</span> </td>
                      </tr><tr>
                        <th>34</th><th> </th><td class="l"><span>&nbsp;*</span> </td>
                      </tr><tr>
                        <th>35</th><th> </th><td class="l"><span>&nbsp;* FindTimes() is the most useful function, producing a set of dates which</span> </td>
                      </tr><tr>
                        <th>36</th><th> </th><td class="l"><span>&nbsp;*&nbsp; &nbsp; &nbsp; match the rule.</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>14</th><td class="r"><span>* @note Much of this code is taken from phpicalendar v2.23, released under the GPL</span> </td>
                      </tr><tr>
                        <th> </th><th>15</th><td class="r"><span>* see http://phpicalendar.net/</span> </td>
                      </tr><tr>
                        <th> </th><th>16</th><td class="r"><span>* functions/date_functions</span> </td>
                      </tr><tr>
                        <th> </th><th>17</th><td class="r"><span>*/</span> </td>
                      </tr><tr>
                        <th> </th><th>18</th><td class="r"><span>function dateOfWeek($Ymd, $day) {</span> </td>
                      </tr><tr>
                        <th> </th><th>19</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; global $week_start_day;</span> </td>
                      </tr><tr>
                        <th> </th><th>20</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; if (!isset($week_start_day)) $week_start_day = 'Sunday';</span> </td>
                      </tr><tr>
                        <th> </th><th>21</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; $timestamp = strtotime($Ymd);</span> </td>
                      </tr><tr>
                        <th> </th><th>22</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; $num = date('w', strtotime($week_start_day));</span> </td>
                      </tr><tr>
                        <th> </th><th>23</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; $start_day_time = strtotime((date('w',$timestamp)==$num ? "$week_start_day" : "last $week_start_day"), $timestamp);</span> </td>
                      </tr><tr>
                        <th> </th><th>24</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; $ret_unixtime = strtotime($day,$start_day_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>25</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; // Fix for 992744</span> </td>
                      </tr><tr>
                        <th> </th><th>26</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; // $ret_unixtime = strtotime('+12 hours', $ret_unixtime);</span> </td>
                      </tr><tr>
                        <th> </th><th>27</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; $ret_unixtime += (12 * 60 * 60);</span> </td>
                      </tr><tr>
                        <th> </th><th>28</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; $ret = date('Ymd',$ret_unixtime);</span> </td>
                      </tr><tr>
                        <th> </th><th>29</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; return $ret;</span> </td>
                      </tr><tr>
                        <th> </th><th>30</th><td class="r"><span>}</span> </td>
                      </tr><tr>
                        <th> </th><th>31</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>32</th><td class="r"><span>abstract class RRuleFrequency</span> </td>
                      </tr><tr>
                        <th> </th><th>33</th><td class="r"><span>{</span> </td>
                      </tr><tr>
                        <th> </th><th>34</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; abstract function Compare($now, $then);</span> </td>
                      </tr><tr>
                        <th> </th><th>35</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; abstract function Increment($interval, $previous);</span> </td>
                      </tr><tr>
                        <th> </th><th>36</th><td class="r"><span>}</span> </td>
                      </tr><tr>
                        <th> </th><th>37</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>38</th><td class="r"><span>class RRuleFreq_daily extends RRuleFrequency</span> </td>
                      </tr><tr>
                        <th> </th><th>39</th><td class="r"><span>{</span> </td>
                      </tr><tr>
                        <th> </th><th>40</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function Compare($now, $then) {</span> </td>
                      </tr><tr>
                        <th> </th><th>41</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $seconds_now = strtotime($now);</span> </td>
                      </tr><tr>
                        <th> </th><th>42</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $seconds_then = strtotime($then);</span> </td>
                      </tr><tr>
                        <th> </th><th>43</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $diff_seconds = $seconds_now - $seconds_then;</span> </td>
                      </tr><tr>
                        <th> </th><th>44</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $diff_minutes = $diff_seconds/60;</span> </td>
                      </tr><tr>
                        <th> </th><th>45</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $diff_hours = $diff_minutes/60;</span> </td>
                      </tr><tr>
                        <th> </th><th>46</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $diff_days = round($diff_hours/24);</span> </td>
                      </tr><tr>
                        <th> </th><th>47</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>48</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $diff_days;</span> </td>
                      </tr><tr>
                        <th> </th><th>49</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>50</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>51</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function Increment($interval, $previous)</span> </td>
                      </tr><tr>
                        <th> </th><th>52</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>53</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return strtotime('+'.$interval.' day', $previous);</span> </td>
                      </tr><tr>
                        <th> </th><th>54</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>55</th><td class="r"><span>}</span> </td>
                      </tr><tr>
                        <th> </th><th>56</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>57</th><td class="r"><span>class RRuleFreq_weekly extends RRuleFrequency</span> </td>
                      </tr><tr>
                        <th> </th><th>58</th><td class="r"><span>{</span> </td>
                      </tr><tr>
                        <th> </th><th>59</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>60</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function Compare($now, $then) {</span> </td>
                      </tr><tr>
                        <th> </th><th>61</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; global $week_start_day;</span> </td>
                      </tr><tr>
                        <th> </th><th>62</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sun_now = dateOfWeek($now, "Sunday");</span> </td>
                      </tr><tr>
                        <th> </th><th>63</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sun_then = dateOfWeek($then, "Sunday");</span> </td>
                      </tr><tr>
                        <th> </th><th>64</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $seconds_now = strtotime($sun_now);</span> </td>
                      </tr><tr>
                        <th> </th><th>65</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $seconds_then =&nbsp; strtotime($sun_then);</span> </td>
                      </tr><tr>
                        <th> </th><th>66</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $diff_weeks = round(($seconds_now - $seconds_then)/(60*60*24*7));</span> </td>
                      </tr><tr>
                        <th> </th><th>67</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $diff_weeks;</span> </td>
                      </tr><tr>
                        <th> </th><th>68</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>69</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>70</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function Increment($interval, $previous)</span> </td>
                      </tr><tr>
                        <th> </th><th>71</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>72</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return strtotime('+'.$interval.' week', $previous);</span> </td>
                      </tr><tr>
                        <th> </th><th>73</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>74</th><td class="r"><span>}</span> </td>
                      </tr><tr>
                        <th> </th><th>75</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>76</th><td class="r"><span>class RRuleFreq_monthly extends RRuleFrequency</span> </td>
                      </tr><tr>
                        <th> </th><th>77</th><td class="r"><span>{</span> </td>
                      </tr><tr>
                        <th> </th><th>78</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function Compare($now, $then) {</span> </td>
                      </tr><tr>
                        <th> </th><th>79</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ereg ("([0-9]{4})([0-9]{2})([0-9]{2})", $now, $date_now);</span> </td>
                      </tr><tr>
                        <th> </th><th>80</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ereg ("([0-9]{4})([0-9]{2})([0-9]{2})", $then, $date_then);</span> </td>
                      </tr><tr>
                        <th> </th><th>81</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $diff_years = $date_now[1] - $date_then[1];</span> </td>
                      </tr><tr>
                        <th> </th><th>82</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $diff_months = $date_now[2] - $date_then[2];</span> </td>
                      </tr><tr>
                        <th> </th><th>83</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($date_now[2] &lt; $date_then[2]) {</span> </td>
                      </tr><tr>
                        <th> </th><th>84</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $diff_years -= 1;</span> </td>
                      </tr><tr>
                        <th> </th><th>85</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $diff_months = ($diff_months + 12) % 12;</span> </td>
                      </tr><tr>
                        <th> </th><th>86</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>87</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $diff_months = ($diff_years * 12) + $diff_months;</span> </td>
                      </tr><tr>
                        <th> </th><th>88</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>89</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $diff_months;</span> </td>
                      </tr><tr>
                        <th> </th><th>90</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>91</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>92</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function Increment($interval, $previous)</span> </td>
                      </tr><tr>
                        <th> </th><th>93</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>94</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return strtotime('+'.$interval.' month', $previous);</span> </td>
                      </tr><tr>
                        <th> </th><th>95</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>96</th><td class="r"><span>}</span> </td>
                      </tr><tr>
                        <th> </th><th>97</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>98</th><td class="r"><span>class RRuleFreq_yearly extends RRuleFrequency</span> </td>
                      </tr><tr>
                        <th> </th><th>99</th><td class="r"><span>{</span> </td>
                      </tr><tr>
                        <th> </th><th>100</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function Compare($now, $then) {</span> </td>
                      </tr><tr>
                        <th> </th><th>101</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ereg ("([0-9]{4})([0-9]{2})([0-9]{2})", $now, $date_now);</span> </td>
                      </tr><tr>
                        <th> </th><th>102</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ereg ("([0-9]{4})([0-9]{2})([0-9]{2})", $then, $date_then);</span> </td>
                      </tr><tr>
                        <th> </th><th>103</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $diff_years = $date_now[1] - $date_then[1];</span> </td>
                      </tr><tr>
                        <th> </th><th>104</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $diff_years;</span> </td>
                      </tr><tr>
                        <th> </th><th>105</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>106</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>107</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function Increment($interval, $previous)</span> </td>
                      </tr><tr>
                        <th> </th><th>108</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>109</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return strtotime('+'.$interval.' year', $previous);</span> </td>
                      </tr><tr>
                        <th> </th><th>110</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>111</th><td class="r"><span>}</span> </td>
                      </tr><tr>
                        <th> </th><th>112</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>113</th><td class="r"><span>/// A single recurrence rule.</span> </td>
                      </tr><tr>
                        <th> </th><th>114</th><td class="r"><span>class CalendarRecurRule</span> </td>
                      </tr><tr>
                        <th> </th><th>115</th><td class="r"><span>{</span> </td>
                      </tr><tr>
                        <th> </th><th>116</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Table of valid frequencies.</span> </td>
                      </tr><tr>
                        <th> </th><th>117</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; static $sFrequencies = array(</span> </td>
                      </tr><tr>
                        <th> </th><th>118</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'secondly',</span> </td>
                      </tr><tr>
                        <th> </th><th>119</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'minutely',</span> </td>
                      </tr><tr>
                        <th> </th><th>120</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'hourly',</span> </td>
                      </tr><tr>
                        <th> </th><th>121</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'daily',</span> </td>
                      </tr><tr>
                        <th> </th><th>122</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'weekly',</span> </td>
                      </tr><tr>
                        <th> </th><th>123</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'monthly',</span> </td>
                      </tr><tr>
                        <th> </th><th>124</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'yearly',</span> </td>
                      </tr><tr>
                        <th> </th><th>125</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'termly',&nbsp; &nbsp; &nbsp; &nbsp;// non standard</span> </td>
                      </tr><tr>
                        <th> </th><th>126</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'acyearly',&nbsp; &nbsp; &nbsp;// non standard</span> </td>
                      </tr><tr>
                        <th> </th><th>127</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th> </th><th>128</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Table of valid weekdays.</span> </td>
                      </tr><tr>
                        <th> </th><th>129</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; static $sWeekdays = array(</span> </td>
                      </tr><tr>
                        <th> </th><th>130</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'SU'&nbsp; &nbsp; =&gt; 0,</span> </td>
                      </tr><tr>
                        <th> </th><th>131</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'MO'&nbsp; &nbsp; =&gt; 1,</span> </td>
                      </tr><tr>
                        <th> </th><th>132</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'TU'&nbsp; &nbsp; =&gt; 2,</span> </td>
                      </tr><tr>
                        <th> </th><th>133</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'WE'&nbsp; &nbsp; =&gt; 3,</span> </td>
                      </tr><tr>
                        <th> </th><th>134</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'TH'&nbsp; &nbsp; =&gt; 4,</span> </td>
                      </tr><tr>
                        <th> </th><th>135</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'FR'&nbsp; &nbsp; =&gt; 5,</span> </td>
                      </tr><tr>
                        <th> </th><th>136</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'SA'&nbsp; &nbsp; =&gt; 6,</span> </td>
                      </tr><tr>
                        <th> </th><th>137</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th> </th><th>138</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// $sFrequencies Frequency of repetition.</span> </td>
                      </tr><tr>
                        <th> </th><th>139</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mFrequency;</span> </td>
                      </tr><tr>
                        <th> </th><th>140</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mFrequencyClass;</span> </td>
                      </tr><tr>
                        <th> </th><th>141</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// [DateTime] Maximum acceptable date and time.</span> </td>
                      </tr><tr>
                        <th> </th><th>142</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mUntil&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>143</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// [int] Number of acceptable date and times.</span> </td>
                      </tr><tr>
                        <th> </th><th>144</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mCount&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>145</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// int Interval of the frequency.</span> </td>
                      </tr><tr>
                        <th> </th><th>146</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mInterval&nbsp; &nbsp; = 1;</span> </td>
                      </tr><tr>
                        <th> </th><th>147</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array[int&lt;[0,59]&gt; unique] Seconds to match.</span> </td>
                      </tr><tr>
                        <th> </th><th>148</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mBySecond&nbsp; &nbsp; = NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>149</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array[int&lt;[0,59]&gt; unique] Minutes to match.</span> </td>
                      </tr><tr>
                        <th> </th><th>150</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mByMinute&nbsp; &nbsp; = NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>151</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array[int&lt;[0,23]&gt; unique] Hours to match.</span> </td>
                      </tr><tr>
                        <th> </th><th>152</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mByHour&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>153</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array[array(int&lt;[,-1]+[1,]&gt;,$sWeekdays) unique] Days of week to match.</span> </td>
                      </tr><tr>
                        <th> </th><th>154</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mByDay&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>155</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array[int&lt;[-31,-1]+[1,31]&gt; unique] Days of the month to match.</span> </td>
                      </tr><tr>
                        <th> </th><th>156</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mByMonthDay&nbsp; = NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>157</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array[int&lt;[-366,-1]+[1,366]&gt; unique] Days of the year to match.</span> </td>
                      </tr><tr>
                        <th> </th><th>158</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mByYearDay&nbsp; &nbsp;= NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>159</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array[int&lt;[-53,-1]+[1,53]&gt; unique] Weeks of the year to match.</span> </td>
                      </tr><tr>
                        <th> </th><th>160</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mByWeekNo&nbsp; &nbsp; = NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>161</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array[int&lt;[1,12]&gt; unique] Months of the year to match.</span> </td>
                      </tr><tr>
                        <th> </th><th>162</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mByMonth&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>163</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array[int&lt;[1,]&gt; unique] Which occurrences to use.</span> </td>
                      </tr><tr>
                        <th> </th><th>164</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mBySetPos&nbsp; &nbsp; = NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>165</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array[int&lt;[0,5]&gt; unique] Which terms to match.</span> </td>
                      </tr><tr>
                        <th> </th><th>166</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mByTerm&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = NULL;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// non standard</span> </td>
                      </tr><tr>
                        <th> </th><th>167</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array[int unique] Which days of the terms.</span> </td>
                      </tr><tr>
                        <th> </th><th>168</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mByTermDay&nbsp; &nbsp;= NULL;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// non standard</span> </td>
                      </tr><tr>
                        <th> </th><th>169</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array[int&lt;[-20,-1]+[1,20]&gt; unique] Which weeks of the term to match.</span> </td>
                      </tr><tr>
                        <th> </th><th>170</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mByTermWeek&nbsp; = NULL;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// non standard</span> </td>
                      </tr><tr>
                        <th> </th><th>171</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array[int&lt;[-366,-1]+[1,366]&gt; unique] Which days relative to easter to match.</span> </td>
                      </tr><tr>
                        <th> </th><th>172</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mByEasterDay = NULL;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// non standard</span> </td>
                      </tr><tr>
                        <th> </th><th>173</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// $sWeekdays Which day of the week to consider the start.</span> </td>
                      </tr><tr>
                        <th> </th><th>174</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mWkSt&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 0;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // = self::$sWeekdays['SU']</span> </td>
                      </tr><tr>
                        <th> </th><th>175</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>176</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function __construct()</span> </td>
                      </tr><tr>
                        <th> </th><th>177</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>178</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>179</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>180</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the frequency type.</span> </td>
                      </tr><tr>
                        <th> </th><th>181</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetFrequency($Frequency)</span> </td>
                      </tr><tr>
                        <th> </th><th>182</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>183</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mFrequency = $Frequency;</span> </td>
                      </tr><tr>
                        <th> </th><th>184</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $class_name = 'RRuleFreq_'.$Frequency;</span> </td>
                      </tr><tr>
                        <th> </th><th>185</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mFrequencyClass = new $class_name();</span> </td>
                      </tr><tr>
                        <th> </th><th>186</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>187</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Get the frequency of repetition.</span> </td>
                      </tr><tr>
                        <th> </th><th>188</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>189</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return string Frequency method.</span> </td>
                      </tr><tr>
                        <th> </th><th>190</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>191</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function GetFrequency()</span> </td>
                      </tr><tr>
                        <th> </th><th>192</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>193</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;mFrequency;</span> </td>
                      </tr><tr>
                        <th> </th><th>194</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>195</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>196</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the maximum date to match.</span> </td>
                      </tr><tr>
                        <th> </th><th>197</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>198</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Value timestamp,NULL New timestamp or NULL.</span> </td>
                      </tr><tr>
                        <th> </th><th>199</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>200</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetUntil($Value = NULL)</span> </td>
                      </tr><tr>
                        <th> </th><th>201</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>202</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL !== $Value) {</span> </td>
                      </tr><tr>
                        <th> </th><th>203</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre @a $Value must be a unix timestamp if not NULL.</span> </td>
                      </tr><tr>
                        <th> </th><th>204</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('is_int($Value)');</span> </td>
                      </tr><tr>
                        <th> </th><th>205</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mCount = NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>206</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>207</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mUntil = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>208</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>209</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Get the maximum date to match if set.</span> </td>
                      </tr><tr>
                        <th> </th><th>210</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>211</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return timestamp,NULL Timestamp of maximum date to match or NULL.</span> </td>
                      </tr><tr>
                        <th> </th><th>212</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>213</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function GetUntil()</span> </td>
                      </tr><tr>
                        <th> </th><th>214</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>215</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;mUntil;</span> </td>
                      </tr><tr>
                        <th> </th><th>216</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>217</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>218</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the maximum number of matches.</span> </td>
                      </tr><tr>
                        <th> </th><th>219</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>220</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Value timestamp,NULL New maximum number of matches or NULL.</span> </td>
                      </tr><tr>
                        <th> </th><th>221</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>222</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetCount($Value = NULL)</span> </td>
                      </tr><tr>
                        <th> </th><th>223</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>224</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL !== $Value) {</span> </td>
                      </tr><tr>
                        <th> </th><th>225</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre @a $Value must be a positive int if not NULL.</span> </td>
                      </tr><tr>
                        <th> </th><th>226</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('is_int($Value) &amp;&amp; $Value &gt; 0');</span> </td>
                      </tr><tr>
                        <th> </th><th>227</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mUntil = NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>228</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>229</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mCount = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>230</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>231</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Get the maximum number of matches if set.</span> </td>
                      </tr><tr>
                        <th> </th><th>232</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>233</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return int,NULL Maximum number of matches or NULL.</span> </td>
                      </tr><tr>
                        <th> </th><th>234</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>235</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function GetCount()</span> </td>
                      </tr><tr>
                        <th> </th><th>236</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>237</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;mCount;</span> </td>
                      </tr><tr>
                        <th> </th><th>238</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>239</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>240</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the frequency interval.</span> </td>
                      </tr><tr>
                        <th> </th><th>241</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>242</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Value int New frequency interval.</span> </td>
                      </tr><tr>
                        <th> </th><th>243</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>244</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetInterval($Value = 1)</span> </td>
                      </tr><tr>
                        <th> </th><th>245</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>246</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre @a $Value must be a positive int.</span> </td>
                      </tr><tr>
                        <th> </th><th>247</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('is_int($Value) &amp;&amp; $Value &gt; 0');</span> </td>
                      </tr><tr>
                        <th> </th><th>248</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mInterval = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>249</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>250</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Get the frequency interval if set.</span> </td>
                      </tr><tr>
                        <th> </th><th>251</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>252</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return int Frequency interval.</span> </td>
                      </tr><tr>
                        <th> </th><th>253</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>254</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function GetInterval()</span> </td>
                      </tr><tr>
                        <th> </th><th>255</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>256</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;mInterval;</span> </td>
                      </tr><tr>
                        <th> </th><th>257</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>258</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>259</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Get array of by values.</span> </td>
                      </tr><tr>
                        <th> </th><th>260</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>261</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array of by values, each with:</span> </td>
                      </tr><tr>
                        <th> </th><th>262</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 'by' string e.g. 'second','month','termweek'.</span> </td>
                      </tr><tr>
                        <th> </th><th>263</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 'primary' int Main value.</span> </td>
                      </tr><tr>
                        <th> </th><th>264</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 'secondary' int,NULL Optional value.</span> </td>
                      </tr><tr>
                        <th> </th><th>265</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>266</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function GetByArray()</span> </td>
                      </tr><tr>
                        <th> </th><th>267</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>268</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $simples = array(</span> </td>
                      </tr><tr>
                        <th> </th><th>269</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'Second','Minute','Hour',</span> </td>
                      </tr><tr>
                        <th> </th><th>270</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'MonthDay','YearDay','WeekNo',</span> </td>
                      </tr><tr>
                        <th> </th><th>271</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'Month','SetPos',</span> </td>
                      </tr><tr>
                        <th> </th><th>272</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'Term','TermDay','TermWeek',</span> </td>
                      </tr><tr>
                        <th> </th><th>273</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'EasterDay'</span> </td>
                      </tr><tr>
                        <th> </th><th>274</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th> </th><th>275</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $results = array();</span> </td>
                      </tr><tr>
                        <th> </th><th>276</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($simples as $simple) {</span> </td>
                      </tr><tr>
                        <th> </th><th>277</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $param = 'm'.$simple;</span> </td>
                      </tr><tr>
                        <th> </th><th>278</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!empty($this-&gt;$param)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>279</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $by = strtolower($simple);</span> </td>
                      </tr><tr>
                        <th> </th><th>280</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($this-&gt;$param as $item) {</span> </td>
                      </tr><tr>
                        <th> </th><th>281</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $results[] = array(</span> </td>
                      </tr><tr>
                        <th> </th><th>282</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'by' =&gt; $by,</span> </td>
                      </tr><tr>
                        <th> </th><th>283</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'primary' =&gt; $item,</span> </td>
                      </tr><tr>
                        <th> </th><th>284</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'secondary' =&gt; NULL</span> </td>
                      </tr><tr>
                        <th> </th><th>285</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th> </th><th>286</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>287</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>288</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>289</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!empty($this-&gt;mByDay)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>290</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($this-&gt;mByDay as $item) {</span> </td>
                      </tr><tr>
                        <th> </th><th>291</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $results[] = array(</span> </td>
                      </tr><tr>
                        <th> </th><th>292</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'by' =&gt; 'day',</span> </td>
                      </tr><tr>
                        <th> </th><th>293</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'primary' =&gt; $item[1],</span> </td>
                      </tr><tr>
                        <th> </th><th>294</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'secondary' =&gt; $item[0]</span> </td>
                      </tr><tr>
                        <th> </th><th>295</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th> </th><th>296</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>297</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>298</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $results;</span> </td>
                      </tr><tr>
                        <th> </th><th>299</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>300</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>301</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the matching seconds.</span> </td>
                      </tr><tr>
                        <th> </th><th>302</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>303</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Value array[int],int,NULL Array of matching seconds or NULL.</span> </td>
                      </tr><tr>
                        <th> </th><th>304</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>305</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetBySecond($Value = NULL)</span> </td>
                      </tr><tr>
                        <th> </th><th>306</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>307</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_int($Value)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>308</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $this-&gt;mBySecond) {</span> </td>
                      </tr><tr>
                        <th> </th><th>309</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mBySecond = array($Value);</span> </td>
                      </tr><tr>
                        <th> </th><th>310</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (!in_array($Value, $this-&gt;mBySecond)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>311</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mBySecond[] = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>312</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>313</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>314</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre @a $Value must be an array of ints or NULL if not int.</span> </td>
                      </tr><tr>
                        <th> </th><th>315</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('NULL === $Value || (is_array($Value) &amp;&amp; !in_array(FALSE, array_map(\'is_int\',$Value)))');</span> </td>
                      </tr><tr>
                        <th> </th><th>316</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mBySecond = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>317</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>318</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>319</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>320</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the matching minutes.</span> </td>
                      </tr><tr>
                        <th> </th><th>321</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>322</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Value array[int],NULL Array of matching minutes or NULL.</span> </td>
                      </tr><tr>
                        <th> </th><th>323</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>324</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetByMinute($Value = NULL)</span> </td>
                      </tr><tr>
                        <th> </th><th>325</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>326</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_int($Value)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>327</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $this-&gt;mByMinute) {</span> </td>
                      </tr><tr>
                        <th> </th><th>328</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByMinute = array($Value);</span> </td>
                      </tr><tr>
                        <th> </th><th>329</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (!in_array($Value, $this-&gt;mByMinute)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>330</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByMinute[] = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>331</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>332</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>333</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre @a $Value must be an array of ints or NULL if not int.</span> </td>
                      </tr><tr>
                        <th> </th><th>334</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('NULL === $Value || (is_array($Value) &amp;&amp; !in_array(FALSE, array_map(\'is_int\',$Value)))');</span> </td>
                      </tr><tr>
                        <th> </th><th>335</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByMinute = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>336</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>337</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>338</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>339</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the matching hours.</span> </td>
                      </tr><tr>
                        <th> </th><th>340</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>341</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Value array[int],NULL Array of matching hours or NULL.</span> </td>
                      </tr><tr>
                        <th> </th><th>342</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>343</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetByHour($Value = NULL)</span> </td>
                      </tr><tr>
                        <th> </th><th>344</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>345</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_int($Value)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>346</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $this-&gt;mByHour) {</span> </td>
                      </tr><tr>
                        <th> </th><th>347</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByHour = array($Value);</span> </td>
                      </tr><tr>
                        <th> </th><th>348</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (!in_array($Value, $this-&gt;mByHour)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>349</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByHour[] = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>350</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>351</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>352</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre @a $Value must be an array of ints or NULL if not int.</span> </td>
                      </tr><tr>
                        <th> </th><th>353</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('NULL === $Value || (is_array($Value) &amp;&amp; !in_array(FALSE, array_map(\'is_int\',$Value)))');</span> </td>
                      </tr><tr>
                        <th> </th><th>354</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByHour = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>355</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>356</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>357</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>358</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the matching days.</span> </td>
                      </tr><tr>
                        <th> </th><th>359</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>360</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Value array[array[int,int]],NULL Array of matching days or NULL.</span> </td>
                      </tr><tr>
                        <th> </th><th>361</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Optional int,NULL Optional value.</span> </td>
                      </tr><tr>
                        <th> </th><th>362</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>363</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetByDay($Value = NULL, $Optional = NULL)</span> </td>
                      </tr><tr>
                        <th> </th><th>364</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>365</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_int($Value)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>366</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $Value = array($Optional, $Value);</span> </td>
                      </tr><tr>
                        <th> </th><th>367</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $this-&gt;mByDay) {</span> </td>
                      </tr><tr>
                        <th> </th><th>368</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByDay = array($Value);</span> </td>
                      </tr><tr>
                        <th> </th><th>369</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (!in_array($Value, $this-&gt;mByDay)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>370</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByDay[] = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>371</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>372</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>373</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre @a $Value must be an array of ints or NULL if not int.</span> </td>
                      </tr><tr>
                        <th> </th><th>374</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('NULL === $Value || (is_array($Value) &amp;&amp; !in_array(FALSE, array_map(\'is_array\',$Value)))');</span> </td>
                      </tr><tr>
                        <th> </th><th>375</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByDay = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>376</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>377</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>378</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>379</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the matching month days.</span> </td>
                      </tr><tr>
                        <th> </th><th>380</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>381</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Value array[int],NULL Array of matching month days or NULL.</span> </td>
                      </tr><tr>
                        <th> </th><th>382</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>383</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetByMonthDay($Value = NULL)</span> </td>
                      </tr><tr>
                        <th> </th><th>384</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>385</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_int($Value)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>386</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $this-&gt;mByMonthDay) {</span> </td>
                      </tr><tr>
                        <th> </th><th>387</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByMonthDay = array($Value);</span> </td>
                      </tr><tr>
                        <th> </th><th>388</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (!in_array($Value, $this-&gt;mByMonthDay)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>389</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByMonthDay[] = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>390</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>391</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>392</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre @a $Value must be an array of ints or NULL if not int.</span> </td>
                      </tr><tr>
                        <th> </th><th>393</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('NULL === $Value || (is_array($Value) &amp;&amp; !in_array(FALSE, array_map(\'is_int\',$Value)))');</span> </td>
                      </tr><tr>
                        <th> </th><th>394</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByMonthDay = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>395</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>396</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>397</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>398</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the matching year days.</span> </td>
                      </tr><tr>
                        <th> </th><th>399</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>400</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Value array[int],NULL Array of matching year days or NULL.</span> </td>
                      </tr><tr>
                        <th> </th><th>401</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>402</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetByYearDay($Value = NULL)</span> </td>
                      </tr><tr>
                        <th> </th><th>403</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>404</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_int($Value)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>405</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $this-&gt;mByYearDay) {</span> </td>
                      </tr><tr>
                        <th> </th><th>406</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByYearDay = array($Value);</span> </td>
                      </tr><tr>
                        <th> </th><th>407</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (!in_array($Value, $this-&gt;mByYearDay)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>408</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByYearDay[] = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>409</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>410</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>411</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre @a $Value must be an array of ints or NULL if not int.</span> </td>
                      </tr><tr>
                        <th> </th><th>412</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('NULL === $Value || (is_array($Value) &amp;&amp; !in_array(FALSE, array_map(\'is_int\',$Value)))');</span> </td>
                      </tr><tr>
                        <th> </th><th>413</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByYearDay = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>414</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>415</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>416</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>417</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the matching week numbers.</span> </td>
                      </tr><tr>
                        <th> </th><th>418</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>419</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Value array[int],NULL Array of matching week numbers or NULL.</span> </td>
                      </tr><tr>
                        <th> </th><th>420</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>421</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetByWeekNo($Value = NULL)</span> </td>
                      </tr><tr>
                        <th> </th><th>422</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>423</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_int($Value)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>424</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $this-&gt;mByWeekNo) {</span> </td>
                      </tr><tr>
                        <th> </th><th>425</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByWeekNo = array($Value);</span> </td>
                      </tr><tr>
                        <th> </th><th>426</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (!in_array($Value, $this-&gt;mByWeekNo)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>427</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByWeekNo[] = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>428</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>429</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>430</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre @a $Value must be an array of ints or NULL if not int.</span> </td>
                      </tr><tr>
                        <th> </th><th>431</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('NULL === $Value || (is_array($Value) &amp;&amp; !in_array(FALSE, array_map(\'is_int\',$Value)))');</span> </td>
                      </tr><tr>
                        <th> </th><th>432</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByWeekNo = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>433</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>434</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>435</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>436</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the matching months.</span> </td>
                      </tr><tr>
                        <th> </th><th>437</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>438</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Value array[int],NULL Array of matching months or NULL.</span> </td>
                      </tr><tr>
                        <th> </th><th>439</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>440</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetByMonth($Value = NULL)</span> </td>
                      </tr><tr>
                        <th> </th><th>441</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>442</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_int($Value)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>443</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $this-&gt;mByMonth) {</span> </td>
                      </tr><tr>
                        <th> </th><th>444</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByMonth = array($Value);</span> </td>
                      </tr><tr>
                        <th> </th><th>445</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (!in_array($Value, $this-&gt;mByMonth)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>446</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByMonth[] = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>447</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>448</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>449</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre @a $Value must be an array of ints or NULL if not int.</span> </td>
                      </tr><tr>
                        <th> </th><th>450</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('NULL === $Value || (is_array($Value) &amp;&amp; !in_array(FALSE, array_map(\'is_int\',$Value)))');</span> </td>
                      </tr><tr>
                        <th> </th><th>451</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByMonth = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>452</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>453</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>454</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>455</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the matching occurrence positions.</span> </td>
                      </tr><tr>
                        <th> </th><th>456</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>457</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Value array[int],NULL Array of matching occurrence positions or NULL.</span> </td>
                      </tr><tr>
                        <th> </th><th>458</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>459</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetBySetPos($Value = NULL)</span> </td>
                      </tr><tr>
                        <th> </th><th>460</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>461</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_int($Value)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>462</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $this-&gt;mBySetPos) {</span> </td>
                      </tr><tr>
                        <th> </th><th>463</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mBySetPos = array($Value);</span> </td>
                      </tr><tr>
                        <th> </th><th>464</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (!in_array($Value, $this-&gt;mBySetPos)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>465</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mBySetPos[] = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>466</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>467</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>468</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre @a $Value must be an array of ints or NULL if not int.</span> </td>
                      </tr><tr>
                        <th> </th><th>469</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('NULL === $Value || (is_array($Value) &amp;&amp; !in_array(FALSE, array_map(\'is_int\',$Value)))');</span> </td>
                      </tr><tr>
                        <th> </th><th>470</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mBySetPos = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>471</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>472</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>473</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>474</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the matching term.</span> </td>
                      </tr><tr>
                        <th> </th><th>475</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>476</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Value array[int],NULL Array of matching occurrence positions or NULL.</span> </td>
                      </tr><tr>
                        <th> </th><th>477</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>478</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetByTerm($Value = NULL)</span> </td>
                      </tr><tr>
                        <th> </th><th>479</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>480</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_int($Value)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>481</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $this-&gt;mByTerm) {</span> </td>
                      </tr><tr>
                        <th> </th><th>482</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByTerm = array($Value);</span> </td>
                      </tr><tr>
                        <th> </th><th>483</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (!in_array($Value, $this-&gt;mByTerm)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>484</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByTerm[] = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>485</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>486</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>487</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre @a $Value must be an array of ints or NULL if not int.</span> </td>
                      </tr><tr>
                        <th> </th><th>488</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('NULL === $Value || (is_array($Value) &amp;&amp; !in_array(FALSE, array_map(\'is_int\',$Value)))');</span> </td>
                      </tr><tr>
                        <th> </th><th>489</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByTerm = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>490</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>491</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>492</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>493</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the matching days of term.</span> </td>
                      </tr><tr>
                        <th> </th><th>494</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>495</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Value array[int],NULL Array of matching occurrence positions or NULL.</span> </td>
                      </tr><tr>
                        <th> </th><th>496</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>497</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetByTermDay($Value = NULL)</span> </td>
                      </tr><tr>
                        <th> </th><th>498</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>499</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_int($Value)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>500</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $this-&gt;mByTermDay) {</span> </td>
                      </tr><tr>
                        <th> </th><th>501</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByTermDay = array($Value);</span> </td>
                      </tr><tr>
                        <th> </th><th>502</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (!in_array($Value, $this-&gt;mByTermDay)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>503</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByTermDay[] = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>504</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>505</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>506</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre @a $Value must be an array of ints or NULL if not int.</span> </td>
                      </tr><tr>
                        <th> </th><th>507</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('NULL === $Value || (is_array($Value) &amp;&amp; !in_array(FALSE, array_map(\'is_int\',$Value)))');</span> </td>
                      </tr><tr>
                        <th> </th><th>508</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByTermDay = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>509</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>510</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>511</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>512</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the matching weeks of term.</span> </td>
                      </tr><tr>
                        <th> </th><th>513</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>514</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Value array[int],NULL Array of matching occurrence positions or NULL.</span> </td>
                      </tr><tr>
                        <th> </th><th>515</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>516</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetByTermWeek($Value = NULL)</span> </td>
                      </tr><tr>
                        <th> </th><th>517</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>518</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_int($Value)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>519</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $this-&gt;mByTermWeek) {</span> </td>
                      </tr><tr>
                        <th> </th><th>520</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByTermWeek = array($Value);</span> </td>
                      </tr><tr>
                        <th> </th><th>521</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (!in_array($Value, $this-&gt;mByTermWeek)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>522</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByTermWeek[] = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>523</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>524</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>525</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre @a $Value must be an array of ints or NULL if not int.</span> </td>
                      </tr><tr>
                        <th> </th><th>526</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('NULL === $Value || (is_array($Value) &amp;&amp; !in_array(FALSE, array_map(\'is_int\',$Value)))');</span> </td>
                      </tr><tr>
                        <th> </th><th>527</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByTermWeek = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>528</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>529</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>530</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>531</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the matching days relative to easter.</span> </td>
                      </tr><tr>
                        <th> </th><th>532</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>533</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Value array[int],NULL Array of matching occurrence positions or NULL.</span> </td>
                      </tr><tr>
                        <th> </th><th>534</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>535</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetByEaster($Value = NULL)</span> </td>
                      </tr><tr>
                        <th> </th><th>536</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>537</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_int($Value)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>538</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $this-&gt;mByEaster) {</span> </td>
                      </tr><tr>
                        <th> </th><th>539</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByEaster = array($Value);</span> </td>
                      </tr><tr>
                        <th> </th><th>540</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (!in_array($Value, $this-&gt;mByEaster)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>541</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByEaster[] = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>542</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>543</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>544</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre @a $Value must be an array of ints or NULL if not int.</span> </td>
                      </tr><tr>
                        <th> </th><th>545</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('NULL === $Value || (is_array($Value) &amp;&amp; !in_array(FALSE, array_map(\'is_int\',$Value)))');</span> </td>
                      </tr><tr>
                        <th> </th><th>546</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mByEaster = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>547</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>548</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>549</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>550</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the start day of the week.</span> </td>
                      </tr><tr>
                        <th> </th><th>551</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>552</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Value int New week start.</span> </td>
                      </tr><tr>
                        <th> </th><th>553</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>554</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetWkSt($Value = 0)</span> </td>
                      </tr><tr>
                        <th> </th><th>555</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>556</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre @a $Value must be in [0,6].</span> </td>
                      </tr><tr>
                        <th> </th><th>557</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('is_int($Value) &amp;&amp; $Value &gt;= 0 &amp;&amp; $Value &lt; 7');</span> </td>
                      </tr><tr>
                        <th> </th><th>558</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mWkSt = $Value;</span> </td>
                      </tr><tr>
                        <th> </th><th>559</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>560</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>561</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Get the start day of the week.</span> </td>
                      </tr><tr>
                        <th> </th><th>562</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>563</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return int Week start.</span> </td>
                      </tr><tr>
                        <th> </th><th>564</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>565</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function GetWkSt()</span> </td>
                      </tr><tr>
                        <th> </th><th>566</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>567</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;mWkSt;</span> </td>
                      </tr><tr>
                        <th> </th><th>568</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>569</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>570</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>571</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; // takes iCalendar 2 day format and makes it into 3 characters</span> </td>
                      </tr><tr>
                        <th> </th><th>572</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; // if $txt is true, it returns the 3 letters, otherwise it returns the</span> </td>
                      </tr><tr>
                        <th> </th><th>573</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; // integer of that day; 0=Sun, 1=Mon, etc.</span> </td>
                      </tr><tr>
                        <th> </th><th>574</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function two2threeCharDays($day, $txt=true) {</span> </td>
                      </tr><tr>
                        <th> </th><th>575</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; switch($day) {</span> </td>
                      </tr><tr>
                        <th> </th><th>576</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'SU': return ($txt ? 'sun' : '0');</span> </td>
                      </tr><tr>
                        <th> </th><th>577</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'MO': return ($txt ? 'mon' : '1');</span> </td>
                      </tr><tr>
                        <th> </th><th>578</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'TU': return ($txt ? 'tue' : '2');</span> </td>
                      </tr><tr>
                        <th> </th><th>579</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'WE': return ($txt ? 'wed' : '3');</span> </td>
                      </tr><tr>
                        <th> </th><th>580</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'TH': return ($txt ? 'thu' : '4');</span> </td>
                      </tr><tr>
                        <th> </th><th>581</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'FR': return ($txt ? 'fri' : '5');</span> </td>
                      </tr><tr>
                        <th> </th><th>582</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'SA': return ($txt ? 'sat' : '6');</span> </td>
                      </tr><tr>
                        <th> </th><th>583</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>584</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>585</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>586</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Get occurrences.</span> </td>
                      </tr><tr>
                        <th> </th><th>587</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>588</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $StartDate&nbsp; &nbsp; timestamp Start date.</span> </td>
                      </tr><tr>
                        <th> </th><th>589</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $MaxDate&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; timestamp Max date to return.</span> </td>
                      </tr><tr>
                        <th> </th><th>590</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array['YYYYMMDD' =&gt; array[{'HHMMSS',NULL} =&gt; duration] ] Matching occurrences in range.</span> </td>
                      </tr><tr>
                        <th> </th><th>591</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th> </th><th>592</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @todo Rewrite GetOccurrences properly.</span> </td>
                      </tr><tr>
                        <th> </th><th>593</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @note Much of this code is taken from phpicalendar v 2.23, released under the GPL</span> </td>
                      </tr><tr>
                        <th> </th><th>594</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; see http://phpicalendar.net/</span> </td>
                      </tr><tr>
                        <th> </th><th>595</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; functions/ical_parser</span> </td>
                      </tr><tr>
                        <th> </th><th>596</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>597</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function GetOccurrences($start_date_time, $first_duration, $start_range_time, $end_range_time)</span> </td>
                      </tr><tr>
                        <th> </th><th>598</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>599</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $byday = $this-&gt;mByDay;</span> </td>
                      </tr><tr>
                        <th> </th><th>600</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $count = $this-&gt;mCount;</span> </td>
                      </tr><tr>
                        <th> </th><th>601</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $number = $this-&gt;mInterval;</span> </td>
                      </tr><tr>
                        <th> </th><th>602</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $until = $this-&gt;mUntil;</span> </td>
                      </tr><tr>
                        <th> </th><th>603</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $byday = $this-&gt;mByDay;</span> </td>
                      </tr><tr>
                        <th> </th><th>604</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bymonth = $this-&gt;mByMonth;</span> </td>
                      </tr><tr>
                        <th> </th><th>605</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bymonthday = $this-&gt;mByMonthDay;</span> </td>
                      </tr><tr>
                        <th> </th><th>606</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bysetpos = $this-&gt;mBySetPos;</span> </td>
                      </tr><tr>
                        <th> </th><th>607</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $byyearday = $this-&gt;mByYearDay;</span> </td>
                      </tr><tr>
                        <th> </th><th>608</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $except_dates = array();</span> </td>
                      </tr><tr>
                        <th> </th><th>609</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bleed_time = -1;</span> </td>
                      </tr><tr>
                        <th> </th><th>610</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bleed_check = 0;</span> </td>
                      </tr><tr>
                        <th> </th><th>611</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>612</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $end_unixtime&nbsp; &nbsp;= $start_date_time + $first_duration;</span> </td>
                      </tr><tr>
                        <th> </th><th>613</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start_time&nbsp; &nbsp; &nbsp;= date ('His', $start_date_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>614</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $end_time&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= date ('His', $end_unixtime);</span> </td>
                      </tr><tr>
                        <th> </th><th>615</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>616</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $hour&nbsp; &nbsp;= substr($start_time,0,2);</span> </td>
                      </tr><tr>
                        <th> </th><th>617</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $minute = substr($start_time,2,2);</span> </td>
                      </tr><tr>
                        <th> </th><th>618</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $second = substr($start_time,4,2);</span> </td>
                      </tr><tr>
                        <th> </th><th>619</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>620</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $master_array = array();</span> </td>
                      </tr><tr>
                        <th> </th><th>621</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>622</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Modify the COUNT based on BYDAY</span> </td>
                      </tr><tr>
                        <th> </th><th>623</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ((is_array($byday)) &amp;&amp; (NULL !== $count)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>624</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temp = sizeof($byday);</span> </td>
                      </tr><tr>
                        <th> </th><th>625</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $count = ($count / $temp);</span> </td>
                      </tr><tr>
                        <th> </th><th>626</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset($temp);</span> </td>
                      </tr><tr>
                        <th> </th><th>627</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>628</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>629</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // if $until isn't set yet, we set it to the end of our range we're looking at</span> </td>
                      </tr><tr>
                        <th> </th><th>630</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>631</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $until) $until = $end_range_time;</span> </td>
                      </tr><tr>
                        <th> </th><th>632</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $abs_until = date('YmdHis', $until);</span> </td>
                      </tr><tr>
                        <th> </th><th>633</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $end_date_time = $until;</span> </td>
                      </tr><tr>
                        <th> </th><th>634</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start_range_time_tmp = $start_range_time;</span> </td>
                      </tr><tr>
                        <th> </th><th>635</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $end_range_time_tmp = $end_range_time;</span> </td>
                      </tr><tr>
                        <th> </th><th>636</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>637</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // If the $end_range_time is less than the $start_date_time, or $start_range_time is greater</span> </td>
                      </tr><tr>
                        <th> </th><th>638</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // than $end_date_time, we may as well forget the whole thing</span> </td>
                      </tr><tr>
                        <th> </th><th>639</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // It doesn't do us any good to spend time adding data we aren't even looking at</span> </td>
                      </tr><tr>
                        <th> </th><th>640</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // this will prevent the year view from taking way longer than it needs to</span> </td>
                      </tr><tr>
                        <th> </th><th>641</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($end_range_time_tmp &gt;= $start_date_time &amp;&amp; $start_range_time_tmp &lt;= $end_date_time) {</span> </td>
                      </tr><tr>
                        <th> </th><th>642</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>643</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // if the beginning of our range is less than the start of the item, we may as well set it equal to it</span> </td>
                      </tr><tr>
                        <th> </th><th>644</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($start_range_time_tmp &lt; $start_date_time){</span> </td>
                      </tr><tr>
                        <th> </th><th>645</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start_range_time_tmp = $start_date_time;</span> </td>
                      </tr><tr>
                        <th> </th><th>646</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>647</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($end_range_time_tmp &gt; $end_date_time) $end_range_time_tmp = $end_date_time;</span> </td>
                      </tr><tr>
                        <th> </th><th>648</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>649</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // initialize the time we will increment</span> </td>
                      </tr><tr>
                        <th> </th><th>650</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_range_time = $start_range_time_tmp;</span> </td>
                      </tr><tr>
                        <th> </th><th>651</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>652</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // FIXME: This is a hack to fix repetitions with $interval &gt; 1</span> </td>
                      </tr><tr>
                        <th> </th><th>653</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// number is interval, count is quantity</span> </td>
                      </tr><tr>
                        <th> </th><th>654</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// more than one, more than one frequency apart</span> </td>
                      </tr><tr>
                        <th> </th><th>655</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// extends the quantity to cover the extension because of gaps</span> </td>
                      </tr><tr>
                        <th> </th><th>656</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($count &gt; 1 &amp;&amp; $number &gt; 1) $count = 1 + ($count - 1) * $number;</span> </td>
                      </tr><tr>
                        <th> </th><th>657</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>658</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $count_to = 0;</span> </td>
                      </tr><tr>
                        <th> </th><th>659</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // start at the $start_range and go until we hit the end of our range.</span> </td>
                      </tr><tr>
                        <th> </th><th>660</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!isset($wkst)) $wkst='SU';</span> </td>
                      </tr><tr>
                        <th> </th><th>661</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $week_start_day = $wkst3char = $this-&gt;two2threeCharDays($wkst);</span> </td>
                      </tr><tr>
                        <th> </th><th>662</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while (($next_range_time &gt;= $start_range_time_tmp) &amp;&amp; ($next_range_time &lt;= $end_range_time_tmp) &amp;&amp; ($count_to !== $count)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>663</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// finds number of frequency units between start and next range</span> </td>
                      </tr><tr>
                        <th> </th><th>664</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $diff = $this-&gt;mFrequencyClass-&gt;Compare(date('Ymd',$next_range_time), date('Ymd',$start_date_time));</span> </td>
                      </tr><tr>
                        <th> </th><th>665</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// most likely in range of events</span> </td>
                      </tr><tr>
                        <th> </th><th>666</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($diff &lt; $count || NULL === $count) {</span> </td>
                      </tr><tr>
                        <th> </th><th>667</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// one of the matching intervals?</span> </td>
                      </tr><tr>
                        <th> </th><th>668</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($diff % $number == 0) {</span> </td>
                      </tr><tr>
                        <th> </th><th>669</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $interval = $number;</span> </td>
                      </tr><tr>
                        <th> </th><th>670</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; switch ($this-&gt;mFrequency) {</span> </td>
                      </tr><tr>
                        <th> </th><th>671</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'daily':</span> </td>
                      </tr><tr>
                        <th> </th><th>672</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_date_time = $next_range_time;</span> </td>
                      </tr><tr>
                        <th> </th><th>673</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recur_data[] = $next_date_time;</span> </td>
                      </tr><tr>
                        <th> </th><th>674</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th> </th><th>675</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'weekly':</span> </td>
                      </tr><tr>
                        <th> </th><th>676</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Populate $byday with the default day if it's not set.</span> </td>
                      </tr><tr>
                        <th> </th><th>677</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!isset($byday)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>678</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $byday[] = strtoupper(substr(date('D', $start_date_time), 0, 2));</span> </td>
                      </tr><tr>
                        <th> </th><th>679</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>680</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_array($byday)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>681</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach($byday as $day) {</span> </td>
                      </tr><tr>
                        <th> </th><th>682</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day = $this-&gt;two2threeCharDays($day[1]);</span> </td>
                      </tr><tr>
                        <th> </th><th>683</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #need to find the first day of the appropriate week.</span> </td>
                      </tr><tr>
                        <th> </th><th>684</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #dateOfweek uses weekstartday as a global variable. This has to be changed to $wkst,</span> </td>
                      </tr><tr>
                        <th> </th><th>685</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #but then needs to be reset for other functions</span> </td>
                      </tr><tr>
                        <th> </th><th>686</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $week_start_day_tmp = $week_start_day;</span> </td>
                      </tr><tr>
                        <th> </th><th>687</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $week_start_day = $wkst3char;</span> </td>
                      </tr><tr>
                        <th> </th><th>688</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>689</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $the_sunday = dateOfWeek(date("Ymd",$next_range_time), $wkst3char);</span> </td>
                      </tr><tr>
                        <th> </th><th>690</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_date_time = strtotime($day,strtotime($the_sunday)) + (12 * 60 * 60);</span> </td>
                      </tr><tr>
                        <th> </th><th>691</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $week_start_day = $week_start_day_tmp; #see above reset to global value</span> </td>
                      </tr><tr>
                        <th> </th><th>692</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>693</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #reset $next_range_time to first instance in this week.</span> </td>
                      </tr><tr>
                        <th> </th><th>694</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($next_date_time &lt; $next_range_time){</span> </td>
                      </tr><tr>
                        <th> </th><th>695</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_range_time = $next_date_time;</span> </td>
                      </tr><tr>
                        <th> </th><th>696</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>697</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Since this renders events from $next_range_time to $next_range_time + 1 week, I need to handle intervals</span> </td>
                      </tr><tr>
                        <th> </th><th>698</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // as well. This checks to see if $next_date_time is after $day_start (i.e., "next week"), and thus</span> </td>
                      </tr><tr>
                        <th> </th><th>699</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // if we need to add $interval weeks to $next_date_time.</span> </td>
                      </tr><tr>
                        <th> </th><th>700</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($next_date_time &gt; strtotime($week_start_day, $next_range_time) &amp;&amp; $interval &gt; 1) {</span> </td>
                      </tr><tr>
                        <th> </th><th>701</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp; &nbsp; &nbsp; &nbsp;$next_date_time = strtotime('+'.($interval - 1).' '.$freq_type, $next_date_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>702</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>703</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recur_data[] = $next_date_time;</span> </td>
                      </tr><tr>
                        <th> </th><th>704</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>705</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>706</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th> </th><th>707</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'monthly':</span> </td>
                      </tr><tr>
                        <th> </th><th>708</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (empty($bymonth)) $bymonth = array(1,2,3,4,5,6,7,8,9,10,11,12);</span> </td>
                      </tr><tr>
                        <th> </th><th>709</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_range_time = strtotime(date('Y-m-01', $next_range_time));</span> </td>
                      </tr><tr>
                        <th> </th><th>710</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL !== $bysetpos) {</span> </td>
                      </tr><tr>
                        <th> </th><th>711</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* bysetpos code from dustinbutler</span> </td>
                      </tr><tr>
                        <th> </th><th>712</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; start on day 1 or last day.</span> </td>
                      </tr><tr>
                        <th> </th><th>713</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if day matches any BYDAY the count is incremented.</span> </td>
                      </tr><tr>
                        <th> </th><th>714</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SETPOS = 4, need 4th match</span> </td>
                      </tr><tr>
                        <th> </th><th>715</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SETPOS = -1, need 1st match</span> </td>
                      </tr><tr>
                        <th> </th><th>716</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */</span> </td>
                      </tr><tr>
                        <th> </th><th>717</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @todo Standard supports multiple setpos values</span> </td>
                      </tr><tr>
                        <th> </th><th>718</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bysetpos = $bysetpos[0];</span> </td>
                      </tr><tr>
                        <th> </th><th>719</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>720</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $year = date('Y', $next_range_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>721</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $month = date('m', $next_range_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>722</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($bysetpos &gt; 0) {</span> </td>
                      </tr><tr>
                        <th> </th><th>723</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_day = '+1 day';</span> </td>
                      </tr><tr>
                        <th> </th><th>724</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day = 1;</span> </td>
                      </tr><tr>
                        <th> </th><th>725</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>726</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_day = '-1 day';</span> </td>
                      </tr><tr>
                        <th> </th><th>727</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day = $totalDays[$month];</span> </td>
                      </tr><tr>
                        <th> </th><th>728</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>729</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day = mktime(0, 0, 0, $month, $day, $year);</span> </td>
                      </tr><tr>
                        <th> </th><th>730</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $countMatch = 0;</span> </td>
                      </tr><tr>
                        <th> </th><th>731</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while ($countMatch != abs($bysetpos)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>732</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* Does this day match a BYDAY value? */</span> </td>
                      </tr><tr>
                        <th> </th><th>733</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $thisDay = $day;</span> </td>
                      </tr><tr>
                        <th> </th><th>734</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $textDay = strtoupper(substr(date('D', $thisDay), 0, 2));</span> </td>
                      </tr><tr>
                        <th> </th><th>735</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL !== $byday &amp;&amp; in_array($textDay, $byday)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>736</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $countMatch++;</span> </td>
                      </tr><tr>
                        <th> </th><th>737</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>738</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day = strtotime($next_day, $thisDay);</span> </td>
                      </tr><tr>
                        <th> </th><th>739</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>740</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recur_data[] = $thisDay;</span> </td>
                      </tr><tr>
                        <th> </th><th>741</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif ((isset($bymonthday)) &amp;&amp; (!isset($byday))) {</span> </td>
                      </tr><tr>
                        <th> </th><th>742</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach($bymonthday as $day) {</span> </td>
                      </tr><tr>
                        <th> </th><th>743</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($day &lt; 0) $day = ((date('t', $next_range_time)) + ($day)) + 1;</span> </td>
                      </tr><tr>
                        <th> </th><th>744</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $year = date('Y', $next_range_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>745</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $month = date('m', $next_range_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>746</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (checkdate($month,$day,$year)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>747</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_date_time = mktime(0,0,0,$month,$day,$year);</span> </td>
                      </tr><tr>
                        <th> </th><th>748</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recur_data[] = $next_date_time;</span> </td>
                      </tr><tr>
                        <th> </th><th>749</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>750</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>751</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (is_array($byday)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>752</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach($byday as $day_info) {</span> </td>
                      </tr><tr>
                        <th> </th><th>753</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; list($nth, $on_day_num) = $day_info;</span> </td>
                      </tr><tr>
                        <th> </th><th>754</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //ereg ('([-\+]{0,1})?([0-9]{1})?([A-Z]{2})', $day, $byday_arr);</span> </td>
                      </tr><tr>
                        <th> </th><th>755</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Added for 2.0 when no modifier is set</span> </td>
                      </tr><tr>
                        <th> </th><th>756</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //if ($byday_arr[2] != '') {</span> </td>
                      </tr><tr>
                        <th> </th><th>757</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($nth !== NULL) {</span> </td>
                      </tr><tr>
                        <th> </th><th>758</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $negative = ($nth &lt; 0 ? -1 : 1);</span> </td>
                      </tr><tr>
                        <th> </th><th>759</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $nth += $negative;</span> </td>
                      </tr><tr>
                        <th> </th><th>760</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>761</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $nth = 0;</span> </td>
                      </tr><tr>
                        <th> </th><th>762</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>763</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $on_day = $this-&gt;two2threeCharDays(array_search($on_day_num,self::$sWeekdays));</span> </td>
                      </tr><tr>
                        <th> </th><th>764</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($nth !== NULL &amp;&amp; $negative &lt; 0) {</span> </td>
                      </tr><tr>
                        <th> </th><th>765</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $last_day_tmp = date('t',$next_range_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>766</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_range_time = strtotime(date('Y-m-'.$last_day_tmp, $next_range_time));</span> </td>
                      </tr><tr>
                        <th> </th><th>767</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $last_tmp = (date('w',$next_range_time) == $on_day_num) ? '' : 'last ';</span> </td>
                      </tr><tr>
                        <th> </th><th>768</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_date_time = strtotime($last_tmp.$on_day, $next_range_time) - $nth * 604800;</span> </td>
                      </tr><tr>
                        <th> </th><th>769</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $month = date('m', $next_date_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>770</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (in_array($month, $bymonth)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>771</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recur_data[] = $next_date_time;</span> </td>
                      </tr><tr>
                        <th> </th><th>772</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>773</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #reset next_range_time to start of month</span> </td>
                      </tr><tr>
                        <th> </th><th>774</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_range_time = strtotime(date('Y-m-'.'1', $next_range_time));</span> </td>
                      </tr><tr>
                        <th> </th><th>775</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>776</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (isset($bymonthday) &amp;&amp; (!empty($bymonthday))) {</span> </td>
                      </tr><tr>
                        <th> </th><th>777</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // This supports MONTHLY where BYDAY and BYMONTH are both set</span> </td>
                      </tr><tr>
                        <th> </th><th>778</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach($bymonthday as $day) {</span> </td>
                      </tr><tr>
                        <th> </th><th>779</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $year&nbsp; &nbsp;= date('Y', $next_range_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>780</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $month&nbsp; = date('m', $next_range_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>781</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (checkdate($month,$day,$year)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>782</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_date_time = mktime(0,0,0,$month,$day,$year);</span> </td>
                      </tr><tr>
                        <th> </th><th>783</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $daday = strtolower(strftime("%a", $next_date_time));</span> </td>
                      </tr><tr>
                        <th> </th><th>784</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($daday == $on_day &amp;&amp; in_array($month, $bymonth)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>785</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recur_data[] = $next_date_time;</span> </td>
                      </tr><tr>
                        <th> </th><th>786</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>787</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>788</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>789</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif ($nth !== NULL &amp;&amp; $negative &gt; 0) {</span> </td>
                      </tr><tr>
                        <th> </th><th>790</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_date_time = strtotime($on_day, $next_range_time) + $nth * 604800;</span> </td>
                      </tr><tr>
                        <th> </th><th>791</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $month = date('m', $next_date_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>792</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (in_array($month, $bymonth)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>793</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recur_data[] = $next_date_time;</span> </td>
                      </tr><tr>
                        <th> </th><th>794</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>795</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>796</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_date = date('Ymd', $next_date_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>797</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>798</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>799</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th> </th><th>800</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'yearly':</span> </td>
                      </tr><tr>
                        <th> </th><th>801</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (($bymonth === NULL) || (sizeof($bymonth) == 0)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>802</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $m = date('m', $start_date_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>803</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bymonth = array("$m");</span> </td>
                      </tr><tr>
                        <th> </th><th>804</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>805</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>806</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach($bymonth as $month) {</span> </td>
                      </tr><tr>
                        <th> </th><th>807</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Make sure the month &amp; year used is within the start/end_range.</span> </td>
                      </tr><tr>
                        <th> </th><th>808</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($month &lt; date('m', $next_range_time)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>809</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $year = date('Y', $next_range_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>810</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>811</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $year = date('Y', $next_range_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>812</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>813</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset($bysetpos)){</span> </td>
                      </tr><tr>
                        <th> </th><th>814</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* bysetpos code from dustinbutler</span> </td>
                      </tr><tr>
                        <th> </th><th>815</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; start on day 1 or last day.</span> </td>
                      </tr><tr>
                        <th> </th><th>816</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if day matches any BYDAY the count is incremented.</span> </td>
                      </tr><tr>
                        <th> </th><th>817</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SETPOS = 4, need 4th match</span> </td>
                      </tr><tr>
                        <th> </th><th>818</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SETPOS = -1, need 1st match</span> </td>
                      </tr><tr>
                        <th> </th><th>819</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */</span> </td>
                      </tr><tr>
                        <th> </th><th>820</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($bysetpos &gt; 0) {</span> </td>
                      </tr><tr>
                        <th> </th><th>821</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_day = '+1 day';</span> </td>
                      </tr><tr>
                        <th> </th><th>822</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day = 1;</span> </td>
                      </tr><tr>
                        <th> </th><th>823</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>824</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_day = '-1 day';</span> </td>
                      </tr><tr>
                        <th> </th><th>825</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day = date("t",$month);</span> </td>
                      </tr><tr>
                        <th> </th><th>826</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>827</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day = mktime(12, 0, 0, $month, $day, $year);</span> </td>
                      </tr><tr>
                        <th> </th><th>828</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $countMatch = 0;</span> </td>
                      </tr><tr>
                        <th> </th><th>829</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while ($countMatch != abs($bysetpos)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>830</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* Does this day match a BYDAY value? */</span> </td>
                      </tr><tr>
                        <th> </th><th>831</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $thisDay = $day;</span> </td>
                      </tr><tr>
                        <th> </th><th>832</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $textDay = strtoupper(substr(date('D', $thisDay), 0, 2));</span> </td>
                      </tr><tr>
                        <th> </th><th>833</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (in_array($textDay, $byday)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>834</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $countMatch++;</span> </td>
                      </tr><tr>
                        <th> </th><th>835</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>836</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day = strtotime($next_day, $thisDay);</span> </td>
                      </tr><tr>
                        <th> </th><th>837</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>838</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recur_data[] = $thisDay;</span> </td>
                      </tr><tr>
                        <th> </th><th>839</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>840</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ((isset($byday)) &amp;&amp; (is_array($byday))) {</span> </td>
                      </tr><tr>
                        <th> </th><th>841</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $checkdate_time = mktime(0,0,0,$month,1,$year);</span> </td>
                      </tr><tr>
                        <th> </th><th>842</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach($byday as $byday_item) {</span> </td>
                      </tr><tr>
                        <th> </th><th>843</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $nth = (NULL === $byday_item[0] ? 0 : $byday_item[0]);</span> </td>
                      </tr><tr>
                        <th> </th><th>844</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day = $byday_item[1];</span> </td>
                      </tr><tr>
                        <th> </th><th>845</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $on_day = $this-&gt;two2threeCharDays($day);</span> </td>
                      </tr><tr>
                        <th> </th><th>846</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $on_day_num = $this-&gt;two2threeCharDays($day,false);</span> </td>
                      </tr><tr>
                        <th> </th><th>847</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($nth &lt; 0) {</span> </td>
                      </tr><tr>
                        <th> </th><th>848</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $nth = -$nth;</span> </td>
                      </tr><tr>
                        <th> </th><th>849</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $last_day_tmp = date('t',$checkdate_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>850</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $checkdate_time = strtotime(date('Y-m-'.$last_day_tmp, $checkdate_time));</span> </td>
                      </tr><tr>
                        <th> </th><th>851</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $last_tmp = (date('w',$checkdate_time) == $on_day_num) ? '' : 'last ';</span> </td>
                      </tr><tr>
                        <th> </th><th>852</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recur_data[] = strtotime($last_tmp.$on_day.' -'.$nth.' week', $checkdate_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>853</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>854</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recur_data[] = strtotime($on_day.' +'.$nth.' week', $checkdate_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>855</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>856</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>857</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (NULL !== $bymonthday) {</span> </td>
                      </tr><tr>
                        <th> </th><th>858</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($bymonthday as $day) {</span> </td>
                      </tr><tr>
                        <th> </th><th>859</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($day &lt; 0) $day = ((date('t', $next_range_time)) + ($day)) + 1;</span> </td>
                      </tr><tr>
                        <th> </th><th>860</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $year = date('Y', $next_range_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>861</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //$month = date('m', $next_range_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>862</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (checkdate($month,$day,$year)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>863</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_date_time = mktime(0,0,0,$month,$day,$year);</span> </td>
                      </tr><tr>
                        <th> </th><th>864</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recur_data[] = $next_date_time;</span> </td>
                      </tr><tr>
                        <th> </th><th>865</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>866</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>867</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>868</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day&nbsp; &nbsp; = date('d', $start_date_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>869</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recur_data[] = mktime(0,0,0,$month,$day,$year);</span> </td>
                      </tr><tr>
                        <th> </th><th>870</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //echo date('Ymd',$next_date_time).$summary.'&lt;br&gt;';</span> </td>
                      </tr><tr>
                        <th> </th><th>871</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>872</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //$recur_data[] = $next_date_time;</span> </td>
                      </tr><tr>
                        <th> </th><th>873</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>874</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset($byyearday)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>875</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($byyearday as $yearday) {</span> </td>
                      </tr><tr>
                        <th> </th><th>876</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ereg ('([-\+]{0,1})?([0-9]{1,3})', $yearday, $byyearday_arr);</span> </td>
                      </tr><tr>
                        <th> </th><th>877</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($byyearday_arr[1] == '-') {</span> </td>
                      </tr><tr>
                        <th> </th><th>878</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ydtime = mktime(0,0,0,12,31,$this_year);</span> </td>
                      </tr><tr>
                        <th> </th><th>879</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $yearnum = $byyearday_arr[2] - 1;</span> </td>
                      </tr><tr>
                        <th> </th><th>880</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_date_time = strtotime('-'.$yearnum.' days', $ydtime);</span> </td>
                      </tr><tr>
                        <th> </th><th>881</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>882</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ydtime = mktime(0,0,0,1,1,$this_year);</span> </td>
                      </tr><tr>
                        <th> </th><th>883</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $yearnum = $byyearday_arr[2] - 1;</span> </td>
                      </tr><tr>
                        <th> </th><th>884</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_date_time = strtotime('+'.$yearnum.' days', $ydtime);</span> </td>
                      </tr><tr>
                        <th> </th><th>885</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>886</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recur_data[] = $next_date_time;</span> </td>
                      </tr><tr>
                        <th> </th><th>887</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>888</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>889</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th> </th><th>890</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; default:</span> </td>
                      </tr><tr>
                        <th> </th><th>891</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // anything else we need to end the loop</span> </td>
                      </tr><tr>
                        <th> </th><th>892</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_range_time = $end_range_time_tmp + 100;</span> </td>
                      </tr><tr>
                        <th> </th><th>893</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $count_to = $count;</span> </td>
                      </tr><tr>
                        <th> </th><th>894</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } // switch</span> </td>
                      </tr><tr>
                        <th> </th><th>895</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>896</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $interval = 1;</span> </td>
                      </tr><tr>
                        <th> </th><th>897</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } // ! $diff % $number == 0</span> </td>
                      </tr><tr>
                        <th> </th><th>898</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_range_time = $this-&gt;mFrequencyClass-&gt;Increment($interval, $next_range_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>899</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>900</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // end the loop because we aren't going to write this event anyway</span> </td>
                      </tr><tr>
                        <th> </th><th>901</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $count_to = $count;</span> </td>
                      </tr><tr>
                        <th> </th><th>902</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } // ! $diff &lt; $count</span> </td>
                      </tr><tr>
                        <th> </th><th>903</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // use the same code to write the data instead of always changing it 5 times</span> </td>
                      </tr><tr>
                        <th> </th><th>904</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset($recur_data) &amp;&amp; is_array($recur_data)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>905</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach($recur_data as $recur_data_time) {</span> </td>
                      </tr><tr>
                        <th> </th><th>906</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recur_data_year = date('Y', $recur_data_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>907</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recur_data_month = date('m', $recur_data_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>908</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recur_data_day = date('d', $recur_data_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>909</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recur_data_date = $recur_data_year.$recur_data_month.$recur_data_day;</span> </td>
                      </tr><tr>
                        <th> </th><th>910</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>911</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (($recur_data_time &gt; $start_date_time) &amp;&amp; ($recur_data_time &lt;= $end_date_time) &amp;&amp; ($count_to !== $count) &amp;&amp; !in_array($recur_data_date, $except_dates)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>912</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset($allday_start) &amp;&amp; $allday_start != '') {</span> </td>
                      </tr><tr>
                        <th> </th><th>913</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start_time2 = $recur_data_time;</span> </td>
                      </tr><tr>
                        <th> </th><th>914</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $end_time2 = strtotime('+'.$diff_allday_days.' days', $recur_data_time);</span> </td>
                      </tr><tr>
                        <th> </th><th>915</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while ($start_time2 &lt; $end_time2) {</span> </td>
                      </tr><tr>
                        <th> </th><th>916</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start_date2 = date('Ymd', $start_time2);</span> </td>
                      </tr><tr>
                        <th> </th><th>917</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @todo figure out what this bit of code does.</span> </td>
                      </tr><tr>
                        <th> </th><th>918</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $master_array[$start_date2][('-1')] = $first_duration;</span> </td>
                      </tr><tr>
                        <th> </th><th>919</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start_time2 = strtotime('+1 day', $start_time2);</span> </td>
                      </tr><tr>
                        <th> </th><th>920</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>921</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>922</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start_unixtime_tmp = mktime($hour,$minute,$second,$recur_data_month,$recur_data_day,$recur_data_year);</span> </td>
                      </tr><tr>
                        <th> </th><th>923</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $end_unixtime_tmp = $start_unixtime_tmp + $first_duration;</span> </td>
                      </tr><tr>
                        <th> </th><th>924</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>925</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (($end_time &gt;= $bleed_time) &amp;&amp; ($bleed_check == '-1')) {</span> </td>
                      </tr><tr>
                        <th> </th><th>926</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start_tmp = strtotime(date('Ymd',$start_unixtime_tmp));</span> </td>
                      </tr><tr>
                        <th> </th><th>927</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $end_date_tmp = date('Ymd',$end_unixtime_tmp);</span> </td>
                      </tr><tr>
                        <th> </th><th>928</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while ($start_tmp &lt; $end_unixtime_tmp) {</span> </td>
                      </tr><tr>
                        <th> </th><th>929</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start_date_tmp = date('Ymd',$start_tmp);</span> </td>
                      </tr><tr>
                        <th> </th><th>930</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($start_date_tmp == $recur_data_year.$recur_data_month.$recur_data_day) {</span> </td>
                      </tr><tr>
                        <th> </th><th>931</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $time_tmp = $hour.$minute.$second;</span> </td>
                      </tr><tr>
                        <th> </th><th>932</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>933</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $time_tmp = '000000';</span> </td>
                      </tr><tr>
                        <th> </th><th>934</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>935</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($start_date_tmp == $end_date_tmp) {</span> </td>
                      </tr><tr>
                        <th> </th><th>936</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $end_time_tmp = $end_time;</span> </td>
                      </tr><tr>
                        <th> </th><th>937</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>938</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $end_time_tmp = '240000';</span> </td>
                      </tr><tr>
                        <th> </th><th>939</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>940</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>941</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Let's double check the until to not write past it</span> </td>
                      </tr><tr>
                        <th> </th><th>942</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $until_check = $start_date_tmp.$time_tmp;</span> </td>
                      </tr><tr>
                        <th> </th><th>943</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($abs_until &gt; $until_check) {</span> </td>
                      </tr><tr>
                        <th> </th><th>944</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $master_array[$start_date_tmp][$time_tmp] =&nbsp; $first_duration;</span> </td>
                      </tr><tr>
                        <th> </th><th>945</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //checkOverlap($start_date_tmp, $time_tmp, $uid);</span> </td>
                      </tr><tr>
                        <th> </th><th>946</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>947</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start_tmp = strtotime('+1 day',$start_tmp);</span> </td>
                      </tr><tr>
                        <th> </th><th>948</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>949</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>950</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($bleed_check == '-1') {</span> </td>
                      </tr><tr>
                        <th> </th><th>951</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $end_time_tmp1 = '240000';</span> </td>
                      </tr><tr>
                        <th> </th><th>952</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>953</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!isset($end_time_tmp1)) $end_time_tmp1 = $end_time;</span> </td>
                      </tr><tr>
                        <th> </th><th>954</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>955</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Let's double check the until to not write past it</span> </td>
                      </tr><tr>
                        <th> </th><th>956</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $until_check = $recur_data_date.$hour.$minute.$second;</span> </td>
                      </tr><tr>
                        <th> </th><th>957</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($abs_until &gt; $until_check) {</span> </td>
                      </tr><tr>
                        <th> </th><th>958</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $master_array[($recur_data_date)][($hour.$minute.$second)] = $first_duration;</span> </td>
                      </tr><tr>
                        <th> </th><th>959</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //checkOverlap($recur_data_date, ($hour.$minute), $uid);</span> </td>
                      </tr><tr>
                        <th> </th><th>960</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>961</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>962</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>963</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>964</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>965</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset($recur_data);</span> </td>
                      </tr><tr>
                        <th> </th><th>966</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>967</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>968</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>969</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $master_array;</span> </td>
                      </tr><tr>
                        <th> </th><th>970</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>971</th><td class="r"><span>}</span> </td>
                      </tr><tr>
                        <th> </th><th>972</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>973</th><td class="r"><span>/// Recurrence set resolution class.</span> </td>
                      </tr><tr>
                        <th> </th><th>974</th><td class="r"><span>/**</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>975</th><td class="r"><span>&nbsp;* @todo Do caching of results, clearing on changes.</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>37</th><th>976</th><td class="l"><span>&nbsp;*/</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>38</th><th> </th><td class="l"><span>class Recurrence<del>Rule</del></span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>977</th><td class="r"><span>class Recurrence<ins>Set</ins></span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>39</th><th>978</th><td class="l"><span>{</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>40</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; // Min/max date</span> </td>
                      </tr><tr>
                        <th>41</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// timestamp/bool Minimum time of occurrence.</span> </td>
                      </tr><tr>
                        <th>42</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>43</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* A value of FALSE indicates that there is no minimum.</span> </td>
                      </tr><tr>
                        <th>44</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @note Default value is FALSE.</span> </td>
                      </tr><tr>
                        <th>45</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>46</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; private $mMinDate;</span> </td>
                      </tr><tr>
                        <th>47</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>48</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// timestamp/bool Maximum time of occurrence.</span> </td>
                      </tr><tr>
                        <th>49</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>50</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* A value of FALSE indicates that there is no maximum.</span> </td>
                      </tr><tr>
                        <th>51</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @note Default value is FALSE.</span> </td>
                      </tr><tr>
                        <th>52</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>53</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; private $mMaxDate;</span> </td>
                      </tr><tr>
                        <th>54</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>55</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>56</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; // Year Filter : mDateMethod=Academic =&gt; Academic years</span> </td>
                      </tr><tr>
                        <th>57</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// integer Interval of years.</span> </td>
                      </tr><tr>
                        <th>58</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>59</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* e.g. An interval of 4 might be appropriate for leap days.</span> </td>
                      </tr><tr>
                        <th>60</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @note Default value is 1.</span> </td>
                      </tr><tr>
                        <th>61</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>62</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; private $mYearInterval;</span> </td>
                      </tr><tr>
                        <th>63</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>64</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// An example of a valid year.</span> </td>
                      </tr><tr>
                        <th>65</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>66</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @note Default value is 0.</span> </td>
                      </tr><tr>
                        <th>67</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>68</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; private $mYearOffset;</span> </td>
                      </tr><tr>
                        <th>69</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>70</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>71</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; // Date Filter</span> </td>
                      </tr><tr>
                        <th>72</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Method to use when calculating bases.</span> </td>
                      </tr><tr>
                        <th>73</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>74</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Values:</span> </td>
                      </tr><tr>
                        <th>75</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 0 (DayMonth: Use a set of months and a 'day of month' number for the base).</span> </td>
                      </tr><tr>
                        <th>76</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 1 (Academic: Use a term number and a set of weeks in that term that are used as bases).</span> </td>
                      </tr><tr>
                        <th>77</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 2 (Easter: Use easter sunday as the base each year).</span> </td>
                      </tr><tr>
                        <th>78</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 3 (Weekly: Use easter sunday as the base each year).</span> </td>
                      </tr><tr>
                        <th>79</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>80</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @note Default value is 0 (DayMonth).</span> </td>
                      </tr><tr>
                        <th>81</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>82</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; private $mDateMethod;</span> </td>
                      </tr><tr>
                        <th>83</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>84</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// When in mode DayMonth, array whether each month is valid.</span> </td>
                      </tr><tr>
                        <th>85</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>86</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Array of bools indexed 1..12 for the months:</span> </td>
                      </tr><tr>
                        <th>87</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - TRUE (Day @a $mDayDmDate of the month is to be a base).</span> </td>
                      </tr><tr>
                        <th>88</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - FALSE (This month doesn't have a base).</span> </td>
                      </tr><tr>
                        <th>89</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>90</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* This can be stored in a bitvector (integer) in the database.</span> </td>
                      </tr><tr>
                        <th>91</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @note Defaults to all FALSE.</span> </td>
                      </tr><tr>
                        <th>92</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>93</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>94</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; private $mDateDmMonths;</span> </td>
                      </tr><tr>
                        <th>95</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>96</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// When in mode DayMonth, day of month to use as base.</span> </td>
                      </tr><tr>
                        <th>97</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>98</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Integer day of month to use as the base for valid months.</span> </td>
                      </tr><tr>
                        <th>99</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @note Defaults to 1.</span> </td>
                      </tr><tr>
                        <th>100</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>101</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; private $mDateDmDate;</span> </td>
                      </tr><tr>
                        <th>102</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>103</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// When in mode Academic, term number of weeks to use as bases.</span> </td>
                      </tr><tr>
                        <th>104</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>105</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Integer term number as used by the Academic_calendar library:</span> </td>
                      </tr><tr>
                        <th>106</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 0 (Autumn term).</span> </td>
                      </tr><tr>
                        <th>107</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 1 (Christmas holiday).</span> </td>
                      </tr><tr>
                        <th>108</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 2 (Spring term).</span> </td>
                      </tr><tr>
                        <th>109</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 3 (Easter holiday).</span> </td>
                      </tr><tr>
                        <th>110</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 4 (Summer term).</span> </td>
                      </tr><tr>
                        <th>111</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 5 (Summer holiday).</span> </td>
                      </tr><tr>
                        <th>112</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>113</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @note Defaults to 0 (Autumn term).</span> </td>
                      </tr><tr>
                        <th>114</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>115</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; private $mDateAcTerm;&nbsp; &nbsp;// : int (0-5)</span> </td>
                      </tr><tr>
                        <th>116</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>117</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// When in mode Academic, which week numbers to use as bases.</span> </td>
                      </tr><tr>
                        <th>118</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>119</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Array of bools indexed -15..16:</span> </td>
                      </tr><tr>
                        <th>120</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - TRUE (Use the start of the week of the term as a base).</span> </td>
                      </tr><tr>
                        <th>121</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - FALSE (Don't use the start of the week of the term as a base).</span> </td>
                      </tr><tr>
                        <th>122</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>123</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Index 1 is the first week of the term, so the negative indicies represent</span> </td>
                      </tr><tr>
                        <th>124</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; the last weeks of the previous term.</span> </td>
                      </tr><tr>
                        <th>125</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>126</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* This can be stored in a bitvector (integer) in the database.</span> </td>
                      </tr><tr>
                        <th>127</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @note Defaults to all FALSE.</span> </td>
                      </tr><tr>
                        <th>128</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>129</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; private $mDateAcWeeks;</span> </td>
                      </tr><tr>
                        <th>130</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>131</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>132</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; // Day Filter</span> </td>
                      </tr><tr>
                        <th>133</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Method to use when calculating days from base.</span> </td>
                      </tr><tr>
                        <th>134</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>135</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Values:</span> </td>
                      </tr><tr>
                        <th>136</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 0 (Next enabled day on or after base. 1 result per base).</span> </td>
                      </tr><tr>
                        <th>137</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 1 (Next enabled days on and after base. |mDayDays| results per base).</span> </td>
                      </tr><tr>
                        <th>138</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 2 (Closest enabled day to base. 1 result per base).</span> </td>
                      </tr><tr>
                        <th>139</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 3 (Closest enabled days to base. |mDayDays| results per base).</span> </td>
                      </tr><tr>
                        <th>140</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>141</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @note Default value is 1 (Next enabled days on and after base).</span> </td>
                      </tr><tr>
                        <th>142</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>143</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; private $mDayMethod;</span> </td>
                      </tr><tr>
                        <th>144</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>145</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Which days of the week to use near the base.</span> </td>
                      </tr><tr>
                        <th>146</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>147</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Array of bools indexed 0..6 (sunday = 0 etc.)</span> </td>
                      </tr><tr>
                        <th>148</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - TRUE (Use this day near the base).</span> </td>
                      </tr><tr>
                        <th>149</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - FALSE (Don't use this day near the base).</span> </td>
                      </tr><tr>
                        <th>150</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>151</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* This can be stored in a bitvector (integer) in the database.</span> </td>
                      </tr><tr>
                        <th>152</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @note Defaults to all TRUE.</span> </td>
                      </tr><tr>
                        <th>153</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>154</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; private $mDayDays;</span> </td>
                      </tr><tr>
                        <th>155</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>156</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// The number of weeks past the base to use.</span> </td>
                      </tr><tr>
                        <th>157</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>158</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* For example:</span> </td>
                      </tr><tr>
                        <th>159</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - If @a $mDayDays [ THURSDAY ] = TRUE and @a $mDayWeek = 0, the results</span> </td>
                      </tr><tr>
                        <th>160</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; would be the first thursday after each base.</span> </td>
                      </tr><tr>
                        <th>161</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - If @a $mDayDays [ TUESDAY ] = TRUE and @a $mDayWeek = 3, the results</span> </td>
                      </tr><tr>
                        <th>162</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; would be the forth tuesday after each base.</span> </td>
                      </tr><tr>
                        <th>163</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - If @a $mDayDays [ SUNDAY ] = TRUE and @a $mDayWeek = -1, the results</span> </td>
                      </tr><tr>
                        <th>164</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; would be the last sunday before each base.</span> </td>
                      </tr><tr>
                        <th>165</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>166</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* If the result is after the end of the month and @a $mDayWeek != 0 then</span> </td>
                      </tr><tr>
                        <th>167</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; the result is discarded (This is usually for finding the nth certain day</span> </td>
                      </tr><tr>
                        <th>168</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; of particular months such as for when the clocks change).</span> </td>
                      </tr><tr>
                        <th>169</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @note Defaults to 0.</span> </td>
                      </tr><tr>
                        <th>170</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>171</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; private $mDayWeek;</span> </td>
                      </tr><tr>
                        <th>172</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>173</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>174</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; // Offset</span> </td>
                      </tr><tr>
                        <th>175</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Number of days to offset the result.</span> </td>
                      </tr><tr>
                        <th>176</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; private $mOffsetDays;</span> </td>
                      </tr><tr>
                        <th>177</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Number of minutes to offset the result.</span> </td>
                      </tr><tr>
                        <th>178</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; private $mOffsetMins;</span> </td>
                      </tr><tr>
                        <th>179</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>180</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Default constructor.</span> </td>
                      </tr><tr>
                        <th>181</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>182</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Initialises the recurrence rule to no dates.</span> </td>
                      </tr><tr>
                        <th>183</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $ArrayData array Initialisation data.</span> </td>
                      </tr><tr>
                        <th>184</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>185</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function __construct($ArrayData = FALSE)</span> </td>
                      </tr><tr>
                        <th>186</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>187</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_array($ArrayData)) {</span> </td>
                      </tr><tr>
                        <th>188</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $translation = array(</span> </td>
                      </tr><tr>
                        <th>189</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'DayMonth' =&gt; 0,</span> </td>
                      </tr><tr>
                        <th>190</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'Academic' =&gt; 1,</span> </td>
                      </tr><tr>
                        <th>191</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'Easter' =&gt; 2,</span> </td>
                      </tr><tr>
                        <th>192</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th>193</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre ArrayData['recurrence_rule_date_method'] in {'DayMonth','Academic','Easter'}</span> </td>
                      </tr><tr>
                        <th>194</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('array_key_exists($ArrayData[\'recurrence_rule_date_method\'], $translation)');</span> </td>
                      </tr><tr>
                        <th>195</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>196</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mMinDate = (NULL === $ArrayData['recurrence_rule_min_date'])</span> </td>
                      </tr><tr>
                        <th>197</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ? FALSE</span> </td>
                      </tr><tr>
                        <th>198</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : (int)$ArrayData['recurrence_rule_min_date'];</span> </td>
                      </tr><tr>
                        <th>199</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mMaxDate = (NULL === $ArrayData['recurrence_rule_max_date'])</span> </td>
                      </tr><tr>
                        <th>200</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ? FALSE</span> </td>
                      </tr><tr>
                        <th>201</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : (int)$ArrayData['recurrence_rule_max_date'];</span> </td>
                      </tr><tr>
                        <th>202</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mYearInterval&nbsp; &nbsp; = (int)$ArrayData['recurrence_rule_year_interval'];</span> </td>
                      </tr><tr>
                        <th>203</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mYearOffset&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = (int)$ArrayData['recurrence_rule_year_offset'];</span> </td>
                      </tr><tr>
                        <th>204</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateMethod&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = $translation[$ArrayData['recurrence_rule_date_method']];</span> </td>
                      </tr><tr>
                        <th>205</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>206</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $months = (int)$ArrayData['recurrence_rule_daymonth_months'];</span> </td>
                      </tr><tr>
                        <th>207</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateDmMonths = array();</span> </td>
                      </tr><tr>
                        <th>208</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ($bit_number = 1; $bit_number &lt;= 12; ++$bit_number) {</span> </td>
                      </tr><tr>
                        <th>209</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateDmMonths[$bit_number] = (($months % 2) != 0);</span> </td>
                      </tr><tr>
                        <th>210</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $months = (int)($months / 2);</span> </td>
                      </tr><tr>
                        <th>211</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>212</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>213</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateDmDate&nbsp; &nbsp; &nbsp; = (int)$ArrayData['recurrence_rule_daymonth_date'];</span> </td>
                      </tr><tr>
                        <th>214</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateAcTerm&nbsp; &nbsp; &nbsp; = (int)$ArrayData['recurrence_rule_academic_term'];</span> </td>
                      </tr><tr>
                        <th>215</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>216</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $weeks = (int)$ArrayData['recurrence_rule_academic_weeks'];</span> </td>
                      </tr><tr>
                        <th>217</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateAcWeeks&nbsp; &nbsp; &nbsp;= array();</span> </td>
                      </tr><tr>
                        <th>218</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ($bit_number = -15; $bit_number &lt;= 16; ++$bit_number) {</span> </td>
                      </tr><tr>
                        <th>219</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateAcWeeks[$bit_number] = (($weeks % 2) != 0);</span> </td>
                      </tr><tr>
                        <th>220</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $weeks = (int)($weeks / 2);</span> </td>
                      </tr><tr>
                        <th>221</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>222</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>223</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDayMethod&nbsp; &nbsp; &nbsp; &nbsp;= (int)$ArrayData['recurrence_rule_day_method'];</span> </td>
                      </tr><tr>
                        <th>224</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>225</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days = (int)$ArrayData['recurrence_rule_day_days'];</span> </td>
                      </tr><tr>
                        <th>226</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDayDays = array();</span> </td>
                      </tr><tr>
                        <th>227</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ($bit_number = 0; $bit_number &lt; 7; ++$bit_number) {</span> </td>
                      </tr><tr>
                        <th>228</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDayDays[$bit_number] = (($days % 2) != 0);</span> </td>
                      </tr><tr>
                        <th>229</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days = (int)($days / 2);</span> </td>
                      </tr><tr>
                        <th>230</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>231</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>232</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDayWeek&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= (int)$ArrayData['recurrence_rule_day_week'];</span> </td>
                      </tr><tr>
                        <th>233</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mOffsetDays&nbsp; &nbsp; &nbsp; = (int)$ArrayData['recurrence_rule_offset_days'];</span> </td>
                      </tr><tr>
                        <th>234</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mOffsetMins&nbsp; &nbsp; &nbsp; = (int)$ArrayData['recurrence_rule_offset_minutes'];</span> </td>
                      </tr><tr>
                        <th>235</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>236</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>237</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th>238</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// - No min or max.</span> </td>
                      </tr><tr>
                        <th>239</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mMinDate = $this-&gt;mMaxDate = FALSE;</span> </td>
                      </tr><tr>
                        <th>240</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>241</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// - Every year.</span> </td>
                      </tr><tr>
                        <th>242</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mYearInterval = 1;</span> </td>
                      </tr><tr>
                        <th>243</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mYearOffset = 0;</span> </td>
                      </tr><tr>
                        <th>244</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>245</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// - First day of no months.</span> </td>
                      </tr><tr>
                        <th>246</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateMethod = 0;</span> </td>
                      </tr><tr>
                        <th>247</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateDmMonths = array();</span> </td>
                      </tr><tr>
                        <th>248</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;ClearMonths();</span> </td>
                      </tr><tr>
                        <th>249</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;DayOfMonth(1);</span> </td>
                      </tr><tr>
                        <th>250</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// - No weeks of the autumn term.</span> </td>
                      </tr><tr>
                        <th>251</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateAcTerm = 0;</span> </td>
                      </tr><tr>
                        <th>252</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateAcWeeks = array();</span> </td>
                      </tr><tr>
                        <th>253</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;ClearAcademicWeeks();</span> </td>
                      </tr><tr>
                        <th>254</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>255</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// - No days of the week (straight base).</span> </td>
                      </tr><tr>
                        <th>256</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDayDays = array();</span> </td>
                      </tr><tr>
                        <th>257</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;UseNextEnabledDays();</span> </td>
                      </tr><tr>
                        <th>258</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;AnyDayOfWeek();</span> </td>
                      </tr><tr>
                        <th>259</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;SetWeekOffset();</span> </td>
                      </tr><tr>
                        <th>260</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>261</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// - No offset.</span> </td>
                      </tr><tr>
                        <th>262</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;SetOffsetDays();</span> </td>
                      </tr><tr>
                        <th>263</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;Time();</span> </td>
                      </tr><tr>
                        <th>264</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>265</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>266</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>267</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Generate an array from the rule.</span> </td>
                      </tr><tr>
                        <th>268</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>269</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array Data as inputtable into the default constructor.</span> </td>
                      </tr><tr>
                        <th>270</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>271</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function ToArray()</span> </td>
                      </tr><tr>
                        <th>272</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>273</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ArrayData = array();</span> </td>
                      </tr><tr>
                        <th>274</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>275</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $translation = array(</span> </td>
                      </tr><tr>
                        <th>276</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 =&gt; 'DayMonth',</span> </td>
                      </tr><tr>
                        <th>277</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 =&gt; 'Academic',</span> </td>
                      </tr><tr>
                        <th>278</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2 =&gt; 'Easter',</span> </td>
                      </tr><tr>
                        <th>279</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th>280</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre ArrayData['recurrence_rule_date_method'] in {'DayMonth','Academic','Easter'}</span> </td>
                      </tr><tr>
                        <th>281</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('array_key_exists($this-&gt;mDateMethod, $translation)');</span> </td>
                      </tr><tr>
                        <th>282</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>283</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ArrayData['recurrence_rule_min_date']&nbsp; = (FALSE === $this-&gt;mMinDate)</span> </td>
                      </tr><tr>
                        <th>284</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ? NULL</span> </td>
                      </tr><tr>
                        <th>285</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : $this-&gt;mMinDate;</span> </td>
                      </tr><tr>
                        <th>286</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ArrayData['recurrence_rule_max_date']&nbsp; = (FALSE === $this-&gt;mMaxDate)</span> </td>
                      </tr><tr>
                        <th>287</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ? NULL</span> </td>
                      </tr><tr>
                        <th>288</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : $this-&gt;mMaxDate;</span> </td>
                      </tr><tr>
                        <th>289</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ArrayData['recurrence_rule_year_interval']&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= $this-&gt;mYearInterval;</span> </td>
                      </tr><tr>
                        <th>290</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ArrayData['recurrence_rule_year_offset']&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= $this-&gt;mYearOffset;</span> </td>
                      </tr><tr>
                        <th>291</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>292</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ArrayData['recurrence_rule_date_method']&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= $translation[$this-&gt;mDateMethod];</span> </td>
                      </tr><tr>
                        <th>293</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>294</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ArrayData['recurrence_rule_daymonth_months']&nbsp; &nbsp;= 0;</span> </td>
                      </tr><tr>
                        <th>295</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $factor = 1;</span> </td>
                      </tr><tr>
                        <th>296</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ($bit_number = 1; $bit_number &lt;= 12; ++$bit_number) {</span> </td>
                      </tr><tr>
                        <th>297</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;mDateDmMonths[$bit_number]) {</span> </td>
                      </tr><tr>
                        <th>298</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ArrayData['recurrence_rule_daymonth_months'] |= $factor;</span> </td>
                      </tr><tr>
                        <th>299</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>300</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $factor *= 2;</span> </td>
                      </tr><tr>
                        <th>301</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>302</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>303</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ArrayData['recurrence_rule_daymonth_date']&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= $this-&gt;mDateDmDate;</span> </td>
                      </tr><tr>
                        <th>304</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ArrayData['recurrence_rule_academic_term']&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= $this-&gt;mDateAcTerm;</span> </td>
                      </tr><tr>
                        <th>305</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>306</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ArrayData['recurrence_rule_academic_weeks']&nbsp; &nbsp; = 0;</span> </td>
                      </tr><tr>
                        <th>307</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $factor = 1;</span> </td>
                      </tr><tr>
                        <th>308</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ($bit_number = -15; $bit_number &lt;= 16; ++$bit_number) {</span> </td>
                      </tr><tr>
                        <th>309</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;mDateAcWeeks[$bit_number]) {</span> </td>
                      </tr><tr>
                        <th>310</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ArrayData['recurrence_rule_academic_weeks'] |= $factor;</span> </td>
                      </tr><tr>
                        <th>311</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>312</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $factor *= 2;</span> </td>
                      </tr><tr>
                        <th>313</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>314</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>315</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ArrayData['recurrence_rule_day_method']&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = $this-&gt;mDayMethod;</span> </td>
                      </tr><tr>
                        <th>316</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>317</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ArrayData['recurrence_rule_day_days']&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 0;</span> </td>
                      </tr><tr>
                        <th>318</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $factor = 1;</span> </td>
                      </tr><tr>
                        <th>319</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ($bit_number = 0; $bit_number &lt; 7; ++$bit_number) {</span> </td>
                      </tr><tr>
                        <th>320</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;mDayDays[$bit_number]) {</span> </td>
                      </tr><tr>
                        <th>321</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ArrayData['recurrence_rule_day_days'] |= $factor;</span> </td>
                      </tr><tr>
                        <th>322</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>323</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $factor *= 2;</span> </td>
                      </tr><tr>
                        <th>324</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>325</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>326</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ArrayData['recurrence_rule_day_week']&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = $this-&gt;mDayWeek;</span> </td>
                      </tr><tr>
                        <th>327</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ArrayData['recurrence_rule_offset_days']&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= $this-&gt;mOffsetDays;</span> </td>
                      </tr><tr>
                        <th>328</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ArrayData['recurrence_rule_offset_minutes']&nbsp; &nbsp; = $this-&gt;mOffsetMins;</span> </td>
                      </tr><tr>
                        <th>329</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>330</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $ArrayData;</span> </td>
                      </tr><tr>
                        <th>331</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>332</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>333</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Turn into a human readable string</span> </td>
                      </tr><tr>
                        <th>334</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>335</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return string Human readable description.</span> </td>
                      </tr><tr>
                        <th>336</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>337</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function ToString()</span> </td>
                      </tr><tr>
                        <th>338</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>339</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // time , offset, base, years</span> </td>
                      </tr><tr>
                        <th>340</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $offset = '';</span> </td>
                      </tr><tr>
                        <th>341</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;mOffsetMins &gt; 60) {</span> </td>
                      </tr><tr>
                        <th>342</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $offset .= (int)($this-&gt;mOffsetMins/60) . ' hours';</span> </td>
                      </tr><tr>
                        <th>343</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;mOffsetMins%60 &gt; 0) {</span> </td>
                      </tr><tr>
                        <th>344</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $offset .= ' and ' . ($this-&gt;mOffsetMins%60) . ' minutes';</span> </td>
                      </tr><tr>
                        <th>345</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>346</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $offset .= ' past midnight, ';</span> </td>
                      </tr><tr>
                        <th>347</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif ($this-&gt;mOffsetMins &gt; 0) {</span> </td>
                      </tr><tr>
                        <th>348</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $offset .= $this-&gt;mOffsetMins . ' minutes past midnight, ';</span> </td>
                      </tr><tr>
                        <th>349</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>350</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;mOffsetDays &gt; 0) {</span> </td>
                      </tr><tr>
                        <th>351</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $offset .= $this-&gt;mOffsetDays . ' day'.(($this-&gt;mOffsetDays &gt; 1)?'s':'').' after ';</span> </td>
                      </tr><tr>
                        <th>352</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif ($this-&gt;mOffsetDays &lt; 0) {</span> </td>
                      </tr><tr>
                        <th>353</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $offset .= (-$this-&gt;mOffsetDays) . ' day'.(($this-&gt;mOffsetDays &lt; -1)?'s':'').' before ';</span> </td>
                      </tr><tr>
                        <th>354</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>355</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $week_offset = '';</span> </td>
                      </tr><tr>
                        <th>356</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;mDayWeek &gt; 0) {</span> </td>
                      </tr><tr>
                        <th>357</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $week_offset .= $this-&gt;mDayWeek . ' week'.(($this-&gt;mDayWeek &gt; 1)?'s':'').' after ';</span> </td>
                      </tr><tr>
                        <th>358</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif ($this-&gt;mDayWeek &lt; 0) {</span> </td>
                      </tr><tr>
                        <th>359</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $week_offset .= (-$this-&gt;mDayWeek) . ' week'.(($this-&gt;mDayWeek &lt; -1)?'s':'').' before ';</span> </td>
                      </tr><tr>
                        <th>360</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>361</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>362</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days_of_week = array();</span> </td>
                      </tr><tr>
                        <th>363</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; static $week_days = array(</span> </td>
                      </tr><tr>
                        <th>364</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 =&gt; 'Sunday',</span> </td>
                      </tr><tr>
                        <th>365</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 =&gt; 'Monday',</span> </td>
                      </tr><tr>
                        <th>366</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2 =&gt; 'Tuesday',</span> </td>
                      </tr><tr>
                        <th>367</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3 =&gt; 'Wednesday',</span> </td>
                      </tr><tr>
                        <th>368</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4 =&gt; 'Thurday',</span> </td>
                      </tr><tr>
                        <th>369</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5 =&gt; 'Friday',</span> </td>
                      </tr><tr>
                        <th>370</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6 =&gt; 'Saturday',</span> </td>
                      </tr><tr>
                        <th>371</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th>372</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($this-&gt;mDayDays as $day_number =&gt; $enable) {</span> </td>
                      </tr><tr>
                        <th>373</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($enable) {</span> </td>
                      </tr><tr>
                        <th>374</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days_of_week[] = $week_days[$day_number];</span> </td>
                      </tr><tr>
                        <th>375</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>376</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>377</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $all_days = FALSE;</span> </td>
                      </tr><tr>
                        <th>378</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (empty($days_of_week)) {</span> </td>
                      </tr><tr>
                        <th>379</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days_or = $days_and = 'no days of the week';</span> </td>
                      </tr><tr>
                        <th>380</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (count($days_of_week) === 7) {</span> </td>
                      </tr><tr>
                        <th>381</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $all_days = TRUE;</span> </td>
                      </tr><tr>
                        <th>382</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days_or = 'day';</span> </td>
                      </tr><tr>
                        <th>383</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days_and = 'days';</span> </td>
                      </tr><tr>
                        <th>384</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th>385</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days_or = implode(' or ',$days_of_week);</span> </td>
                      </tr><tr>
                        <th>386</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days_and = implode(' and ',$days_of_week);</span> </td>
                      </tr><tr>
                        <th>387</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>388</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_days = '';</span> </td>
                      </tr><tr>
                        <th>389</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; switch ($this-&gt;mDayMethod) {</span> </td>
                      </tr><tr>
                        <th>390</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 0: // Next enabled day on or after base. 1 result per base</span> </td>
                      </tr><tr>
                        <th>391</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($all_days) {</span> </td>
                      </tr><tr>
                        <th>392</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days = '';</span> </td>
                      </tr><tr>
                        <th>393</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_days = 'day';</span> </td>
                      </tr><tr>
                        <th>394</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th>395</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days = 'the next '.$days_or.' on or after ';</span> </td>
                      </tr><tr>
                        <th>396</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_days = $days_or;</span> </td>
                      </tr><tr>
                        <th>397</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>398</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th>399</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>400</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 1: // Next enabled days on and after base. |mDayDays| results per base</span> </td>
                      </tr><tr>
                        <th>401</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days = 'the next '.$days_and.' on or after ';</span> </td>
                      </tr><tr>
                        <th>402</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $next_days = $days_or;</span> </td>
                      </tr><tr>
                        <th>403</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th>404</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>405</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 2: // Closest enabled day to base. 1 result per base</span> </td>
                      </tr><tr>
                        <th>406</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($all_days) {</span> </td>
                      </tr><tr>
                        <th>407</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days = '';</span> </td>
                      </tr><tr>
                        <th>408</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th>409</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days = 'the closest '.$days_or.' to ';</span> </td>
                      </tr><tr>
                        <th>410</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>411</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th>412</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>413</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 3: // Closest enabled days to base. |mDayDays| results per base</span> </td>
                      </tr><tr>
                        <th>414</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days = 'the closest '.$days_and.' to ';</span> </td>
                      </tr><tr>
                        <th>415</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th>416</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>417</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>418</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $base = '';</span> </td>
                      </tr><tr>
                        <th>419</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (0 === $this-&gt;mDateMethod) {</span> </td>
                      </tr><tr>
                        <th>420</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // DayMonth</span> </td>
                      </tr><tr>
                        <th>421</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $month_offset = 0;</span> </td>
                      </tr><tr>
                        <th>422</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;mDateDmDate === 1) {</span> </td>
                      </tr><tr>
                        <th>423</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;mDayWeek &gt;= 0) {</span> </td>
                      </tr><tr>
                        <th>424</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $base = 'the '.date('jS', mktime(0,0,0,1,($this-&gt;mDayWeek+1)))</span> </td>
                      </tr><tr>
                        <th>425</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; . ' '.$next_days.' of ';</span> </td>
                      </tr><tr>
                        <th>426</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th>427</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (-1 === $this-&gt;mDayWeek) {</span> </td>
                      </tr><tr>
                        <th>428</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ith = '';</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>979</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// timestamp Start time of first occurrence.</span> </td>
                      </tr><tr>
                        <th> </th><th>980</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mStart = NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>981</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// timestamp End time of first occurrence.</span> </td>
                      </tr><tr>
                        <th> </th><th>982</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mEnd = NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>983</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array['YYYYMMDD' =&gt; array[{'HHMMSS',NULL} =&gt; {duration,NULL}] ] Dates to include.</span> </td>
                      </tr><tr>
                        <th> </th><th>984</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mRDates&nbsp; = array();</span> </td>
                      </tr><tr>
                        <th> </th><th>985</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array[CalendarRecurRule] Recurrence rules to include.</span> </td>
                      </tr><tr>
                        <th> </th><th>986</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mRRules&nbsp; = array();</span> </td>
                      </tr><tr>
                        <th> </th><th>987</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array['YYYYMMDD' =&gt; array[{'HHMMSS',NULL} =&gt; {duration,NULL}] ] Dates to exclude.</span> </td>
                      </tr><tr>
                        <th> </th><th>988</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mExDates = array();</span> </td>
                      </tr><tr>
                        <th> </th><th>989</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// array[CalendarRecurRule] Recurrence rules to exclude.</span> </td>
                      </tr><tr>
                        <th> </th><th>990</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; protected $mExRules = array();</span> </td>
                      </tr><tr>
                        <th> </th><th>991</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>992</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Find whether the start occurrence has been set yet.</span> </td>
                      </tr><tr>
                        <th> </th><th>993</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>994</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return bool Whether @a $mStart has been set yet.</span> </td>
                      </tr><tr>
                        <th> </th><th>995</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>996</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function IsStartSet()</span> </td>
                      </tr><tr>
                        <th> </th><th>997</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>998</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return NULL !== $this-&gt;mStart;</span> </td>
                      </tr><tr>
                        <th> </th><th>999</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1000</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1001</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the first occurrence by start and end.</span> </td>
                      </tr><tr>
                        <th> </th><th>1002</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>1003</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Start timestamp Start time.</span> </td>
                      </tr><tr>
                        <th> </th><th>1004</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $End timestamp,NULL End time.</span> </td>
                      </tr><tr>
                        <th> </th><th>1005</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>1006</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetStartEnd($Start, $End)</span> </td>
                      </tr><tr>
                        <th> </th><th>1007</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>1008</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre $End IS NULL OR $Start &lt;= $End</span> </td>
                      </tr><tr>
                        <th> </th><th>1009</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('NULL === $End || $Start &lt;= $End');</span> </td>
                      </tr><tr>
                        <th> </th><th>1010</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mStart = $Start;</span> </td>
                      </tr><tr>
                        <th> </th><th>1011</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mEnd = $End;</span> </td>
                      </tr><tr>
                        <th> </th><th>1012</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1013</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1014</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the first occurrence by start and duration.</span> </td>
                      </tr><tr>
                        <th> </th><th>1015</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>1016</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Start timestamp Start time.</span> </td>
                      </tr><tr>
                        <th> </th><th>1017</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Duration int Duration measured in seconds.</span> </td>
                      </tr><tr>
                        <th> </th><th>1018</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>1019</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetStartDuration($Start, $Duration)</span> </td>
                      </tr><tr>
                        <th> </th><th>1020</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>1021</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mStart = $Start;</span> </td>
                      </tr><tr>
                        <th> </th><th>1022</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mEnd = $Start + $Duration;</span> </td>
                      </tr><tr>
                        <th> </th><th>1023</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1024</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1025</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Retrieve the start and end of the first occurrence.</span> </td>
                      </tr><tr>
                        <th> </th><th>1026</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>1027</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array(timestamp,timestamp) Start and end timestamp.</span> </td>
                      </tr><tr>
                        <th> </th><th>1028</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>1029</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function GetStartEnd()</span> </td>
                      </tr><tr>
                        <th> </th><th>1030</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>1031</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return array($this-&gt;mStart, $this-&gt;mEnd);</span> </td>
                      </tr><tr>
                        <th> </th><th>1032</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1033</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1034</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the recur data from an array.</span> </td>
                      </tr><tr>
                        <th> </th><th>1035</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>1036</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Data array</span> </td>
                      </tr><tr>
                        <th> </th><th>1037</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - rdates array['YYYYMMDD' =&gt; array[{'HHMMSS',NULL} =&gt; {duration,NULL}] ]</span> </td>
                      </tr><tr>
                        <th> </th><th>1038</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - rrules array[CalendarRecurRule]</span> </td>
                      </tr><tr>
                        <th> </th><th>1039</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - exdates array['YYYYMMDD' =&gt; array[{'HHMMSS',NULL} =&gt; {duration,NULL}] ]</span> </td>
                      </tr><tr>
                        <th> </th><th>1040</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - exrules array[CalendarRecurRule]</span> </td>
                      </tr><tr>
                        <th> </th><th>1041</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>1042</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetRecurData($Data)</span> </td>
                      </tr><tr>
                        <th> </th><th>1043</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>1044</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; list($this-&gt;mRDates, $this-&gt;mRRules, $this-&gt;mExDates, $this-&gt;mExRules)</span> </td>
                      </tr><tr>
                        <th> </th><th>1045</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = $Data;</span> </td>
                      </tr><tr>
                        <th> </th><th>1046</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1047</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1048</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Get an array of recurrence dates.</span> </td>
                      </tr><tr>
                        <th> </th><th>1049</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>1050</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array Results, each with the following:</span> </td>
                      </tr><tr>
                        <th> </th><th>1051</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 'start' timestamp</span> </td>
                      </tr><tr>
                        <th> </th><th>1052</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 'time_associated' bool</span> </td>
                      </tr><tr>
                        <th> </th><th>1053</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 'duration' int Measured in seconds</span> </td>
                      </tr><tr>
                        <th> </th><th>1054</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 'exclude' bool</span> </td>
                      </tr><tr>
                        <th> </th><th>1055</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>1056</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function GetDatesArray()</span> </td>
                      </tr><tr>
                        <th> </th><th>1057</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>1058</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $results = array();</span> </td>
                      </tr><tr>
                        <th> </th><th>1059</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (array('mRDates' =&gt; FALSE, 'mExDates' =&gt; TRUE) as $field =&gt; $exclude) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1060</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($this-&gt;$field as $date =&gt; $times) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1061</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($times as $time =&gt; $duration) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1062</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($time_associated = NULL !== $time) {</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1063</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start = strtotime($date.' '.$time);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>429</th><th>1064</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>430</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $<del>ith = date('jS', mktime(0,0,0,1,(-$this-&gt;mDayWeek))</del>);</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1065</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $<ins>start = strtotime($date</ins>);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>431</th><th>1066</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>432</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $base = 'the '.$ith.' last '.$next_days.' of ';</span> </td>
                      </tr><tr>
                        <th>433</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $month_offset = -1;</span> </td>
                      </tr><tr>
                        <th>434</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>435</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Week offset written here now</span> </td>
                      </tr><tr>
                        <th>436</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $week_offset = '';</span> </td>
                      </tr><tr>
                        <th>437</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $days = '';</span> </td>
                      </tr><tr>
                        <th>438</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th>439</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $base = 'the '.date('jS', mktime(0,0,0,1,$this-&gt;mDateDmDate)).' of ';</span> </td>
                      </tr><tr>
                        <th>440</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>441</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $months = array();</span> </td>
                      </tr><tr>
                        <th>442</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($this-&gt;mDateDmMonths as $month =&gt; $enable) {</span> </td>
                      </tr><tr>
                        <th>443</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($enable) {</span> </td>
                      </tr><tr>
                        <th>444</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $months[] = date('F', mktime(0,0,0,$month_offset + $month));</span> </td>
                      </tr><tr>
                        <th>445</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>446</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>447</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (empty($months)) {</span> </td>
                      </tr><tr>
                        <th>448</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $base .= 'no months';</span> </td>
                      </tr><tr>
                        <th>449</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th>450</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $base .= implode(', ',$months);</span> </td>
                      </tr><tr>
                        <th>451</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>452</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (1 === $this-&gt;mDateMethod) {</span> </td>
                      </tr><tr>
                        <th>453</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Academic</span> </td>
                      </tr><tr>
                        <th>454</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @todo Implement stringifier for academic bases</span> </td>
                      </tr><tr>
                        <th>455</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // weeks 1,3,5 of the autumn term, xmas holiday, spring term</span> </td>
                      </tr><tr>
                        <th>456</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $base = '(Academic base - stringifier not implemented)';</span> </td>
                      </tr><tr>
                        <th>457</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (2 === $this-&gt;mDateMethod) {</span> </td>
                      </tr><tr>
                        <th>458</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Easter</span> </td>
                      </tr><tr>
                        <th>459</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $base = 'Easter Sunday';</span> </td>
                      </tr><tr>
                        <th>460</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>461</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>462</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // years</span> </td>
                      </tr><tr>
                        <th>463</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $years = '';</span> </td>
                      </tr><tr>
                        <th>464</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (TRUE || 1 !== $this-&gt;mYearInterval) {</span> </td>
                      </tr><tr>
                        <th>465</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (1 === $this-&gt;mYearInterval) {</span> </td>
                      </tr><tr>
                        <th>466</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ith = '';</span> </td>
                      </tr><tr>
                        <th>467</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (2 === $this-&gt;mYearInterval) {</span> </td>
                      </tr><tr>
                        <th>468</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ith = ' other';</span> </td>
                      </tr><tr>
                        <th>469</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th>470</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ith = date(' jS',mktime(0,0,0,1,$this-&gt;mYearInterval));</span> </td>
                      </tr><tr>
                        <th>471</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>472</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $years .= ' of every' . $ith . ' year';</span> </td>
                      </tr><tr>
                        <th>473</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (1 !== $this-&gt;mYearInterval) {</span> </td>
                      </tr><tr>
                        <th>474</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $years .= ' including year ' . $this-&gt;mYearOffset;</span> </td>
                      </tr><tr>
                        <th>475</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>476</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>477</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>478</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bounds = '';</span> </td>
                      </tr><tr>
                        <th>479</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (FALSE !== $this-&gt;mMaxDate) {</span> </td>
                      </tr><tr>
                        <th>480</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $upper_limit = date('jS F Y', $this-&gt;mMaxDate);</span> </td>
                      </tr><tr>
                        <th>481</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>482</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (FALSE !== $this-&gt;mMinDate) {</span> </td>
                      </tr><tr>
                        <th>483</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $lower_limit = date('jS F Y', $this-&gt;mMinDate);</span> </td>
                      </tr><tr>
                        <th>484</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (FALSE !== $this-&gt;mMaxDate) {</span> </td>
                      </tr><tr>
                        <th>485</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bounds .= ' between '.$lower_limit.' and '.$upper_limit;</span> </td>
                      </tr><tr>
                        <th>486</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th>487</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bounds .= ' after '.$lower_limit;</span> </td>
                      </tr><tr>
                        <th>488</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>489</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th>490</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (FALSE !== $this-&gt;mMaxDate) {</span> </td>
                      </tr><tr>
                        <th>491</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bounds .= ' before '.$upper_limit;</span> </td>
                      </tr><tr>
                        <th>492</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>493</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>494</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>495</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Final result</span> </td>
                      </tr><tr>
                        <th>496</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $offset.$week_offset.$days.$base.$years.$bounds;</span> </td>
                      </tr><tr>
                        <th>497</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>498</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>499</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the minimum date.</span> </td>
                      </tr><tr>
                        <th>500</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>501</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Min timestamp New minimum possible result.</span> </td>
                      </tr><tr>
                        <th>502</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>503</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function Min($Min = FALSE)</span> </td>
                      </tr><tr>
                        <th>504</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>505</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mMinDate = $Min;</span> </td>
                      </tr><tr>
                        <th>506</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>507</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>508</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the maximum date.</span> </td>
                      </tr><tr>
                        <th>509</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>510</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Max timestamp New maximum possible result.</span> </td>
                      </tr><tr>
                        <th>511</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>512</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function Max($Max = FALSE)</span> </td>
                      </tr><tr>
                        <th>513</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>514</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mMaxDate = $Max;</span> </td>
                      </tr><tr>
                        <th>515</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>516</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>517</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set a month and a day of the month.</span> </td>
                      </tr><tr>
                        <th>518</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>519</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Month integer Month of the year (1..12).</span> </td>
                      </tr><tr>
                        <th>520</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Date integer Day of the month (1..31) specified in @a $Month to</span> </td>
                      </tr><tr>
                        <th>521</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; use as base.</span> </td>
                      </tr><tr>
                        <th>522</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>523</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Sets the base mode to DayMonth.</span> </td>
                      </tr><tr>
                        <th>524</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Sets @a $Month as the only month to have bases.</span> </td>
                      </tr><tr>
                        <th>525</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Sets @a $Date as the base day of the month.</span> </td>
                      </tr><tr>
                        <th>526</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Clears day offset and days of week (so result is straight base).</span> </td>
                      </tr><tr>
                        <th>527</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>528</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function MonthDate($Month, $Date = 1)</span> </td>
                      </tr><tr>
                        <th>529</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>530</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateMethod = 0; // DayMonth</span> </td>
                      </tr><tr>
                        <th>531</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;ClearMonths();</span> </td>
                      </tr><tr>
                        <th>532</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;AddMonth($Month);</span> </td>
                      </tr><tr>
                        <th>533</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;DayOfMonth($Date);</span> </td>
                      </tr><tr>
                        <th>534</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;UseNextEnabledDay();</span> </td>
                      </tr><tr>
                        <th>535</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;AnyDayOfWeek();</span> </td>
                      </tr><tr>
                        <th>536</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;SetOffsetDays();</span> </td>
                      </tr><tr>
                        <th>537</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>538</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>539</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the day of the base months to use as a base.</span> </td>
                      </tr><tr>
                        <th>540</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>541</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Date integer Day of the month (1..31) to use as base.</span> </td>
                      </tr><tr>
                        <th>542</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>543</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function DayOfMonth($Date = 0)</span> </td>
                      </tr><tr>
                        <th>544</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>545</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateDmDate = $Date;</span> </td>
                      </tr><tr>
                        <th>546</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>547</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>548</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Clear the months so no months can have bases.</span> </td>
                      </tr><tr>
                        <th>549</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function ClearMonths()</span> </td>
                      </tr><tr>
                        <th>550</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>551</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ($month_counter = 1; $month_counter &lt;= 12; ++$month_counter) {</span> </td>
                      </tr><tr>
                        <th>552</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateDmMonths[$month_counter] = FALSE;</span> </td>
                      </tr><tr>
                        <th>553</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>554</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>555</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>556</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set all months to have bases.</span> </td>
                      </tr><tr>
                        <th>557</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>558</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Sets the base mode to DayMonth.</span> </td>
                      </tr><tr>
                        <th>559</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>560</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetMonths()</span> </td>
                      </tr><tr>
                        <th>561</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>562</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateMethod = 0; // DayMonth</span> </td>
                      </tr><tr>
                        <th>563</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ($month_counter = 1; $month_counter &lt;= 12; ++$month_counter) {</span> </td>
                      </tr><tr>
                        <th>564</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateDmMonths[$month_counter] = TRUE;</span> </td>
                      </tr><tr>
                        <th>565</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>566</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>567</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>568</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set a particular month to have a base.</span> </td>
                      </tr><tr>
                        <th>569</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>570</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Month integer Month to enable a base for (1..12).</span> </td>
                      </tr><tr>
                        <th>571</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>572</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Sets the base mode to DayMonth.</span> </td>
                      </tr><tr>
                        <th>573</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>574</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function AddMonth($Month)</span> </td>
                      </tr><tr>
                        <th>575</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>576</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateMethod = 0; // DayMonth</span> </td>
                      </tr><tr>
                        <th>577</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateDmMonths[$Month] = TRUE;</span> </td>
                      </tr><tr>
                        <th>578</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>579</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>580</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set a particular month to have no base.</span> </td>
                      </tr><tr>
                        <th>581</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>582</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Month integer Month to disable a base for (1..12).</span> </td>
                      </tr><tr>
                        <th>583</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>584</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Sets the base mode to DayMonth.</span> </td>
                      </tr><tr>
                        <th>585</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>586</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function RemoveMonth($Week)</span> </td>
                      </tr><tr>
                        <th>587</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>588</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateMethod = 0; // DayMonth</span> </td>
                      </tr><tr>
                        <th>589</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateDmMonths[$Week] = FALSE;</span> </td>
                      </tr><tr>
                        <th>590</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>591</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>592</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the academic term in the valid years to contain bases.</span> </td>
                      </tr><tr>
                        <th>593</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>594</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Term integer Term number as used by the Academic_calendar library:</span> </td>
                      </tr><tr>
                        <th>595</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 0 (Autumn term).</span> </td>
                      </tr><tr>
                        <th>596</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 1 (Christmas holiday).</span> </td>
                      </tr><tr>
                        <th>597</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 2 (Spring term).</span> </td>
                      </tr><tr>
                        <th>598</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 3 (Easter holiday).</span> </td>
                      </tr><tr>
                        <th>599</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 4 (Summer term).</span> </td>
                      </tr><tr>
                        <th>600</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 5 (Summer holiday).</span> </td>
                      </tr><tr>
                        <th>601</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>602</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Sets the base mode to Academic.</span> </td>
                      </tr><tr>
                        <th>603</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Clears which academic weeks have bases.</span> </td>
                      </tr><tr>
                        <th>604</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>605</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function AcademicTerm($Term)</span> </td>
                      </tr><tr>
                        <th>606</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>607</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateMethod = 1; // Academic</span> </td>
                      </tr><tr>
                        <th>608</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateAcTerm = $Term;</span> </td>
                      </tr><tr>
                        <th>609</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;ClearAcademicWeeks();</span> </td>
                      </tr><tr>
                        <th>610</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>611</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>612</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Clear which academic weeks have bases.</span> </td>
                      </tr><tr>
                        <th>613</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function ClearAcademicWeeks()</span> </td>
                      </tr><tr>
                        <th>614</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>615</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ($week_counter = -15; $week_counter &lt;= 16; ++$week_counter) {</span> </td>
                      </tr><tr>
                        <th>616</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateAcWeeks[$week_counter] = FALSE;</span> </td>
                      </tr><tr>
                        <th>617</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>618</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>619</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>620</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Add an academic week to those with bases.</span> </td>
                      </tr><tr>
                        <th>621</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>622</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Week Academic week number of the term (-15..16):</span> </td>
                      </tr><tr>
                        <th>623</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 1 is the first week of the term.</span> </td>
                      </tr><tr>
                        <th>624</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - Negative numbers represent the last weeks of the previous term.</span> </td>
                      </tr><tr>
                        <th>625</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>626</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Sets the base mode to Academic.</span> </td>
                      </tr><tr>
                        <th>627</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Add week @a $Week to those which have bases.</span> </td>
                      </tr><tr>
                        <th>628</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>629</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function AddAcademicWeek($Week)</span> </td>
                      </tr><tr>
                        <th>630</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>631</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateMethod = 1; // Academic</span> </td>
                      </tr><tr>
                        <th>632</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateAcWeeks[$Week] = TRUE;</span> </td>
                      </tr><tr>
                        <th>633</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>634</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>635</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set to easter sunday (a base).</span> </td>
                      </tr><tr>
                        <th>636</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>637</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Sets the base mode to Easter.</span> </td>
                      </tr><tr>
                        <th>638</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Set to use next enabled day.</span> </td>
                      </tr><tr>
                        <th>639</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Enables all days (although really it'll be sunday).</span> </td>
                      </tr><tr>
                        <th>640</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Resets the offset days.</span> </td>
                      </tr><tr>
                        <th>641</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>642</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function EasterSunday()</span> </td>
                      </tr><tr>
                        <th>643</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>644</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateMethod = 2; // Easter</span> </td>
                      </tr><tr>
                        <th>645</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;UseNextEnabledDay();</span> </td>
                      </tr><tr>
                        <th>646</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;AnyDayOfWeek();</span> </td>
                      </tr><tr>
                        <th>647</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;SetOffsetDays();</span> </td>
                      </tr><tr>
                        <th>648</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>649</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>650</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the day filter to use the next enabled day after each base.</span> </td>
                      </tr><tr>
                        <th>651</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>652</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Sets the day method to 0</span> </td>
                      </tr><tr>
                        <th>653</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>654</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function UseNextEnabledDay()</span> </td>
                      </tr><tr>
                        <th>655</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>656</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDayMethod = 0;</span> </td>
                      </tr><tr>
                        <th>657</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>658</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>659</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the day filter to use the next enabled days after each base.</span> </td>
                      </tr><tr>
                        <th>660</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>661</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Sets the day method to 1</span> </td>
                      </tr><tr>
                        <th>662</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>663</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function UseNextEnabledDays()</span> </td>
                      </tr><tr>
                        <th>664</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>665</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDayMethod = 1;</span> </td>
                      </tr><tr>
                        <th>666</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>667</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>668</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the day filter to use the closest enabled day to each base.</span> </td>
                      </tr><tr>
                        <th>669</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>670</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Sets the day method to 2</span> </td>
                      </tr><tr>
                        <th>671</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>672</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function UseClosestEnabledDay()</span> </td>
                      </tr><tr>
                        <th>673</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>674</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDayMethod = 2;</span> </td>
                      </tr><tr>
                        <th>675</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>676</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>677</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the day filter to use the closest enabled days to each base.</span> </td>
                      </tr><tr>
                        <th>678</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>679</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Sets the day method to 3</span> </td>
                      </tr><tr>
                        <th>680</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>681</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function UseClosestEnabledDays()</span> </td>
                      </tr><tr>
                        <th>682</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>683</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDayMethod = 3;</span> </td>
                      </tr><tr>
                        <th>684</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>685</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>686</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Enable all days of the week near base.</span> </td>
                      </tr><tr>
                        <th>687</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>688</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Clears the array to TRUE.</span> </td>
                      </tr><tr>
                        <th>689</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>690</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function AnyDayOfWeek()</span> </td>
                      </tr><tr>
                        <th>691</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>692</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ($day_counter = 0; $day_counter &lt; 7; ++$day_counter) {</span> </td>
                      </tr><tr>
                        <th>693</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDayDays[$day_counter] = TRUE;</span> </td>
                      </tr><tr>
                        <th>694</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>695</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>696</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>697</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Enable a particular day of the week to result near each base.</span> </td>
                      </tr><tr>
                        <th>698</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>699</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Day integer Day of the week (0 = sunday).</span> </td>
                      </tr><tr>
                        <th>700</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>701</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function EnableDayOfWeek($Day)</span> </td>
                      </tr><tr>
                        <th>702</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>703</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDayDays[$Day] = TRUE;</span> </td>
                      </tr><tr>
                        <th>704</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>705</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>706</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Disable a particular day of the week from resulting near each base.</span> </td>
                      </tr><tr>
                        <th>707</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>708</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Day integer Day of the week (0 = sunday).</span> </td>
                      </tr><tr>
                        <th>709</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>710</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function DisableDayOfWeek($Day)</span> </td>
                      </tr><tr>
                        <th>711</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>712</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDayDays[$Day] = FALSE;</span> </td>
                      </tr><tr>
                        <th>713</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>714</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>715</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set a particular day of the week as the only day.</span> </td>
                      </tr><tr>
                        <th>716</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>717</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Day integer Day of the week (0 = sunday).</span> </td>
                      </tr><tr>
                        <th>718</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>719</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function OnlyDayOfWeek($Day = -1)</span> </td>
                      </tr><tr>
                        <th>720</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>721</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ($day_counter = 0; $day_counter &lt; 7; ++$day_counter) {</span> </td>
                      </tr><tr>
                        <th>722</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDayDays[$day_counter] = ($day_counter == $Day);</span> </td>
                      </tr><tr>
                        <th>723</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>724</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>725</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>726</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the number of weeks to offset the day filter results.</span> </td>
                      </tr><tr>
                        <th>727</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>728</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Week integer Number of weeks to offset the day filter results.</span> </td>
                      </tr><tr>
                        <th>729</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>730</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetWeekOffset($Week = 0)</span> </td>
                      </tr><tr>
                        <th>731</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>732</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDayWeek = $Week;</span> </td>
                      </tr><tr>
                        <th>733</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>734</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>735</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Offsets the results by a number of days.</span> </td>
                      </tr><tr>
                        <th>736</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>737</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Days integer Number of days to offset results.</span> </td>
                      </tr><tr>
                        <th>738</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>739</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* If an offset has already been set, this will add to it.</span> </td>
                      </tr><tr>
                        <th>740</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>741</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function OffsetDays($Days)</span> </td>
                      </tr><tr>
                        <th>742</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>743</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mOffsetDays += $Days;</span> </td>
                      </tr><tr>
                        <th>744</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>745</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>746</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Sets the day offset of the results.</span> </td>
                      </tr><tr>
                        <th>747</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>748</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Days integer Number of days to offset results.</span> </td>
                      </tr><tr>
                        <th>749</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>750</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* If an offset has already been set, this will override it.</span> </td>
                      </tr><tr>
                        <th>751</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>752</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SetOffsetDays($Days = 0)</span> </td>
                      </tr><tr>
                        <th>753</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>754</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mOffsetDays = $Days;</span> </td>
                      </tr><tr>
                        <th>755</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>756</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>757</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Set the time of day.</span> </td>
                      </tr><tr>
                        <th>758</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>759</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Hours integer Hour number of the day (0..23).</span> </td>
                      </tr><tr>
                        <th>760</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Minutes integer Minute number of the hour (0..59).</span> </td>
                      </tr><tr>
                        <th>761</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>762</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function Time($Hours = 0, $Minutes = 0)</span> </td>
                      </tr><tr>
                        <th>763</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>764</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mOffsetMins = $Hours*60 + $Minutes;</span> </td>
                      </tr><tr>
                        <th>765</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>766</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>767</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Calculate the date of easter on a particular year.</span> </td>
                      </tr><tr>
                        <th>768</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>769</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Year integer Year (e.g. 2006).</span> </td>
                      </tr><tr>
                        <th>770</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array(@a $Year, month of easter, day of month of easter sunday).</span> </td>
                      </tr><tr>
                        <th>771</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>772</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Uses the Meeus/Jones/Butcher Gregorian algorithm to calculate easter.</span> </td>
                      </tr><tr>
                        <th>773</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @see http://en.wikipedia.org/wiki/Computus#Meeus.2FJones.2FButcher_Gregorian_algorithm</span> </td>
                      </tr><tr>
                        <th>774</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>775</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* This returns the date as an array so as to cover a larger range than</span> </td>
                      </tr><tr>
                        <th>776</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; unix timestamps.</span> </td>
                      </tr><tr>
                        <th>777</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>778</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; static function CalculateEaster($Year)</span> </td>
                      </tr><tr>
                        <th>779</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>780</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $a = $Year % 19;</span> </td>
                      </tr><tr>
                        <th>781</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $b = (int)($Year / 100);</span> </td>
                      </tr><tr>
                        <th>782</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $c = $Year % 100;</span> </td>
                      </tr><tr>
                        <th>783</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $d = (int)($b / 4);</span> </td>
                      </tr><tr>
                        <th>784</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $e = $b % 4;</span> </td>
                      </tr><tr>
                        <th>785</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $f = (int)(($b+8)/25);</span> </td>
                      </tr><tr>
                        <th>786</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $g = (int)(($b - $f + 1)/3);</span> </td>
                      </tr><tr>
                        <th>787</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $h = (19*$a + $b - $d - $g + 15) % 30;</span> </td>
                      </tr><tr>
                        <th>788</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $i = (int)($c / 4);</span> </td>
                      </tr><tr>
                        <th>789</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $k = $c % 4;</span> </td>
                      </tr><tr>
                        <th>790</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $L = (32 + 2*($e+$i) - $h - $k) % 7;</span> </td>
                      </tr><tr>
                        <th>791</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $m = (int)(($a + 11*$h + 22*$L)/451);</span> </td>
                      </tr><tr>
                        <th>792</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $month = (int)(($h + $L - 7*$m + 114) / 31);</span> </td>
                      </tr><tr>
                        <th>793</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day = (($h + $L - 7*$m + 114) % 31) + 1;</span> </td>
                      </tr><tr>
                        <th>794</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return array($Year, $month, $day);</span> </td>
                      </tr><tr>
                        <th>795</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>796</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>797</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Calculate the date of easter on a particular year as a timestamp.</span> </td>
                      </tr><tr>
                        <th>798</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>799</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Year integer Year (e.g. 2006).</span> </td>
                      </tr><tr>
                        <th>800</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return timestamp of midnight on the morning of easter sunday.</span> </td>
                      </tr><tr>
                        <th>801</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>802</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Uses CalculateEaster and converts to a timestamp.</span> </td>
                      </tr><tr>
                        <th>803</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>804</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; static function CalculateEasterTimestamp($Year)</span> </td>
                      </tr><tr>
                        <th>805</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>806</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $easter_array = self::CalculateEaster($Year);</span> </td>
                      </tr><tr>
                        <th>807</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return mktime(0,0,0,$easter_array[1], $easter_array[2], $easter_array[0]);</span> </td>
                      </tr><tr>
                        <th>808</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>809</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>810</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Given a start and end time, produce all occurrences in between.</span> </td>
                      </tr><tr>
                        <th>811</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>812</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Start timestamp Start of search interval.</span> </td>
                      </tr><tr>
                        <th>813</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $End timestamp End of search interval.</span> </td>
                      </tr><tr>
                        <th>814</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return Associative array:</span> </td>
                      </tr><tr>
                        <th>815</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - Indexed by timestamps of occurrences.</span> </td>
                      </tr><tr>
                        <th>816</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - Each value is a boolean which should (atm) always be TRUE.</span> </td>
                      </tr><tr>
                        <th>817</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>818</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function FindTimes($Start, $End)</span> </td>
                      </tr><tr>
                        <th>819</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>820</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Find overlap</span> </td>
                      </tr><tr>
                        <th>821</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;mMinDate !== FALSE &amp;&amp; $Start &lt; $this-&gt;mMinDate)</span> </td>
                      </tr><tr>
                        <th>822</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $Start = $this-&gt;mMinDate;</span> </td>
                      </tr><tr>
                        <th>823</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;mMaxDate !== FALSE &amp;&amp; $End &gt; $this-&gt;mMaxDate)</span> </td>
                      </tr><tr>
                        <th>824</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $End = $this-&gt;mMaxDate;</span> </td>
                      </tr><tr>
                        <th>825</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>826</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // produce and return array of matching dates</span> </td>
                      </tr><tr>
                        <th>827</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $results = array();</span> </td>
                      </tr><tr>
                        <th>828</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($End &gt;= $Start) {</span> </td>
                      </tr><tr>
                        <th>829</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Find the years that the date could occur on</span> </td>
                      </tr><tr>
                        <th>830</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $years = $this-&gt;FilterYears((int)date('Y',$Start)-1, (int)date('Y',$End));</span> </td>
                      </tr><tr>
                        <th>831</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Find the bases in the year</span> </td>
                      </tr><tr>
                        <th>832</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $first_dates = array();</span> </td>
                      </tr><tr>
                        <th>833</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($years as $year) {</span> </td>
                      </tr><tr>
                        <th>834</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;ProduceFirstRoundDates($year, $first_dates);</span> </td>
                      </tr><tr>
                        <th>835</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>836</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // perform week day filters</span> </td>
                      </tr><tr>
                        <th>837</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $second_dates = array();</span> </td>
                      </tr><tr>
                        <th>838</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($first_dates as $date =&gt; $enable) {</span> </td>
                      </tr><tr>
                        <th>839</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($enable) {</span> </td>
                      </tr><tr>
                        <th>840</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;ProduceSecondRoundDates($date, $second_dates);</span> </td>
                      </tr><tr>
                        <th>841</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>842</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>843</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Offset the results and check in range</span> </td>
                      </tr><tr>
                        <th>844</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($second_dates as $date =&gt; $enable) {</span> </td>
                      </tr><tr>
                        <th>845</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($enable) {</span> </td>
                      </tr><tr>
                        <th>846</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $date = $this-&gt;OffsetDate($date);</span> </td>
                      </tr><tr>
                        <th>847</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($date &gt;= $Start &amp;&amp; $date &lt; $End) {</span> </td>
                      </tr><tr>
                        <th>848</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $results[$date] = TRUE;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1067</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // (exclude the start date which is added when resolving)</span> </td>
                      </tr><tr>
                        <th> </th><th>1068</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($exclude || $start !== $this-&gt;mStart) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1069</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $results[] = array(</span> </td>
                      </tr><tr>
                        <th> </th><th>1070</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'start' =&gt; $start,</span> </td>
                      </tr><tr>
                        <th> </th><th>1071</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'duration' =&gt; $duration,</span> </td>
                      </tr><tr>
                        <th> </th><th>1072</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'time_associated' =&gt; $time_associated,</span> </td>
                      </tr><tr>
                        <th> </th><th>1073</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'exclude' =&gt; $exclude,</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1074</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>849</th><th>1075</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>850</th><th>1076</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/recurrence_model.php?rev=b35aae36ff4a5f71e6ae0f58522e5664dc1d1111#L854">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/calendar/recurrence_model.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1080">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>854</th><th>1080</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>855</th><th>1081</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>856</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Given a start and end year, produce all years with occurrences.</span> </td>
                      </tr><tr>
                        <th>857</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>858</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Start integer Start year (e.g. 2006).</span> </td>
                      </tr><tr>
                        <th>859</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $End integer End year (e.g. 2007).</span> </td>
                      </tr><tr>
                        <th>860</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array of integers, each representing a year in the interval.</span> </td>
                      </tr><tr>
                        <th>861</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>862</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; private function FilterYears($start, $end)</span> </td>
                      </tr><tr>
                        <th>863</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>864</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // year = start-offset mod interval</span> </td>
                      </tr><tr>
                        <th>865</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $year = ($start - $this-&gt;mYearOffset) % $this-&gt;mYearInterval;</span> </td>
                      </tr><tr>
                        <th>866</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>867</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // year = year of first match</span> </td>
                      </tr><tr>
                        <th>868</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($year &gt; 0) {</span> </td>
                      </tr><tr>
                        <th>869</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $year = $this-&gt;mYearInterval - $year;</span> </td>
                      </tr><tr>
                        <th>870</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>871</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $year += $start;</span> </td>
                      </tr><tr>
                        <th>872</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>873</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // produce and return array of matching years</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1082</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Get an array of recurrence rules.</span> </td>
                      </tr><tr>
                        <th> </th><th>1083</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>1084</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array Results, each with the following:</span> </td>
                      </tr><tr>
                        <th> </th><th>1085</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 'rule' CalendarRecurRule</span> </td>
                      </tr><tr>
                        <th> </th><th>1086</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 'exclude' bool</span> </td>
                      </tr><tr>
                        <th> </th><th>1087</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>1088</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function GetRulesArray()</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1089</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>874</th><th>1090</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $results = array();</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>875</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while ($year &lt;= $end) {</span> </td>
                      </tr><tr>
                        <th>876</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $results[] = $year;</span> </td>
                      </tr><tr>
                        <th>877</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $year += $this-&gt;mYearInterval;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1091</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (array('mRRules' =&gt; FALSE, 'mExRules' =&gt; TRUE) as $field =&gt; $exclude) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1092</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($this-&gt;$field as $rule) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1093</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $results[] = array(</span> </td>
                      </tr><tr>
                        <th> </th><th>1094</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'rule' =&gt; $rule,</span> </td>
                      </tr><tr>
                        <th> </th><th>1095</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'exclude' =&gt; $exclude,</span> </td>
                      </tr><tr>
                        <th> </th><th>1096</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1097</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>878</th><th>1098</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>879</th><th>1099</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $results;</span> </td>
                  </tr><tr>
                          <th>880</th><th>1100</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>881</th><th>1101</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>882</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Given a year, find all base dates.</span> </td>
                      </tr><tr>
                        <th>883</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>884</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Year integer Year (e.g. 2006).</span> </td>
                      </tr><tr>
                        <th>885</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Results reference to array to put timestamps.</span> </td>
                      </tr><tr>
                        <th>886</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>887</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Find the base dates in the given year depending on method.</span> </td>
                      </tr><tr>
                        <th>888</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>889</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Adds an element to @a $Results for each base with a timestamp index and</span> </td>
                      </tr><tr>
                        <th>890</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; the value TRUE.</span> </td>
                      </tr><tr>
                        <th>891</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>892</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; private function ProduceFirstRoundDates($Year, &amp;$Results)</span> </td>
                      </tr><tr>
                        <th>893</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>894</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Depends on date method</span> </td>
                      </tr><tr>
                        <th>895</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; switch ($this-&gt;mDateMethod)</span> </td>
                      </tr><tr>
                        <th>896</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>897</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 0: // DayMonth</span> </td>
                      </tr><tr>
                        <th>898</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($this-&gt;mDateDmMonths as $month =&gt; $enable) {</span> </td>
                      </tr><tr>
                        <th>899</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($enable) {</span> </td>
                      </tr><tr>
                        <th>900</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Get dates of months (excluding those which are invalid)</span> </td>
                      </tr><tr>
                        <th>901</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $timestamp = mktime(0,0,0, $month,$this-&gt;mDateDmDate,$Year);</span> </td>
                      </tr><tr>
                        <th>902</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($timestamp !== FALSE &amp;&amp;</span> </td>
                      </tr><tr>
                        <th>903</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (int)date('n',$timestamp) === $month) {</span> </td>
                      </tr><tr>
                        <th>904</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $Results[$timestamp] = TRUE;</span> </td>
                      </tr><tr>
                        <th>905</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1102</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Add recurring dates.</span> </td>
                      </tr><tr>
                        <th> </th><th>1103</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>1104</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $RDates array['YYYYMMDD' =&gt; array[{'HHMMSS',NULL} =&gt; {duration,NULL}] ] Dates to include.</span> </td>
                      </tr><tr>
                        <th> </th><th>1105</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>1106</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function AddRDates($RDates)</span> </td>
                      </tr><tr>
                        <th> </th><th>1107</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>1108</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mRDates = self::UnionDates($this-&gt;mRDates, $RDates);</span> </td>
                      </tr><tr>
                        <th> </th><th>1109</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1110</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1111</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Add exclusion dates.</span> </td>
                      </tr><tr>
                        <th> </th><th>1112</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>1113</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $ExDates array['YYYYMMDD' =&gt; array[{'HHMMSS',NULL} =&gt; {duration,NULL}] ] Dates to exclude.</span> </td>
                      </tr><tr>
                        <th> </th><th>1114</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>1115</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function AddExDates($ExDates)</span> </td>
                      </tr><tr>
                        <th> </th><th>1116</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>1117</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mExDates = self::UnionDates($this-&gt;mExDates, $ExDates);</span> </td>
                      </tr><tr>
                        <th> </th><th>1118</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1119</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1120</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Add recurrence rules.</span> </td>
                      </tr><tr>
                        <th> </th><th>1121</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>1122</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $RRules array[CalendarRecurRule],CalendarRecurRule Recurrence rule(s).</span> </td>
                      </tr><tr>
                        <th> </th><th>1123</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>1124</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function AddRRules($RRules = array())</span> </td>
                      </tr><tr>
                        <th> </th><th>1125</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>1126</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_array($RRules)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1127</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($RRules as $rule) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1128</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mRRules[] = $rule;</span> </td>
                      </tr><tr>
                        <th> </th><th>1129</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1130</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>1131</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mRRules[] = $RRules;</span> </td>
                      </tr><tr>
                        <th> </th><th>1132</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1133</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1134</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1135</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Add exclusion rules.</span> </td>
                      </tr><tr>
                        <th> </th><th>1136</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>1137</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $ExRules array[CalendarRecurRule],CalendarRecurRule Exclusion rule(s).</span> </td>
                      </tr><tr>
                        <th> </th><th>1138</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>1139</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function AddExRules($ExRules = array())</span> </td>
                      </tr><tr>
                        <th> </th><th>1140</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>1141</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_array($ExRules)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1142</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($ExRules as $rule) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1143</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mExRules[] = $rule;</span> </td>
                      </tr><tr>
                        <th> </th><th>1144</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1145</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>1146</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mExRules[] = $ExRules;</span> </td>
                      </tr><tr>
                        <th> </th><th>1147</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1148</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1149</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1150</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Find the resulting occurrences.</span> </td>
                      </tr><tr>
                        <th> </th><th>1151</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>1152</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array['YYYYMMDD' =&gt; {duration}]</span> </td>
                      </tr><tr>
                        <th> </th><th>1153</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>1154</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function Resolve($MinDate, $MaxDate)</span> </td>
                      </tr><tr>
                        <th> </th><th>1155</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>1156</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @pre Start and duration must have been set.</span> </td>
                      </tr><tr>
                        <th> </th><th>1157</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('isset($this-&gt;mStart)');</span> </td>
                      </tr><tr>
                        <th> </th><th>1158</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL == $MinDate) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1159</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $MinDateStr = NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>1160</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>1161</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $MinDateStr = date('Ymd', $MinDate);</span> </td>
                      </tr><tr>
                        <th> </th><th>1162</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1163</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert('NULL !== $MaxDate');</span> </td>
                      </tr><tr>
                        <th> </th><th>1164</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $MaxDateStr = date('Ymd', $MaxDate);</span> </td>
                      </tr><tr>
                        <th> </th><th>1165</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1166</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Make sure the start date is in RDates</span> </td>
                      </tr><tr>
                        <th> </th><th>1167</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $StartDate = date('Ymd', $this-&gt;mStart);</span> </td>
                      </tr><tr>
                        <th> </th><th>1168</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $StartTime = date('His', $this-&gt;mStart);</span> </td>
                      </tr><tr>
                        <th> </th><th>1169</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_int($this-&gt;mStart) &amp;&amp; is_int($this-&gt;mEnd)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1170</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $Duration = $this-&gt;mEnd - $this-&gt;mStart;</span> </td>
                      </tr><tr>
                        <th> </th><th>1171</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>1172</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $Duration = NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>1173</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1174</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;AddRDates(</span> </td>
                      </tr><tr>
                        <th> </th><th>1175</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array(</span> </td>
                      </tr><tr>
                        <th> </th><th>1176</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $StartDate =&gt; array(</span> </td>
                      </tr><tr>
                        <th> </th><th>1177</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $StartTime =&gt; $Duration,</span> </td>
                      </tr><tr>
                        <th> </th><th>1178</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ),</span> </td>
                      </tr><tr>
                        <th> </th><th>1179</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</span> </td>
                      </tr><tr>
                        <th> </th><th>1180</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th> </th><th>1181</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1182</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $results = array();</span> </td>
                      </tr><tr>
                        <th> </th><th>1183</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (array('mRRules' =&gt; 'mRDates', 'mExRules' =&gt; 'mExDates') as $rule_name =&gt; $array_name) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1184</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // bound the range</span> </td>
                      </tr><tr>
                        <th> </th><th>1185</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $results[$array_name] = self::BoundDates($this-&gt;$array_name, $MinDateStr, $MaxDateStr);</span> </td>
                      </tr><tr>
                        <th> </th><th>1186</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // ensure all durations are set</span> </td>
                      </tr><tr>
                        <th> </th><th>1187</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($results[$array_name] as $date =&gt; $dates) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1188</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($dates as $time =&gt; $duration) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1189</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $duration) {</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1190</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $results[$array_name][$date][$time] = $Duration;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>906</th><th>1191</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>907</th><th>1192</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>908</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th>909</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>910</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 1: // Academic</span> </td>
                      </tr><tr>
                        <th>911</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($this-&gt;mDateAcWeeks as $week =&gt; $enable) {</span> </td>
                      </tr><tr>
                        <th>912</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($enable) {</span> </td>
                      </tr><tr>
                        <th>913</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $CI = &amp;get_instance();</span> </td>
                      </tr><tr>
                        <th>914</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Use Academic_calendar to get timestamp from academic.</span> </td>
                      </tr><tr>
                        <th>915</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $timestamp = $CI-&gt;academic_calendar-&gt;Academic(</span> </td>
                      </tr><tr>
                        <th>916</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $Year,</span> </td>
                      </tr><tr>
                        <th>917</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;mDateAcTerm,</span> </td>
                      </tr><tr>
                        <th>918</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $week)-&gt;Timestamp();</span> </td>
                      </tr><tr>
                        <th>919</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($timestamp !== FALSE) {</span> </td>
                      </tr><tr>
                        <th>920</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $Results[$timestamp] = TRUE;</span> </td>
                      </tr><tr>
                        <th>921</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1193</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1194</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // add the rule occurrences to the array</span> </td>
                      </tr><tr>
                        <th> </th><th>1195</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($this-&gt;$rule_name as $rule) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1196</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrences = $rule-&gt;GetOccurrences($this-&gt;mStart, $Duration, $MinDate, $MaxDate);</span> </td>
                      </tr><tr>
                        <th> </th><th>1197</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $occurrences = self::BoundDates($occurrences, $MinDateStr, $MaxDateStr);</span> </td>
                      </tr><tr>
                        <th> </th><th>1198</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $results[$array_name] = self::UnionDates($results[$array_name], $occurrences);</span> </td>
                      </tr><tr>
                        <th> </th><th>1199</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1200</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1201</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // do the main exclusion</span> </td>
                      </tr><tr>
                        <th> </th><th>1202</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return self::ExcludeDates($results['mRDates'], $results['mExDates']);</span> </td>
                      </tr><tr>
                        <th> </th><th>1203</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1204</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1205</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Bound a set of dates to a range.</span> </td>
                      </tr><tr>
                        <th> </th><th>1206</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>1207</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Dates array[date =&gt; array[{time,NULL} =&gt; {int,NULL}] ].</span> </td>
                      </tr><tr>
                        <th> </th><th>1208</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $MinDate string date In format 'YYYYMMDD'.</span> </td>
                      </tr><tr>
                        <th> </th><th>1209</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $MaxDate string date In format 'YYYYMMDD'.</span> </td>
                      </tr><tr>
                        <th> </th><th>1210</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array[date =&gt; array[{time,NULL} =&gt; {int,NULL}] ].</span> </td>
                      </tr><tr>
                        <th> </th><th>1211</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>1212</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; static function BoundDates($Dates, $MinDate, $MaxDate)</span> </td>
                      </tr><tr>
                        <th> </th><th>1213</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>1214</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Go through minority adding to priority</span> </td>
                      </tr><tr>
                        <th> </th><th>1215</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($Dates as $date =&gt; $times) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1216</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (($MinDate !== NULL &amp;&amp; $date &lt; $MinDate) ||</span> </td>
                      </tr><tr>
                        <th> </th><th>1217</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ($MaxDate !== NULL &amp;&amp; $date &gt; $MaxDate)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1218</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset($Dates[$date]);</span> </td>
                      </tr><tr>
                        <th> </th><th>1219</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1220</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1221</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $Dates;</span> </td>
                      </tr><tr>
                        <th> </th><th>1222</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1223</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1224</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Union @a $Priority and @a $Minority giving @a $Priority priority in the case of duplicates.</span> </td>
                      </tr><tr>
                        <th> </th><th>1225</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>1226</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Priority array[date =&gt; array[{time,NULL} =&gt; {int,NULL}] ].</span> </td>
                      </tr><tr>
                        <th> </th><th>1227</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Minority array[date =&gt; array[{time,NULL} =&gt; {int,NULL}] ].</span> </td>
                      </tr><tr>
                        <th> </th><th>1228</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array[date =&gt; array[{time,NULL} =&gt; {int,NULL}] ].</span> </td>
                      </tr><tr>
                        <th> </th><th>1229</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>1230</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; static function UnionDates($Priority, $Minority)</span> </td>
                      </tr><tr>
                        <th> </th><th>1231</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>1232</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Go through minority adding to priority</span> </td>
                      </tr><tr>
                        <th> </th><th>1233</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($Minority as $date =&gt; $times) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1234</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!array_key_exists($date, $Priority)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1235</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $Priority[$date] = $Minority[$date];</span> </td>
                      </tr><tr>
                        <th> </th><th>1236</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>1237</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($times as $time =&gt; $duration) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1238</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!array_key_exists($time, $Priority[$date])) {</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1239</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $Priority[$date][$time] = $duration;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>922</th><th>1240</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>923</th><th>1241</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>924</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th>925</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>926</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 2: // Easter</span> </td>
                      </tr><tr>
                        <th>927</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $Results[self::CalculateEasterTimestamp($Year)] = TRUE;</span> </td>
                      </tr><tr>
                        <th>928</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th>929</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>930</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>931</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>932</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Given a base date, produce results using day of week filters.</span> </td>
                      </tr><tr>
                        <th>933</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>934</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Date timestamp Time of base.</span> </td>
                      </tr><tr>
                        <th>935</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Results reference to array to put timestamps of results.</span> </td>
                      </tr><tr>
                        <th>936</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return @a $Results (even though its a reference).</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1242</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1243</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1244</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $Priority;</span> </td>
                      </tr><tr>
                        <th> </th><th>1245</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1246</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1247</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Compute the exclusion @a $Include - @a $Exclude.</span> </td>
                      </tr><tr>
                        <th> </th><th>1248</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>1249</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Include array[date =&gt; array[{time,NULL} =&gt; {int,NULL}] ].</span> </td>
                      </tr><tr>
                        <th> </th><th>1250</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Exclude array[date =&gt; array[{time,NULL} =&gt; {int,NULL}] ].</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1251</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array[date =&gt; array[{time,NULL} =&gt; {int,NULL}] ].</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>937</th><th>1252</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>938</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - If no days of week are set, pump the date straight through.</span> </td>
                      </tr><tr>
                        <th>939</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Otherwise add each day in days of week array after @a $Date to result,</span> </td>
                      </tr><tr>
                        <th>940</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; offset by a number of weeks.</span> </td>
                      </tr><tr>
                        <th>941</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>942</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Sorry, rubbish description, I'll try again...</span> </td>
                      </tr><tr>
                        <th>943</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th>944</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* For each day of week thats set, the n'th of that day after @a $Date is</span> </td>
                      </tr><tr>
                        <th>945</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; added to @a $Result, where n is the week offset (@a $mDayDays).</span> </td>
                      </tr><tr>
                        <th>946</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>947</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; private function ProduceSecondRoundDates($Date, &amp;$Results)</span> </td>
                      </tr><tr>
                        <th>948</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>949</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day_of_week = (int)date('w',$Date); // 0-6</span> </td>
                      </tr><tr>
                        <th>950</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $results_limit = 1 + ($this-&gt;mDayMethod%2)*6;</span> </td>
                      </tr><tr>
                        <th>951</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;mDayMethod &lt; 2) {</span> </td>
                      </tr><tr>
                        <th>952</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Next enabled day(s) on or after base.</span> </td>
                      </tr><tr>
                        <th>953</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day_order = array( 0, 1, 2, 3, 4, 5, 6);</span> </td>
                      </tr><tr>
                        <th>954</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th>955</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Closest enabled day(s) to base.</span> </td>
                      </tr><tr>
                        <th>956</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $day_order = array( 0, 1,-1, 2,-2, 3,-3);</span> </td>
                      </tr><tr>
                        <th>957</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>958</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Decide whether to limit to the same month</span> </td>
                      </tr><tr>
                        <th>959</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (&nbsp; &nbsp; 0 === $this-&gt;mDateMethod &amp;&amp;</span> </td>
                      </tr><tr>
                        <th>960</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 === $this-&gt;mDateDmDate &amp;&amp;</span> </td>
                      </tr><tr>
                        <th>961</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4 &lt; $this-&gt;mDayWeek) {</span> </td>
                      </tr><tr>
                        <th>962</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $only_same_month = TRUE;</span> </td>
                      </tr><tr>
                        <th>963</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $month = (int)date('n',$Date);</span> </td>
                      </tr><tr>
                        <th>964</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th>965</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $only_same_month = FALSE;</span> </td>
                      </tr><tr>
                        <th>966</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>967</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Go through days after base.</span> </td>
                      </tr><tr>
                        <th>968</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($day_order as $days_after_base) {</span> </td>
                      </tr><tr>
                        <th>969</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // If that day of the week is accepted, add a result.</span> </td>
                      </tr><tr>
                        <th>970</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;mDayDays[(7+$day_of_week+$days_after_base)%7]) {</span> </td>
                      </tr><tr>
                        <th>971</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $with_week_offset = $days_after_base + $this-&gt;mDayWeek*7;</span> </td>
                      </tr><tr>
                        <th>972</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $transformed = strtotime($with_week_offset.'day', $Date);</span> </td>
                      </tr><tr>
                        <th>973</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // If we need to check in same month, do so now</span> </td>
                      </tr><tr>
                        <th>974</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!$only_same_month || $month === (int)date('n',$transformed)) {</span> </td>
                      </tr><tr>
                        <th>975</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Add to results and check if we can get any more results</span> </td>
                      </tr><tr>
                        <th>976</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // from this base.</span> </td>
                      </tr><tr>
                        <th>977</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $Results[$transformed] = TRUE;</span> </td>
                      </tr><tr>
                        <th>978</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (--$results_limit &lt;= 0) {</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1253</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Removes any times in @a $Include which are in @a Exclude.</span> </td>
                      </tr><tr>
                        <th> </th><th>1254</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - A time of NULL will remove the entire day from @a Include.</span> </td>
                      </tr><tr>
                        <th> </th><th>1255</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Returns the new @a $Include.</span> </td>
                      </tr><tr>
                        <th> </th><th>1256</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>1257</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; static function ExcludeDates($Include, $Exclude)</span> </td>
                      </tr><tr>
                        <th> </th><th>1258</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>1259</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Go through exclusions removing from inclusions</span> </td>
                      </tr><tr>
                        <th> </th><th>1260</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($Exclude as $date =&gt; $times) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1261</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (array_key_exists($date, $Include)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1262</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($times as $time =&gt; $duration) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1263</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL == $time) {</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1264</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset($Include[$date]);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>979</th><th>1265</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>1266</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (array_key_exists($time, $Include[$date])) {</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>1267</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset($Include[$date][$time]);</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>980</th><th>1268</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>981</th><th>1269</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>982</th><th>1270</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>983</th><th>1271</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>984</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>985</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>986</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Offset a given date by the day and minute offset in the rule.</span> </td>
                      </tr><tr>
                        <th>987</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>988</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Date timestsamp Input date.</span> </td>
                      </tr><tr>
                        <th>989</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return @a $Date + @a $this-&gt;mOffsetDays days + @a $this-&gt;mOffsetMins minutes.</span> </td>
                      </tr><tr>
                        <th>990</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>991</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; private function OffsetDate($Date)</span> </td>
                      </tr><tr>
                        <th>992</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>993</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return strtotime($this-&gt;mOffsetDays.'day'.$this-&gt;mOffsetMins.'min', $Date);</span> </td>
                      </tr><tr>
                        <th>994</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>995</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1272</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $Include;</span> </td>
                      </tr><tr>
                        <th> </th><th>1273</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1274</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1275</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Compute the difference @a $Include - @a $Exclude.</span> </td>
                      </tr><tr>
                        <th> </th><th>1276</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>1277</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Include array[date =&gt; array[{time,NULL} =&gt; {int,NULL}] ].</span> </td>
                      </tr><tr>
                        <th> </th><th>1278</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Exclude array[date =&gt; array[{time,NULL} =&gt; {int,NULL}] ].</span> </td>
                      </tr><tr>
                        <th> </th><th>1279</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array[date =&gt; array[{time,NULL} =&gt; {int,NULL}] ].</span> </td>
                      </tr><tr>
                        <th> </th><th>1280</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span> </td>
                      </tr><tr>
                        <th> </th><th>1281</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* - Finds all times of @a $Include which aren't in @a $Exclude.</span> </td>
                      </tr><tr>
                        <th> </th><th>1282</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>1283</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; static function SubtractDates($Include, $Exclude)</span> </td>
                      </tr><tr>
                        <th> </th><th>1284</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>1285</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Go through exclusions removing from inclusions</span> </td>
                      </tr><tr>
                        <th> </th><th>1286</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($Exclude as $date =&gt; $times) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1287</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (array_key_exists($date, $Include)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1288</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($times as $time =&gt; $duration) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1289</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (array_key_exists($time, $Include[$date])) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1290</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset($Include[$date][$time]);</span> </td>
                      </tr><tr>
                        <th> </th><th>1291</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1292</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1293</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1294</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1295</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $Include;</span> </td>
                      </tr><tr>
                        <th> </th><th>1296</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1297</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1298</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Compute the changes between two occurrence sets.</span> </td>
                      </tr><tr>
                        <th> </th><th>1299</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>1300</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Before array[date =&gt; array[{time,NULL} =&gt; {int,NULL}] ].</span> </td>
                      </tr><tr>
                        <th> </th><th>1301</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $After array[date =&gt; array[{time,NULL} =&gt; {int,NULL}] ].</span> </td>
                      </tr><tr>
                        <th> </th><th>1302</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array</span> </td>
                      </tr><tr>
                        <th> </th><th>1303</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - (-1) deleted = @a $Before | @a $After</span> </td>
                      </tr><tr>
                        <th> </th><th>1304</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 0 unchanged = @a $Before | deleted</span> </td>
                      </tr><tr>
                        <th> </th><th>1305</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - 1 added = @a $After | @a $Before</span> </td>
                      </tr><tr>
                        <th> </th><th>1306</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>1307</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; static function DiffDates($Before, $After)</span> </td>
                      </tr><tr>
                        <th> </th><th>1308</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>1309</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $added = self::SubtractDates($After, $Before);</span> </td>
                      </tr><tr>
                        <th> </th><th>1310</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $removed = self::SubtractDates($Before, $After);</span> </td>
                      </tr><tr>
                        <th> </th><th>1311</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $unchanged = self::SubtractDates($Before, $removed);</span> </td>
                      </tr><tr>
                        <th> </th><th>1312</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return array(-1 =&gt; $removed, 0 =&gt; $unchanged, 1 =&gt; $added);</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1313</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>996</th><th>1314</th><td class="l"><span>}</span> </td>
                  </tr><tr>
                          <th>997</th><th>1315</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>998</th><th> </th><td class="l"><span>/// <del>Main recurrence model class</del></span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1316</th><td class="r"><span>/// <ins>The recurrence model</ins></span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>999</th><th>1317</th><td class="l"><span>/**</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1000</th><th> </th><td class="l"><span>&nbsp;*</span> </td>
                      </tr><tr>
                        <th>1001</th><th> </th><td class="l"><span>&nbsp;* @author James Hogan (jh559@cs.york.ac.uk)</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1318</th><td class="r"><span>&nbsp;* @todo Get entire event recurrence information from db</span> </td>
                      </tr><tr>
                        <th> </th><th>1319</th><td class="r"><span>&nbsp;* @todo Get current recurrences of an event</span> </td>
                      </tr><tr>
                        <th> </th><th>1320</th><td class="r"><span>&nbsp;* @todo Update all out of date events (diff, apply new ones, take into account for until date as well)</span> </td>
                      </tr><tr>
                        <th> </th><th>1321</th><td class="r"><span>&nbsp;* @todo Change recurrence rule (show diff, apply changes)</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1322</th><td class="r"><span>&nbsp;* @todo reduce recur rule to ical (freq=term etc)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1002</th><th>1323</th><td class="l"><span>&nbsp;*/</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1003</th><th> </th><td class="l"><span>class Recurrence_model extends <del>M</del>odel</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1324</th><td class="r"><span>class Recurrence_model extends <ins>m</ins>odel</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1004</th><th>1325</th><td class="l"><span>{</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1005</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Default constructor</span> </td>
                      </tr><tr>
                        <th>1006</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function __construct()</span> </td>
                      </tr><tr>
                        <th>1007</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>1008</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; parent::Model();</span> </td>
                      </tr><tr>
                        <th>1009</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>1010</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Load the academic calendar library</span> </td>
                      </tr><tr>
                        <th>1011</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;library('academic_calendar');</span> </td>
                      </tr><tr>
                        <th>1012</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>1013</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>1014</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Get comma separated list of fields to get.</span> </td>
                      </tr><tr>
                        <th>1015</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>1016</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $EventAlias string Alias of events table.</span> </td>
                      </tr><tr>
                        <th>1017</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>1018</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SqlSelectRecurrenceRule($RuleAlias = 'recurrence_rules')</span> </td>
                      </tr><tr>
                        <th>1019</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>1020</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return</span> </td>
                      </tr><tr>
                        <th>1021</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $RuleAlias.'.recurrence_rule_id,'.</span> </td>
                      </tr><tr>
                        <th>1022</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'UNIX_TIMESTAMP('.$RuleAlias.'.recurrence_rule_min_date) AS recurrence_rule_min_date,'.</span> </td>
                      </tr><tr>
                        <th>1023</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'UNIX_TIMESTAMP('.$RuleAlias.'.recurrence_rule_max_date) AS recurrence_rule_max_date,'.</span> </td>
                      </tr><tr>
                        <th>1024</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $RuleAlias.'.recurrence_rule_year_interval,'.</span> </td>
                      </tr><tr>
                        <th>1025</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $RuleAlias.'.recurrence_rule_year_offset,'.</span> </td>
                      </tr><tr>
                        <th>1026</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $RuleAlias.'.recurrence_rule_date_method,'.</span> </td>
                      </tr><tr>
                        <th>1027</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $RuleAlias.'.recurrence_rule_daymonth_months,'.</span> </td>
                      </tr><tr>
                        <th>1028</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $RuleAlias.'.recurrence_rule_daymonth_date,'.</span> </td>
                      </tr><tr>
                        <th>1029</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $RuleAlias.'.recurrence_rule_academic_term,'.</span> </td>
                      </tr><tr>
                        <th>1030</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $RuleAlias.'.recurrence_rule_academic_weeks,'.</span> </td>
                      </tr><tr>
                        <th>1031</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $RuleAlias.'.recurrence_rule_day_method,'.</span> </td>
                      </tr><tr>
                        <th>1032</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $RuleAlias.'.recurrence_rule_day_days,'.</span> </td>
                      </tr><tr>
                        <th>1033</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $RuleAlias.'.recurrence_rule_day_week,'.</span> </td>
                      </tr><tr>
                        <th>1034</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $RuleAlias.'.recurrence_rule_offset_days,'.</span> </td>
                      </tr><tr>
                        <th>1035</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $RuleAlias.'.recurrence_rule_offset_minutes';</span> </td>
                      </tr><tr>
                        <th>1036</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>1037</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>1038</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Run a save query on a recurrence rule.</span> </td>
                      </tr><tr>
                        <th>1039</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>1040</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $RecurrenceRule RecurrenceRule RecurrenceRule to save.</span> </td>
                      </tr><tr>
                        <th>1041</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Operation string SQL operation (e.g. 'UPDATE','INSERT INTO').</span> </td>
                      </tr><tr>
                        <th>1042</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Condition string SQL condition.</span> </td>
                      </tr><tr>
                        <th>1043</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $ConditionBind array Variables to bind in the condition.</span> </td>
                      </tr><tr>
                        <th>1044</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return string Number of affected rows.</span> </td>
                      </tr><tr>
                        <th>1045</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>1046</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; private function RunSaveQuery($RecurrenceRule, $Operation,</span> </td>
                      </tr><tr>
                        <th>1047</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $Condition = FALSE, $ConditionBind = array())</span> </td>
                      </tr><tr>
                        <th>1048</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>1049</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule_array = $RecurrenceRule-&gt;ToArray();</span> </td>
                      </tr><tr>
                        <th>1050</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $fields = array();</span> </td>
                      </tr><tr>
                        <th>1051</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bind_array = array();</span> </td>
                      </tr><tr>
                        <th>1052</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (array_key_exists('recurrence_rule_min_date', $rule_array)) {</span> </td>
                      </tr><tr>
                        <th>1053</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $fields[] = 'recurrence_rule_min_date=FROM_UNIXTIME(?)';</span> </td>
                      </tr><tr>
                        <th>1054</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bind_array[] = $rule_array['recurrence_rule_min_date'];</span> </td>
                      </tr><tr>
                        <th>1055</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset($rule_array['recurrence_rule_min_date']);</span> </td>
                      </tr><tr>
                        <th>1056</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>1057</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (array_key_exists('recurrence_rule_max_date', $rule_array)) {</span> </td>
                      </tr><tr>
                        <th>1058</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $fields[] = 'recurrence_rule_max_date=FROM_UNIXTIME(?)';</span> </td>
                      </tr><tr>
                        <th>1059</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bind_array[] = $rule_array['recurrence_rule_max_date'];</span> </td>
                      </tr><tr>
                        <th>1060</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset($rule_array['recurrence_rule_max_date']);</span> </td>
                      </tr><tr>
                        <th>1061</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>1062</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($rule_array as $key =&gt; $value) {</span> </td>
                      </tr><tr>
                        <th>1063</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $fields[] = $key . '=?';</span> </td>
                      </tr><tr>
                        <th>1064</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bind_array[] = $value;</span> </td>
                      </tr><tr>
                        <th>1065</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>1066</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql =&nbsp; $Operation . ' recurrence_rules ' .</span> </td>
                      </tr><tr>
                        <th>1067</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'SET ' . implode(',',$fields);</span> </td>
                      </tr><tr>
                        <th>1068</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_string($Condition)) {</span> </td>
                      </tr><tr>
                        <th>1069</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ' WHERE ' . $Condition;</span> </td>
                      </tr><tr>
                        <th>1070</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($ConditionBind as $value) {</span> </td>
                      </tr><tr>
                        <th>1071</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bind_array[] = $value;</span> </td>
                      </tr><tr>
                        <th>1072</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>1073</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>1074</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $query = $this-&gt;db-&gt;query($sql, $bind_array);</span> </td>
                      </tr><tr>
                        <th>1075</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return ($this-&gt;db-&gt;affected_rows() &gt; 0);</span> </td>
                      </tr><tr>
                        <th>1076</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>1077</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>1078</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Create a new recurrence rule in the db.</span> </td>
                      </tr><tr>
                        <th>1079</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>1080</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $RecurrenceRule RecurrenceRule RecurrenceRule to save.</span> </td>
                      </tr><tr>
                        <th>1081</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return</span> </td>
                      </tr><tr>
                        <th>1082</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - int recurrence_rule_id of new rule.</span> </td>
                      </tr><tr>
                        <th>1083</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - FALSE if the rule could not be saved.</span> </td>
                      </tr><tr>
                        <th>1084</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>1085</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function AddRule($RecurrenceRule)</span> </td>
                      </tr><tr>
                        <th>1086</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>1087</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;RunSaveQuery($RecurrenceRule, 'INSERT INTO')) {</span> </td>
                      </tr><tr>
                        <th>1088</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;db-&gt;insert_id();</span> </td>
                      </tr><tr>
                        <th>1089</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th>1090</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return FALSE;</span> </td>
                      </tr><tr>
                        <th>1091</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>1092</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>1093</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>1094</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Save a recurrence rule in the db.</span> </td>
                      </tr><tr>
                        <th>1095</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>1096</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $RecurrenceRuleId int recurrence_rule_id of rule to save.</span> </td>
                      </tr><tr>
                        <th>1097</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $RecurrenceRule RecurrenceRule RecurrenceRule to save.</span> </td>
                      </tr><tr>
                        <th>1098</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return bool Whether the rule was successfully saved.</span> </td>
                      </tr><tr>
                        <th>1099</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>1100</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SaveRule($RecurrenceRuleId, $RecurrenceRule)</span> </td>
                      </tr><tr>
                        <th>1101</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>1102</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;RunSaveQuery($RecurrenceRule, 'INSERT INTO',</span> </td>
                      </tr><tr>
                        <th>1103</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'recurrence_rules.recurrence_rule_id = ?',</span> </td>
                      </tr><tr>
                        <th>1104</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array($RecurrenceRuleId)</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1326</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Insert the rdates, exdates, rrules, exrules in a set into the db.</span> </td>
                      </tr><tr>
                        <th> </th><th>1327</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>1328</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $Dates array['YYYYMMDD' =&gt; array[{'HHMMSS',NULL} =&gt; {duration,NULL}]] </span> </td>
                      </tr><tr>
                        <th> </th><th>1329</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $EventId int Event identifier.</span> </td>
                      </tr><tr>
                        <th> </th><th>1330</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>1331</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function InsertRecurrenceSet($Set, $EventId)</span> </td>
                      </tr><tr>
                        <th> </th><th>1332</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>1333</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $dates = $Set-&gt;GetDatesArray();</span> </td>
                      </tr><tr>
                        <th> </th><th>1334</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1335</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!empty($dates)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1336</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // produce the sql for each row.</span> </td>
                      </tr><tr>
                        <th> </th><th>1337</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($dates as $key =&gt; $date) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1338</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $dates[$key] =</span> </td>
                      </tr><tr>
                        <th> </th><th>1339</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $EventId.','.</span> </td>
                      </tr><tr>
                        <th> </th><th>1340</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'FROM_UNIXTIME('.$date['start'].'),'.</span> </td>
                      </tr><tr>
                        <th> </th><th>1341</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ($date['time_associated'] ? 'TRUE' : 'FALSE').','.</span> </td>
                      </tr><tr>
                        <th> </th><th>1342</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;db-&gt;escape($date['duration']).','.</span> </td>
                      </tr><tr>
                        <th> </th><th>1343</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ($date['exclude'] ? 'TRUE' : 'FALSE');</span> </td>
                      </tr><tr>
                        <th> </th><th>1344</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1345</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1346</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // the main query</span> </td>
                      </tr><tr>
                        <th> </th><th>1347</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql_insert_dates =</span> </td>
                      </tr><tr>
                        <th> </th><th>1348</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'INSERT INTO event_dates (</span> </td>
                      </tr><tr>
                        <th> </th><th>1349</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_date_event_id,</span> </td>
                      </tr><tr>
                        <th> </th><th>1350</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_date_start,</span> </td>
                      </tr><tr>
                        <th> </th><th>1351</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_date_time_associated,</span> </td>
                      </tr><tr>
                        <th> </th><th>1352</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_date_duration,</span> </td>
                      </tr><tr>
                        <th> </th><th>1353</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_date_exclude</span> </td>
                      </tr><tr>
                        <th> </th><th>1354</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ) VALUES ('.implode('),(', $dates).')</span> </td>
                      </tr><tr>
                        <th> </th><th>1355</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ON DUPLICATE KEY UPDATE</span> </td>
                      </tr><tr>
                        <th> </th><th>1356</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_date_duration=IF(event_date_exclude OR VALUES(event_date_exclude,</span> </td>
                      </tr><tr>
                        <th> </th><th>1357</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NULL</span> </td>
                      </tr><tr>
                        <th> </th><th>1358</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; VALUES(event_date_duration)),</span> </td>
                      </tr><tr>
                        <th> </th><th>1359</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_date_exclude=event_date_exclude OR VALUES(event_date_exclude)';</span> </td>
                      </tr><tr>
                        <th> </th><th>1360</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1361</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // run it</span> </td>
                      </tr><tr>
                        <th> </th><th>1362</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;db-&gt;query($sql_insert_dates);</span> </td>
                      </tr><tr>
                        <th> </th><th>1363</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $dates_added = $this-&gt;db-&gt;affected_rows();</span> </td>
                      </tr><tr>
                        <th> </th><th>1364</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>1365</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $dates_added = 0;</span> </td>
                      </tr><tr>
                        <th> </th><th>1366</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1367</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1368</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rules = $Set-&gt;GetRulesArray();</span> </td>
                      </tr><tr>
                        <th> </th><th>1369</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1370</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rules_added = 0;</span> </td>
                      </tr><tr>
                        <th> </th><th>1371</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($rules as $rule) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1372</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recur = $rule['rule'];</span> </td>
                      </tr><tr>
                        <th> </th><th>1373</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $wkst = array_search($recur-&gt;GetWkSt(), CalendarRecurRule::$sWeekdays);</span> </td>
                      </tr><tr>
                        <th> </th><th>1374</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (FALSE === $wkst) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1375</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $wkst = NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>1376</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1377</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $fields = array(</span> </td>
                      </tr><tr>
                        <th> </th><th>1378</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_recur_rule_event_id'&nbsp; &nbsp;=&gt; $EventId,</span> </td>
                      </tr><tr>
                        <th> </th><th>1379</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_recur_rule_exclude'&nbsp; &nbsp; =&gt; $rule['exclude'],</span> </td>
                      </tr><tr>
                        <th> </th><th>1380</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_recur_rule_frequency'&nbsp; =&gt; $recur-&gt;GetFrequency(),</span> </td>
                      </tr><tr>
                        <th> </th><th>1381</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_recur_rule_until'&nbsp; &nbsp; &nbsp; =&gt; $recur-&gt;GetUntil(),</span> </td>
                      </tr><tr>
                        <th> </th><th>1382</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_recur_rule_count'&nbsp; &nbsp; &nbsp; =&gt; $recur-&gt;GetCount(),</span> </td>
                      </tr><tr>
                        <th> </th><th>1383</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_recur_rule_interval'&nbsp; &nbsp;=&gt; $recur-&gt;GetInterval(),</span> </td>
                      </tr><tr>
                        <th> </th><th>1384</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_recur_rule_week_start' =&gt; $wkst,</span> </td>
                      </tr><tr>
                        <th> </th><th>1385</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th> </th><th>1386</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1387</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;db-&gt;insert('event_recur_rules', $fields);</span> </td>
                      </tr><tr>
                        <th> </th><th>1388</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $affected = $this-&gt;db-&gt;affected_rows();</span> </td>
                      </tr><tr>
                        <th> </th><th>1389</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1390</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($affected &gt; 0) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1391</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule_id = $this-&gt;db-&gt;insert_id();</span> </td>
                      </tr><tr>
                        <th> </th><th>1392</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // add the other bits</span> </td>
                      </tr><tr>
                        <th> </th><th>1393</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bys = $recur-&gt;GetByArray();</span> </td>
                      </tr><tr>
                        <th> </th><th>1394</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1395</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!empty($bys)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1396</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // produce the sql for each row.</span> </td>
                      </tr><tr>
                        <th> </th><th>1397</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($bys as $key =&gt; $by) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1398</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bys[$key] =</span> </td>
                      </tr><tr>
                        <th> </th><th>1399</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule_id.','.</span> </td>
                      </tr><tr>
                        <th> </th><th>1400</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '"'.$by['by'].'",'.</span> </td>
                      </tr><tr>
                        <th> </th><th>1401</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;db-&gt;escape($by['primary']).','.</span> </td>
                      </tr><tr>
                        <th> </th><th>1402</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // secondary is part of primary key so can't be NULL, use zero</span> </td>
                      </tr><tr>
                        <th> </th><th>1403</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;db-&gt;escape(NULL !== $by['secondary'] ? $by['secondary'] : 0);</span> </td>
                      </tr><tr>
                        <th> </th><th>1404</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1405</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1406</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // the main query</span> </td>
                      </tr><tr>
                        <th> </th><th>1407</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql_insert_bys =</span> </td>
                      </tr><tr>
                        <th> </th><th>1408</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'INSERT INTO event_recur_rule_by (</span> </td>
                      </tr><tr>
                        <th> </th><th>1409</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_recur_rule_by_event_recur_rule_id,</span> </td>
                      </tr><tr>
                        <th> </th><th>1410</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_recur_rule_by_by,</span> </td>
                      </tr><tr>
                        <th> </th><th>1411</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_recur_rule_by_primary,</span> </td>
                      </tr><tr>
                        <th> </th><th>1412</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; event_recur_rule_by_secondary</span> </td>
                      </tr><tr>
                        <th> </th><th>1413</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ) VALUES ('.implode('),(', $bys).')';</span> </td>
                      </tr><tr>
                        <th> </th><th>1414</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1415</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // run it</span> </td>
                      </tr><tr>
                        <th> </th><th>1416</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;db-&gt;query($sql_insert_bys);</span> </td>
                      </tr><tr>
                        <th> </th><th>1417</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bys_added = $this-&gt;db-&gt;affected_rows();</span> </td>
                      </tr><tr>
                        <th> </th><th>1418</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>1419</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $bys_added = 0;</span> </td>
                      </tr><tr>
                        <th> </th><th>1420</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1421</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1422</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rules_added += $affected;</span> </td>
                      </tr><tr>
                        <th> </th><th>1423</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1424</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1425</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1426</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Update a given recurrence rule in the database.</span> </td>
                      </tr><tr>
                        <th> </th><th>1427</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function UpdateRecurrenceRule($Recur)</span> </td>
                      </tr><tr>
                        <th> </th><th>1428</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>1429</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1430</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1431</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1432</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Get a recurrence rule from the database.</span> </td>
                      </tr><tr>
                        <th> </th><th>1433</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th> </th><th>1434</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $EventId int Id of event.</span> </td>
                      </tr><tr>
                        <th> </th><th>1435</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return array</span> </td>
                      </tr><tr>
                        <th> </th><th>1436</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - rdates</span> </td>
                      </tr><tr>
                        <th> </th><th>1437</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - rrules</span> </td>
                      </tr><tr>
                        <th> </th><th>1438</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - exdates</span> </td>
                      </tr><tr>
                        <th> </th><th>1439</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - exrules</span> </td>
                      </tr><tr>
                        <th> </th><th>1440</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @todo Optional date limits</span> </td>
                      </tr><tr>
                        <th> </th><th>1441</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>1442</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function SelectRecurByEvent($EventId)</span> </td>
                      </tr><tr>
                        <th> </th><th>1443</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th> </th><th>1444</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; static $date_fields = array(</span> </td>
                      </tr><tr>
                        <th> </th><th>1445</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //'event_date_event_id&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AS event_id',</span> </td>
                      </tr><tr>
                        <th> </th><th>1446</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_date_start&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AS start',</span> </td>
                      </tr><tr>
                        <th> </th><th>1447</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_date_time_associated&nbsp; &nbsp; &nbsp;AS time_associated',</span> </td>
                      </tr><tr>
                        <th> </th><th>1448</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_date_duration&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AS duration',</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1449</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_date_exclude&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AS exclude',</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1105</th><th>1450</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>1106</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>1107</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th>1108</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /// Load a recurrence rule from the db.</span> </td>
                      </tr><tr>
                        <th>1109</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /**</span> </td>
                      </tr><tr>
                        <th>1110</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @param $RecurrenceRuleId int recurrence_rule_id of rule to get.</span> </td>
                      </tr><tr>
                        <th>1111</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return</span> </td>
                      </tr><tr>
                        <th>1112</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - RecurrenceRule rule from database.</span> </td>
                      </tr><tr>
                        <th>1113</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; - FALSE if the rule could not be loaded.</span> </td>
                      </tr><tr>
                        <th>1114</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                      </tr><tr>
                        <th>1115</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function GetRule($RecurrenceRuleId)</span> </td>
                      </tr><tr>
                        <th>1116</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                      </tr><tr>
                        <th>1117</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql =&nbsp; 'SELECT ' . $this-&gt;SqlSelectRecurrenceRule() .</span> </td>
                      </tr><tr>
                        <th>1118</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ' FROM&nbsp; recurrence_rules ' .</span> </td>
                      </tr><tr>
                        <th>1119</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'WHERE&nbsp; recurrence_rules.recurrence_rule_id = ?';</span> </td>
                      </tr><tr>
                        <th>1120</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $query = $this-&gt;db-&gt;query($sql, $RecurrenceRuleId);</span> </td>
                      </tr><tr>
                        <th>1121</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($query-&gt;num_rows() === 1) {</span> </td>
                      </tr><tr>
                        <th>1122</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return new RecurrenceRule($query-&gt;result_array());</span> </td>
                      </tr><tr>
                        <th>1123</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th>1124</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return FALSE;</span> </td>
                      </tr><tr>
                        <th>1125</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1451</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1452</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Get dates</span> </td>
                      </tr><tr>
                        <th> </th><th>1453</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;db-&gt;select(implode(',',$date_fields));</span> </td>
                      </tr><tr>
                        <th> </th><th>1454</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;db-&gt;from('event_dates');</span> </td>
                      </tr><tr>
                        <th> </th><th>1455</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;db-&gt;where(array('event_date_event_id' =&gt; $EventId));</span> </td>
                      </tr><tr>
                        <th> </th><th>1456</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @todo Limit by time using range of selection (min &lt;= date &lt;= max)</span> </td>
                      </tr><tr>
                        <th> </th><th>1457</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $dates_query = $this-&gt;db-&gt;get();</span> </td>
                      </tr><tr>
                        <th> </th><th>1458</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $dates = $dates_query-&gt;result_array();</span> </td>
                      </tr><tr>
                        <th> </th><th>1459</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1460</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $include_ranges = array();</span> </td>
                      </tr><tr>
                        <th> </th><th>1461</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $exclude_ranges = array();</span> </td>
                      </tr><tr>
                        <th> </th><th>1462</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($dates as $date) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1463</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start_parts = explode(' ', $date['start']);</span> </td>
                      </tr><tr>
                        <th> </th><th>1464</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start_date = str_replace('-','',$start_parts[0]); // YYYYMMDD</span> </td>
                      </tr><tr>
                        <th> </th><th>1465</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($date['time_associated']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1466</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start_time = str_replace(':','',$start_parts[1]); // HHMMSS</span> </td>
                      </tr><tr>
                        <th> </th><th>1467</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>1468</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $start_time = NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>1469</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1470</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $date['duration']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1471</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $duration = NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>1472</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>1473</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $duration = (int)$date['duration'];</span> </td>
                      </tr><tr>
                        <th> </th><th>1474</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1475</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!$date['exclude']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1476</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // include</span> </td>
                      </tr><tr>
                        <th> </th><th>1477</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!array_key_exists($start_date, $include_ranges)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1478</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $include_ranges[$start_date] = array();</span> </td>
                      </tr><tr>
                        <th> </th><th>1479</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1480</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $include_ranges[$start_date][$start_time] = $duration;</span> </td>
                      </tr><tr>
                        <th> </th><th>1481</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>1482</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // exclude (never a range)</span> </td>
                      </tr><tr>
                        <th> </th><th>1483</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!array_key_exists($start_date, $exclude_ranges)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1484</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $exclude_ranges[$start_date] = array();</span> </td>
                      </tr><tr>
                        <th> </th><th>1485</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1486</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $exclude_ranges[$start_date][$start_time] = FALSE;</span> </td>
                      </tr><tr>
                        <th> </th><th>1487</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1488</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1489</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1490</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1491</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; static $rule_fields = array(</span> </td>
                      </tr><tr>
                        <th> </th><th>1492</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_recur_rule_id&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AS rule_id',</span> </td>
                      </tr><tr>
                        <th> </th><th>1493</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_recur_rule_event_id&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AS event_id',</span> </td>
                      </tr><tr>
                        <th> </th><th>1494</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_recur_rule_exclude&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AS exclude',</span> </td>
                      </tr><tr>
                        <th> </th><th>1495</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_recur_rule_frequency&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AS frequency',</span> </td>
                      </tr><tr>
                        <th> </th><th>1496</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'UNIX_TIMESTAMP(event_recur_rule_until) AS until',</span> </td>
                      </tr><tr>
                        <th> </th><th>1497</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_recur_rule_count&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AS count',</span> </td>
                      </tr><tr>
                        <th> </th><th>1498</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_recur_rule_interval&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AS recur_interval',</span> </td>
                      </tr><tr>
                        <th> </th><th>1499</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_recur_rule_week_start&nbsp; &nbsp; AS week_start',</span> </td>
                      </tr><tr>
                        <th> </th><th>1500</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @todo join with first occurrence</span> </td>
                      </tr><tr>
                        <th> </th><th>1501</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1502</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_recur_rule_by_by&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AS by_by',</span> </td>
                      </tr><tr>
                        <th> </th><th>1503</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_recur_rule_by_primary&nbsp; &nbsp; AS by_primary',</span> </td>
                      </tr><tr>
                        <th> </th><th>1504</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_recur_rule_by_secondary&nbsp; AS by_secondary',</span> </td>
                      </tr><tr>
                        <th> </th><th>1505</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</span> </td>
                      </tr><tr>
                        <th> </th><th>1506</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /// @todo Limit by time using range of selection (until &gt; min)</span> </td>
                      </tr><tr>
                        <th> </th><th>1507</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1508</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Get recurrence rules</span> </td>
                      </tr><tr>
                        <th> </th><th>1509</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;db-&gt;select(implode(',',$rule_fields));</span> </td>
                      </tr><tr>
                        <th> </th><th>1510</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;db-&gt;from('event_recur_rules');</span> </td>
                      </tr><tr>
                        <th> </th><th>1511</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;db-&gt;join('event_recur_rule_by',</span> </td>
                      </tr><tr>
                        <th> </th><th>1512</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'event_recur_rule_by_event_recur_rule_id = event_recur_rule_id','left');</span> </td>
                      </tr><tr>
                        <th> </th><th>1513</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;db-&gt;where(array('event_recur_rule_event_id' =&gt; $EventId));</span> </td>
                      </tr><tr>
                        <th> </th><th>1514</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rules_query = $this-&gt;db-&gt;get();</span> </td>
                      </tr><tr>
                        <th> </th><th>1515</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>1516</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Turn each rule into an object</span> </td>
                      </tr><tr>
                        <th> </th><th>1517</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rrules = array();</span> </td>
                      </tr><tr>
                        <th> </th><th>1518</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $exrules = array();</span> </td>
                      </tr><tr>
                        <th> </th><th>1519</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $results = $rules_query-&gt;result_array();</span> </td>
                      </tr><tr>
                        <th> </th><th>1520</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($results as $rule_data) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1521</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $category_name = ($rule_data['exclude'] ? 'exrules' : 'rrules');</span> </td>
                      </tr><tr>
                        <th> </th><th>1522</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // If not already created, do so now</span> </td>
                      </tr><tr>
                        <th> </th><th>1523</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $recur_id = (int)$rule_data['rule_id'];</span> </td>
                      </tr><tr>
                        <th> </th><th>1524</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!array_key_exists($recur_id, $$category_name)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1525</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule = new CalendarRecurRule();</span> </td>
                      </tr><tr>
                        <th> </th><th>1526</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule-&gt;SetFrequency($rule_data['frequency']);</span> </td>
                      </tr><tr>
                        <th> </th><th>1527</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL !== $rule_data['until']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1528</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule-&gt;SetUntil((int)$rule_data['until']);</span> </td>
                      </tr><tr>
                        <th> </th><th>1529</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (NULL !== $rule_data['count']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1530</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule-&gt;SetCount((int)$rule_data['count']);</span> </td>
                      </tr><tr>
                        <th> </th><th>1531</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1532</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL !== $rule_data['recur_interval']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1533</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule-&gt;SetInterval((int)$rule_data['recur_interval']);</span> </td>
                      </tr><tr>
                        <th> </th><th>1534</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1535</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL !== $rule_data['week_start']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1536</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule-&gt;SetWkSt(CalendarRecurRule::$sWeekdays[strtoupper($rule_data['week_start'])]);</span> </td>
                      </tr><tr>
                        <th> </th><th>1537</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1538</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($rule_data['exclude']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1539</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $exrules[$recur_id] = $rule;</span> </td>
                      </tr><tr>
                        <th> </th><th>1540</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>1541</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rrules[$recur_id] = $rule;</span> </td>
                      </tr><tr>
                        <th> </th><th>1542</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1543</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1544</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // If by data included, add it</span> </td>
                      </tr><tr>
                        <th> </th><th>1545</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL !== $rule_data['by_by']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1546</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $primary = (int)$rule_data['by_primary'];</span> </td>
                      </tr><tr>
                        <th> </th><th>1547</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $optional = $rule_data['by_secondary'];</span> </td>
                      </tr><tr>
                        <th> </th><th>1548</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL !== $optional) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1549</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($optional != 0) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1550</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $optional = (int)$optional;</span> </td>
                      </tr><tr>
                        <th> </th><th>1551</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>1552</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $optional = NULL;</span> </td>
                      </tr><tr>
                        <th> </th><th>1553</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1554</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1555</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($rule_data['exclude']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1556</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule = &amp; $exrules[$recur_id];</span> </td>
                      </tr><tr>
                        <th> </th><th>1557</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                      </tr><tr>
                        <th> </th><th>1558</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule = &amp; $rrules[$recur_id];</span> </td>
                      </tr><tr>
                        <th> </th><th>1559</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1560</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; switch ($rule_data['by_by']) {</span> </td>
                      </tr><tr>
                        <th> </th><th>1561</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'second':</span> </td>
                      </tr><tr>
                        <th> </th><th>1562</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule-&gt;SetBySecond($primary);</span> </td>
                      </tr><tr>
                        <th> </th><th>1563</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th> </th><th>1564</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'minute':</span> </td>
                      </tr><tr>
                        <th> </th><th>1565</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule-&gt;SetByMinute($primary);</span> </td>
                      </tr><tr>
                        <th> </th><th>1566</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th> </th><th>1567</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'hour':</span> </td>
                      </tr><tr>
                        <th> </th><th>1568</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule-&gt;SetByHour($primary);</span> </td>
                      </tr><tr>
                        <th> </th><th>1569</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th> </th><th>1570</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'day':</span> </td>
                      </tr><tr>
                        <th> </th><th>1571</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule-&gt;SetByDay($primary, $optional);</span> </td>
                      </tr><tr>
                        <th> </th><th>1572</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th> </th><th>1573</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'monthday':</span> </td>
                      </tr><tr>
                        <th> </th><th>1574</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule-&gt;SetByMonthDay($primary);</span> </td>
                      </tr><tr>
                        <th> </th><th>1575</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th> </th><th>1576</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'yearday':</span> </td>
                      </tr><tr>
                        <th> </th><th>1577</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule-&gt;SetByYearDay($primary);</span> </td>
                      </tr><tr>
                        <th> </th><th>1578</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th> </th><th>1579</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'weekno':</span> </td>
                      </tr><tr>
                        <th> </th><th>1580</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule-&gt;SetByWeekNo($primary);</span> </td>
                      </tr><tr>
                        <th> </th><th>1581</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th> </th><th>1582</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'month':</span> </td>
                      </tr><tr>
                        <th> </th><th>1583</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule-&gt;SetByMonth($primary);</span> </td>
                      </tr><tr>
                        <th> </th><th>1584</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th> </th><th>1585</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'setpos':</span> </td>
                      </tr><tr>
                        <th> </th><th>1586</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule-&gt;SetBySetPos($primary);</span> </td>
                      </tr><tr>
                        <th> </th><th>1587</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th> </th><th>1588</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'term':</span> </td>
                      </tr><tr>
                        <th> </th><th>1589</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule-&gt;SetByTerm($primary);</span> </td>
                      </tr><tr>
                        <th> </th><th>1590</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th> </th><th>1591</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'termday':</span> </td>
                      </tr><tr>
                        <th> </th><th>1592</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule-&gt;SetByTermDay($primary);</span> </td>
                      </tr><tr>
                        <th> </th><th>1593</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th> </th><th>1594</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'termweek':</span> </td>
                      </tr><tr>
                        <th> </th><th>1595</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule-&gt;SetByTermWeek($primary);</span> </td>
                      </tr><tr>
                        <th> </th><th>1596</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th> </th><th>1597</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'easter':</span> </td>
                      </tr><tr>
                        <th> </th><th>1598</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rule-&gt;SetByEaster($primary);</span> </td>
                      </tr><tr>
                        <th> </th><th>1599</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span> </td>
                      </tr><tr>
                        <th> </th><th>1600</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1601</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1602</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>1603</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr class="last">
                        <th> </th><th>1604</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return array($include_ranges, $rrules, $exclude_ranges, $exrules);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1126</th><th>1605</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>1127</th><th>1606</th><td class="l"><span>}</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file20">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to system/application/views/calendar/agenda.php" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/system/application/views/calendar/agenda.php">system/application/views/calendar/agenda.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 0739f58b44106088ddb65e6adf693c4934e79e58">
                    <a title="Show revision 0739f58b44106088ddb65e6adf693c4934e79e58 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/agenda.php?rev=0739f58b44106088ddb65e6adf693c4934e79e58#L1">
                      r0739f</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/agenda.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="mod">
                      <tr class="first">
                        <th>1</th><th> </th><td class="l"><span>&lt;?php foreach ($Events as $event) { ?&gt;</span> </td>
                      </tr><tr>
                        <th>2</th><th> </th><td class="l"><span>&lt;pre&gt;&lt;?php var_dump($event); ?&gt;&lt;/pre&gt;</span> </td>
                      </tr><tr>
                        <th>3</th><th> </th><td class="l"><span>&lt;?php } ?&gt;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1</th><td class="r"><span>&lt;?php</span> </td>
                      </tr><tr>
                        <th> </th><th>2</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>3</th><td class="r"><span>/**</span> </td>
                      </tr><tr>
                        <th> </th><th>4</th><td class="r"><span>&nbsp;* @param $MiniMode bool</span> </td>
                      </tr><tr>
                        <th> </th><th>5</th><td class="r"><span>&nbsp;* @param $Events</span> </td>
                      </tr><tr>
                        <th> </th><th>6</th><td class="r"><span>&nbsp;* @param $Occurrences</span> </td>
                      </tr><tr>
                        <th> </th><th>7</th><td class="r"><span>&nbsp;*/</span> </td>
                      </tr><tr>
                        <th> </th><th>8</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>9</th><td class="r"><span>if (!empty($Occurrences)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>10</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; foreach ($Occurrences as $occurrence) {</span> </td>
                      </tr><tr>
                        <th> </th><th>11</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo('&lt;div class="BlueBox"&gt;');</span> </td>
                      </tr><tr>
                        <th> </th><th>12</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo($occurrence-&gt;StartTime-&gt;Format('H:i').' - '.$occurrence-&gt;Event-&gt;Name);</span> </td>
                      </tr><tr>
                        <th> </th><th>13</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo('&lt;/div&gt;');</span> </td>
                      </tr><tr>
                        <th> </th><th>14</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>15</th><td class="r"><span>} else {</span> </td>
                      </tr><tr>
                        <th> </th><th>16</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; ?&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>17</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; You have no events today.</span> </td>
                      </tr><tr>
                        <th> </th><th>18</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;?php</span> </td>
                      </tr><tr>
                        <th> </th><th>19</th><td class="r"><span>}</span> </td>
                      </tr><tr>
                        <th> </th><th>20</th><td class="r"><span></span> </td>
                      </tr><tr class="last">
                        <th> </th><th>21</th><td class="r"><span>?&gt;</span> </td>
                      </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file21">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to system/application/views/calendar/day.php" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/system/application/views/calendar/day.php">system/application/views/calendar/day.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 0739f58b44106088ddb65e6adf693c4934e79e58">
                    <a title="Show revision 0739f58b44106088ddb65e6adf693c4934e79e58 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/day.php?rev=0739f58b44106088ddb65e6adf693c4934e79e58#L9">
                      r0739f</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/day.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L9">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>9</th><th>9</th><td class="l"><span>?&gt;</span> </td>
                  </tr><tr>
                          <th>10</th><th>10</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>11</th><th> </th><td class="l"><span>&lt;h3&gt;&lt;?php echo $DateDescription<del></del> ?&gt;&lt;/h3&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>11</th><td class="r"><span>&lt;h3&gt;&lt;?php echo $DateDescription<ins>;</ins> ?&gt;&lt;/h3&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>12</th><th>12</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>13</th><th>13</th><td class="l"><span>&lt;div id='RightColumn'&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/day.php?rev=0739f58b44106088ddb65e6adf693c4934e79e58#L17">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/day.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L17">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>17</th><th>17</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>18</th><th>18</th><td class="l"><span>&lt;div id="MainColumn"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>19</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="BlueBox"&gt;</span> </td>
                      </tr><tr>
                        <th>20</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h2&gt;Day&lt;/h2&gt;</span> </td>
                      </tr><tr>
                        <th>21</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;?php $DaysView-&gt;Load(); ?&gt;</span> </td>
                      </tr><tr>
                        <th>22</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>19</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;?php $DaysView-&gt;Load(); ?&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>23</th><th>20</th><td class="l"><span>&lt;/div&gt;</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file22">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to system/application/views/calendar/days.php" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/system/application/views/calendar/days.php">system/application/views/calendar/days.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 0739f58b44106088ddb65e6adf693c4934e79e58">
                    <a title="Show revision 0739f58b44106088ddb65e6adf693c4934e79e58 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/days.php?rev=0739f58b44106088ddb65e6adf693c4934e79e58#L1">
                      r0739f</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/days.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="mod">
                      <tr class="first">
                        <th>1</th><th> </th><td class="l"><span>&lt;?php foreach ($Events as $event) { ?&gt;</span> </td>
                      </tr><tr>
                        <th>2</th><th> </th><td class="l"><span>&lt;pre&gt;&lt;?php var_dump($event); ?&gt;&lt;/pre&gt;</span> </td>
                      </tr><tr>
                        <th>3</th><th> </th><td class="l"><span>&lt;?php } ?&gt;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>1</th><td class="r"><span>&lt;?php</span> </td>
                      </tr><tr>
                        <th> </th><th>2</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>3</th><td class="r"><span>function DrawOccurrence(&amp;$Occurrence)</span> </td>
                      </tr><tr>
                        <th> </th><th>4</th><td class="r"><span>{</span> </td>
                      </tr><tr>
                        <th> </th><th>5</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; echo('&lt;div class="BlueBox"&gt;');</span> </td>
                      </tr><tr>
                        <th> </th><th>6</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; echo($Occurrence-&gt;StartTime-&gt;Format('g:m a'));</span> </td>
                      </tr><tr>
                        <th> </th><th>7</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; echo('&lt;br /&gt;');</span> </td>
                      </tr><tr>
                        <th> </th><th>8</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; echo($Occurrence-&gt;Event-&gt;Name);</span> </td>
                      </tr><tr>
                        <th> </th><th>9</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; echo('&lt;/div&gt;');</span> </td>
                      </tr><tr>
                        <th> </th><th>10</th><td class="r"><span>}</span> </td>
                      </tr><tr>
                        <th> </th><th>11</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>12</th><td class="r"><span>echo('&lt;table width="100%"&gt;');</span> </td>
                      </tr><tr>
                        <th> </th><th>13</th><td class="r"><span>echo('&lt;tr&gt;');</span> </td>
                      </tr><tr>
                        <th> </th><th>14</th><td class="r"><span>foreach ($Days as $date =&gt; $times) {</span> </td>
                      </tr><tr>
                        <th> </th><th>15</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; echo('&lt;th align="center"&gt;');</span> </td>
                      </tr><tr>
                        <th> </th><th>16</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; echo($times['date']-&gt;Format('l'));</span> </td>
                      </tr><tr>
                        <th> </th><th>17</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; echo('&lt;br /&gt;');</span> </td>
                      </tr><tr>
                        <th> </th><th>18</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; echo($times['date']-&gt;Format('jS M'));</span> </td>
                      </tr><tr>
                        <th> </th><th>19</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; echo('&lt;/th&gt;');</span> </td>
                      </tr><tr>
                        <th> </th><th>20</th><td class="r"><span>}</span> </td>
                      </tr><tr>
                        <th> </th><th>21</th><td class="r"><span>echo('&lt;tr&gt;');</span> </td>
                      </tr><tr>
                        <th> </th><th>22</th><td class="r"><span>foreach ($Days as $date =&gt; $day) {</span> </td>
                      </tr><tr>
                        <th> </th><th>23</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; $times = $day['events'];</span> </td>
                      </tr><tr>
                        <th> </th><th>24</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; if (array_key_exists('000000',$times)) {</span> </td>
                      </tr><tr>
                        <th> </th><th>25</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo('&lt;td&gt;');</span> </td>
                      </tr><tr>
                        <th> </th><th>26</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($times['000000'] as $occurrence) {</span> </td>
                      </tr><tr>
                        <th> </th><th>27</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!$occurrence-&gt;TimeAssociated) {</span> </td>
                      </tr><tr>
                        <th> </th><th>28</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DrawOccurrence($occurrence);</span> </td>
                      </tr><tr>
                        <th> </th><th>29</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>30</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>31</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo('&lt;/td&gt;');</span> </td>
                      </tr><tr>
                        <th> </th><th>32</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>33</th><td class="r"><span>}</span> </td>
                      </tr><tr>
                        <th> </th><th>34</th><td class="r"><span>echo('&lt;/tr&gt;&lt;tr&gt;');</span> </td>
                      </tr><tr>
                        <th> </th><th>35</th><td class="r"><span>foreach ($Days as $date =&gt; $day) {</span> </td>
                      </tr><tr>
                        <th> </th><th>36</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; $times = $day['events'];</span> </td>
                      </tr><tr>
                        <th> </th><th>37</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; echo('&lt;td&gt;');</span> </td>
                      </tr><tr>
                        <th> </th><th>38</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; foreach ($times as $time =&gt; $ocs) {</span> </td>
                      </tr><tr>
                        <th> </th><th>39</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($ocs as $occurrence) {</span> </td>
                      </tr><tr>
                        <th> </th><th>40</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($occurrence-&gt;TimeAssociated) {</span> </td>
                      </tr><tr>
                        <th> </th><th>41</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DrawOccurrence($occurrence);</span> </td>
                      </tr><tr>
                        <th> </th><th>42</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>43</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>44</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>45</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; echo('&lt;/td&gt;');</span> </td>
                      </tr><tr>
                        <th> </th><th>46</th><td class="r"><span>}</span> </td>
                      </tr><tr>
                        <th> </th><th>47</th><td class="r"><span>echo('&lt;/tr&gt;');</span> </td>
                      </tr><tr>
                        <th> </th><th>48</th><td class="r"><span>echo('&lt;/table&gt;');</span> </td>
                      </tr><tr>
                        <th> </th><th>49</th><td class="r"><span></span> </td>
                      </tr><tr class="last">
                        <th> </th><th>50</th><td class="r"><span>?&gt;</span> </td>
                      </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file24">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to system/application/views/calendar/simpleadd.php" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/system/application/views/calendar/simpleadd.php">system/application/views/calendar/simpleadd.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 364be541270d6f69572dd3945a9850c6ed1d899d">
                    <a title="Show revision 364be541270d6f69572dd3945a9850c6ed1d899d of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/simpleadd.php?rev=364be541270d6f69572dd3945a9850c6ed1d899d#L1">
                      r364be5</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/simpleadd.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L1">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="add">
                  <tr class="first">
                          <th> </th><th>1</th><td class="r"><ins>&lt;?php</ins> </td>
                  </tr><tr>
                          <th> </th><th>2</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>3</th><td class="r"><ins>/**</ins> </td>
                  </tr><tr>
                          <th> </th><th>4</th><td class="r"><ins>&nbsp;* @param $EventCategories array[id =&gt; array('id'=&gt;,'name'=&gt;,'colour'=&gt;)]</ins> </td>
                  </tr><tr>
                          <th> </th><th>5</th><td class="r"><ins>&nbsp;* @param $AddForm id</ins> </td>
                  </tr><tr>
                          <th> </th><th>6</th><td class="r"><ins>&nbsp;*/</ins> </td>
                  </tr><tr>
                          <th> </th><th>7</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>8</th><td class="r"><ins>?&gt;</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>9</th><td class="r"><ins></ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1</th><th>10</th><td class="l"><span>&lt;div id="RightColumn"&gt;</span> </td>
                  </tr><tr>
                          <th>2</th><th>11</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;h2 class="first"&gt;What's this?&lt;/h2&gt;</span> </td>
                  </tr><tr>
                          <th>3</th><th>12</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="Entry"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>4</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p&gt;Some <del>bullshit</del> about adding events.&lt;/p&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>13</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p&gt;Some <ins>useful information</ins> about adding events.&lt;/p&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>5</th><th>14</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>6</th><th>15</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span> </td>
                  </tr><tr>
                          <th>7</th><th>16</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;h2&gt;Hints&lt;/h2&gt;</span> </td>
                  </tr><tr>
                          <th>8</th><th>17</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="Entry"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>9</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p&gt;<del>Weeeeeeeeee</del>!&lt;/p&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>18</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p&gt;<ins>hello</ins>!&lt;/p&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>10</th><th>19</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span> </td>
                  </tr><tr>
                          <th>11</th><th>20</th><td class="l"><span>&lt;/div&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/simpleadd.php?rev=364be541270d6f69572dd3945a9850c6ed1d899d#L13">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/simpleadd.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L22">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>13</th><th>22</th><td class="l"><span>&lt;script type="text/javascript"&gt;</span> </td>
                  </tr><tr>
                          <th>14</th><th>23</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>15</th><th> </th><td class="l"><span>function <del>ShitFunction</del>()</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>24</th><td class="r"><span>function <ins>FrequencyChange</ins>()</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>16</th><th>25</th><td class="l"><span>{</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>17</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; var repeat_select = document.getElementById("<del>repeat</del>");</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>26</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; var repeat_select = document.getElementById("<ins>a_frequency</ins>");</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>18</th><th>27</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; var repeat_type = repeat_select.options[repeat_select.selectedIndex].value</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>19</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; var repeat_div = document.getElementById("<del>repeat</del>_div");</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>28</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; var repeat_div = document.getElementById("<ins>frequency</ins>_div");</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>20</th><th>29</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>21</th><th>30</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if (repeat_type == "none")</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/simpleadd.php?rev=364be541270d6f69572dd3945a9850c6ed1d899d#L25">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/simpleadd.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L34">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>25</th><th>34</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; else if (repeat_type == "daily")</span> </td>
                  </tr><tr>
                          <th>26</th><th>35</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>27</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; repeat_div.innerHTML = '&lt;fieldset&gt;&lt;label for="<del>"&gt;Every:&lt;/label&gt;&lt;input</del> type="text" size="3" value="1"&gt; day(s)&lt;/fieldset&gt;'</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>36</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; repeat_div.innerHTML = '&lt;fieldset&gt;&lt;label for="<ins>a_interval"&gt;Every:&lt;/label&gt;&lt;input name="a_interval" id="a_interval"</ins> type="text" size="3" value="1"&gt; day(s)&lt;/fieldset&gt;'</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>28</th><th>37</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>29</th><th>38</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; else if (repeat_type == "weekly")</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/simpleadd.php?rev=364be541270d6f69572dd3945a9850c6ed1d899d#L31">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/simpleadd.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L40">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>31</th><th>40</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; repeat_div.innerHTML = '\</span> </td>
                  </tr><tr>
                          <th>32</th><th>41</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;fieldset&gt;\</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>33</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="<del>rw_oft"&gt;Every&lt;/label&gt;&lt;input</del> type="text" size="3" value="1"&gt;&lt;br /&gt;\</span> </td>
                      </tr><tr>
                        <th>34</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="<del>rw_mon"&gt;Monday&lt;/label&gt;&lt;input id="rw_mon</del>" type="checkbox"&gt;&lt;br /&gt;\</span> </td>
                      </tr><tr>
                        <th>35</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="<del>rw_tur"&gt;Tuesday&lt;/label&gt;&lt;input id="rw_tur</del>" type="checkbox"&gt;&lt;br /&gt;\</span> </td>
                      </tr><tr>
                        <th>36</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="<del>rw_wed"&gt;Wednesday&lt;/label&gt;&lt;input id="rw_wed</del>" type="checkbox"&gt;&lt;br /&gt;\</span> </td>
                      </tr><tr>
                        <th>37</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="<del>rw_thu"&gt;Thursday&lt;/label&gt;&lt;input id="rw_thu</del>" type="checkbox"&gt;&lt;br /&gt;\</span> </td>
                      </tr><tr>
                        <th>38</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="<del>rw_fri"&gt;Friday&lt;/label&gt;&lt;input id="rw_fri</del>" type="checkbox"&gt;&lt;br /&gt;\</span> </td>
                      </tr><tr>
                        <th>39</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="<del>rw_sat"&gt;Saturday&lt;/label&gt;&lt;input id="rw_sat</del>" type="checkbox"&gt;&lt;br /&gt;\</span> </td>
                      </tr><tr>
                        <th>40</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="<del>rw_sun"&gt;Sunday&lt;/label&gt;&lt;input id="rw_sun</del>" type="checkbox"&gt;&lt;br /&gt;\</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>42</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="<ins>a_interval"&gt;Every&lt;/label&gt;&lt;input name="a_interval" id="a_interval"</ins> type="text" size="3" value="1"&gt;&lt;br /&gt;\</span> </td>
                      </tr><tr>
                        <th> </th><th>43</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="<ins>a_onday[mon]"&gt;Monday&lt;/label&gt;&lt;input name="a_onday[mon]" id="a_onday[mon]</ins>" type="checkbox"&gt;&lt;br /&gt;\</span> </td>
                      </tr><tr>
                        <th> </th><th>44</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="<ins>a_onday[tue]"&gt;Tuesday&lt;/label&gt;&lt;input name="a_onday[tue]" id="a_onday[tue]</ins>" type="checkbox"&gt;&lt;br /&gt;\</span> </td>
                      </tr><tr>
                        <th> </th><th>45</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="<ins>a_onday[wed]"&gt;Wednesday&lt;/label&gt;&lt;input name="a_onday[wed]" id="a_onday[wed]</ins>" type="checkbox"&gt;&lt;br /&gt;\</span> </td>
                      </tr><tr>
                        <th> </th><th>46</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="<ins>a_onday[thu]"&gt;Thursday&lt;/label&gt;&lt;input name="a_onday[thu]" id="a_onday[thu]</ins>" type="checkbox"&gt;&lt;br /&gt;\</span> </td>
                      </tr><tr>
                        <th> </th><th>47</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="<ins>a_onday[fri]"&gt;Friday&lt;/label&gt;&lt;input name="a_onday[fri]" id="a_onday[fri]</ins>" type="checkbox"&gt;&lt;br /&gt;\</span> </td>
                      </tr><tr>
                        <th> </th><th>48</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="<ins>a_onday[sat]"&gt;Saturday&lt;/label&gt;&lt;input name="a_onday[sat]" id="a_onday[sat]</ins>" type="checkbox"&gt;&lt;br /&gt;\</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>49</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="<ins>a_onday[sun]"&gt;Sunday&lt;/label&gt;&lt;input name="a_onday[sun]" id="a_onday[sun]</ins>" type="checkbox"&gt;&lt;br /&gt;\</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>41</th><th>50</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/fieldset&gt;';</span> </td>
                  </tr><tr>
                          <th>42</th><th>51</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>43</th><th>52</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; else if (repeat_type == "yearly")</span> </td>
                  </tr><tr>
                          <th>44</th><th>53</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>45</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; repeat_div.innerHTML = '&lt;fieldset&gt;&lt;label for="<del>"&gt;Every:&lt;/label&gt;&lt;input</del> type="text" size="3" value="1"&gt; year(s)&lt;/fieldset&gt;'</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>54</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; repeat_div.innerHTML = '&lt;fieldset&gt;&lt;label for="<ins>a_interval"&gt;Every:&lt;/label&gt;&lt;input name="a_interval" id="a_interval"</ins> type="text" size="3" value="1"&gt; year(s)&lt;/fieldset&gt;'</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>46</th><th>55</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>47</th><th>56</th><td class="l"><span>}</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/simpleadd.php?rev=364be541270d6f69572dd3945a9850c6ed1d899d#L52">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/simpleadd.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L61">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>52</th><th>61</th><td class="l"><span>&lt;div class="BlueBox"&gt;</span> </td>
                  </tr><tr>
                          <th>53</th><th>62</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h2&gt;add event&lt;/h2&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>54</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;form id="" action="<del></del>" method="post" class=""&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>63</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;form id="" action="<ins>&lt;?php echo($AddForm['target']); ?&gt;</ins>" method="post" class=""&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>55</th><th>64</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>56</th><th>65</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;fieldset&gt;</span> </td>
                  </tr><tr>
                          <th>57</th><th>66</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- &lt;br /&gt; tags necessary for correct rendering in text based browsers --&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>58</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="a_<del>authorname"&gt;What</del>: &lt;/label&gt;</span> </td>
                      </tr><tr>
                        <th>59</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type="text" name="a_<del>authorname" id="a_authorname" value="</del>" size="30"/&gt;&lt;br /&gt;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>67</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="a_<ins>summary"&gt;Summary</ins>: &lt;/label&gt;</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>68</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type="text" name="a_<ins>summary" id="a_summary" value="&lt;?php echo($AddForm['default_summary']); ?&gt;</ins>" size="30"/&gt;&lt;br /&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>60</th><th>69</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>61</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="a_authorname"&gt;Start: &lt;/label&gt;</span> </td>
                      </tr><tr>
                        <th>62</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type="text" name="a_authorname" id="a_authorname" value="29/03/2007" size="10"/&gt;</span> </td>
                      </tr><tr>
                        <th>63</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type="text" name="a_authorname" id="a_authorname" value="9.15" size="5"/&gt;</span> </td>
                      </tr><tr>
                        <th>64</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="finish_date"&gt;Finish: &lt;/label&gt;</span> </td>
                      </tr><tr>
                        <th>65</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type="text" name="a_authorname" id="a_authorname" value="29/03/2007" size="10"/&gt;</span> </td>
                      </tr><tr>
                        <th>66</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type="text" name="a_authorname" id="a_authorname" value="10.15" size="5"/&gt;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>70</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="a_allday"&gt;All day:&lt;/label&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>71</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type="checkbox" name="a_allday" &lt;?php if ($AddForm['default_allday']) echo('checked="checked"');?&gt; /&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>72</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                      </tr><tr>
                        <th> </th><th>73</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="a_startdate"&gt;Start: &lt;/label&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>74</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type="text" name="a_startdate" id="a_startdate" value="&lt;?php echo($AddForm['default_startdate']); ?&gt;" size="10" /&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>75</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type="text" name="a_starttime" id="a_starttime" value="&lt;?php echo($AddForm['default_starttime']); ?&gt;" size="5" /&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>76</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="a_enddate"&gt;Finish: &lt;/label&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>77</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type="text" name="a_enddate" id="a_enddate" value="&lt;?php echo($AddForm['default_enddate']); ?&gt;" size="10" /&gt;</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>78</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type="text" name="a_endtime" id="a_endtime" value="&lt;?php echo($AddForm['default_endtime']); ?&gt;" size="5" /&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>67</th><th>79</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;br /&gt;</span> </td>
                  </tr><tr>
                          <th>68</th><th>80</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>69</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="a_authorname"&gt;Where: &lt;/label&gt;</span> </td>
                      </tr><tr>
                        <th>70</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type="text" id="autocomplete" name="autocomplete_parameter"/&gt;</span> </td>
                      </tr><tr>
                        <th>71</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span id="indicator1" style="display: none"&gt;&lt;img src="/images/spinner.gif" alt="Working..." /&gt;&lt;/span&gt;</span> </td>
                      </tr><tr>
                        <th>72</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="autocomplete_choices" class="autocomplete"&gt;&lt;/div&gt;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>81</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="a_location"&gt;Where: &lt;/label&gt;</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>82</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type="text" id="a_location" name="a_location" /&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>73</th><th>83</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>74</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for=""&gt;Description:&lt;/label&gt;</span> </td>
                      </tr><tr>
                        <th>75</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;textarea&lt;/textarea&gt;&lt;br /&gt;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>84</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="a_category"&gt;Category: &lt;/label&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>85</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;select id="a_category" name="a_category"&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>86</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;?php</span> </td>
                      </tr><tr>
                        <th> </th><th>87</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($EventCategories as $key =&gt; $category) {</span> </td>
                      </tr><tr>
                        <th> </th><th>88</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo('&lt;option value="'.$key.'"'.($key == $AddForm['default_eventcategory'] ? ' selected="selected"':'').'&gt;');</span> </td>
                      </tr><tr>
                        <th> </th><th>89</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo($category['name']);</span> </td>
                      </tr><tr>
                        <th> </th><th>90</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo('&lt;/option&gt;');</span> </td>
                      </tr><tr>
                        <th> </th><th>91</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>92</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ?&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>93</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/select&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>94</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>95</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="a_description"&gt;Description:&lt;/label&gt;</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>96</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;textarea id="a_description" name="a_description"&gt;&lt;/textarea&gt;&lt;br /&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>76</th><th>97</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>77</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="<del></del>"&gt;Repeats:&lt;/label&gt;</span> </td>
                      </tr><tr>
                        <th>78</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;select onchange="<del>ShitFunction()" id="repeat</del>"&gt;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>98</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label for="<ins>a_frequency</ins>"&gt;Repeats:&lt;/label&gt;</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>99</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;select onchange="<ins>FrequencyChange()" id="a_frequency" name="a_frequency</ins>"&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>79</th><th>100</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;option value="none" selected="selected"&gt;None&lt;/option&gt;</span> </td>
                  </tr><tr>
                          <th>80</th><th>101</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;option value="daily"&gt;Daily&lt;/option&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/simpleadd.php?rev=364be541270d6f69572dd3945a9850c6ed1d899d#L84">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/simpleadd.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L105">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>84</th><th>105</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;br /&gt;&lt;br /&gt;</span> </td>
                  </tr><tr>
                          <th>85</th><th>106</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/fieldset&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>86</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="<del>repeat</del>_div" style=""&gt;&lt;/div&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>107</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="<ins>frequency</ins>_div" style=""&gt;&lt;/div&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>87</th><th>108</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;fieldset&gt;</span> </td>
                  </tr><tr>
                          <th>88</th><th>109</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/fieldset&gt;</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file25">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to system/application/views/calendar/todo_list.php" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/system/application/views/calendar/todo_list.php">system/application/views/calendar/todo_list.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 0739f58b44106088ddb65e6adf693c4934e79e58">
                    <a title="Show revision 0739f58b44106088ddb65e6adf693c4934e79e58 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/todo_list.php?rev=0739f58b44106088ddb65e6adf693c4934e79e58#L13">
                      r0739f</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/calendar/todo_list.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L13">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>13</th><th>13</th><td class="l"><span>&nbsp;*&nbsp; &nbsp; &nbsp; - Created</span> </td>
                  </tr><tr>
                          <th>14</th><th>14</th><td class="l"><span>&nbsp;*</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>15</th><th> </th><td class="l"><span>&nbsp;* @param $Items array Array of to-do list items</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>15</th><td class="r"><span>&nbsp;* @param $Items array[CalendarOccurrence] Array of to-do list items</span> </td>
                      </tr><tr>
                        <th> </th><th>16</th><td class="r"><span>&nbsp;* @param $InlineAdder bool Whether to have an inline todo adder.</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>17</th><td class="r"><span>&nbsp;* @param $InlineAdderTarget string</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>16</th><th>18</th><td class="l"><span>&nbsp;*</span> </td>
                  </tr><tr>
                          <th>17</th><th>19</th><td class="l"><span>&nbsp;*/</span> </td>
                  </tr><tr>
                          <th>18</th><th>20</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>19</th><th> </th><td class="l"><span>?&gt;</span> </td>
                      </tr><tr>
                        <th>20</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>21</th><th> </th><td class="l"><span>&lt;ul&gt;</span> </td>
                      </tr><tr>
                        <th>22</th><th> </th><td class="l"><span>&lt;?php</span> </td>
                      </tr><tr>
                        <th>23</th><th> </th><td class="l"><span>foreach ($Events as $event) {</span> </td>
                      </tr><tr>
                        <th>24</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; echo '&lt;li&gt;'.$event-&gt;Name.'&lt;/li&gt;';</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>21</th><td class="r"><span>if ($InlineAdder) {</span> </td>
                      </tr><tr>
                        <th> </th><th>22</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; ?&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>23</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="BlueBox"&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>24</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;form method="post" action="&lt;?php echo $InlineAdderTarget; ?&gt;"&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>25</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input name="todo_name" /&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>26</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input name="todo_submit" type="submit" value="Add"/&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>27</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/form&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>28</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>29</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;?php</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>25</th><th>30</th><td class="l"><span>}</span> </td>
                  </tr><tr>
                          <th>26</th><th>31</th><td class="l"><span>?&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>27</th><th> </th><td class="l"><span>&lt;/ul&gt;</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>32</th><td class="r"><span>&lt;div class="BlueBox"&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>33</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;ul&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>34</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;?php</span> </td>
                      </tr><tr>
                        <th> </th><th>35</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($Items as $item) {</span> </td>
                      </tr><tr>
                        <th> </th><th>36</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo '&lt;li&gt;'.$item-&gt;Event-&gt;Name.'&lt;/li&gt;';</span> </td>
                      </tr><tr>
                        <th> </th><th>37</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th> </th><th>38</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ?&gt;</span> </td>
                      </tr><tr>
                        <th> </th><th>39</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/ul&gt;</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>40</th><td class="r"><span>&lt;/div&gt;</span> </td>
                      </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file26">
          <a title="Show the changeset ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a restricted to system/application/views/general/home.php" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a/system/application/views/general/home.php">system/application/views/general/home.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision d0c1468e8b450398f3e03d5c3f74c54a6aa830ef">
                    <a title="Show revision d0c1468e8b450398f3e03d5c3f74c54a6aa830ef of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/general/home.php?rev=d0c1468e8b450398f3e03d5c3f74c54a6aa830ef#L34">
                      rd0c14</a>
                  </th>
                  <th title="Revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a">
                    <a title="Show revision ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/general/home.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L34">
                      rab926</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>34</th><th>34</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;h2&gt;Today's Events&lt;/h2&gt;</span> </td>
                  </tr><tr>
                          <th>35</th><th>35</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="Entry"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>36</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ul&gt;</span> </td>
                      </tr><tr>
                        <th>37</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li&gt;To Do&lt;/li&gt;</span> </td>
                      </tr><tr>
                        <th>38</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/ul&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>36</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;?php $events-&gt;Load(); ?&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>39</th><th>37</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;a class="RightColumnAction"&nbsp; href="."&gt;Calendar&lt;/a&gt;</span> </td>
                  </tr><tr>
                          <th>40</th><th>38</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/general/home.php?rev=d0c1468e8b450398f3e03d5c3f74c54a6aa830ef#L42">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/general/home.php?rev=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a#L40">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>42</th><th>40</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;h2&gt;To Do&lt;/h2&gt;</span> </td>
                  </tr><tr>
                          <th>43</th><th>41</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="Entry"&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>44</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ul&gt;</span> </td>
                      </tr><tr>
                        <th>45</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li&gt;To Do&lt;/li&gt;</span> </td>
                      </tr><tr>
                        <th>46</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/ul&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>42</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;?php $todo-&gt;Load(); ?&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>47</th><th>43</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;a class="RightColumnAction"&nbsp; href="."&gt;New To Do&lt;/a&gt;</span> </td>
                  </tr><tr>
                          <th>48</th><th>44</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
  </ul>
</div>
      </div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a?format=diff&new=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a" class="diff">Unified Diff</a>
        </li><li class="last">
          <a rel="nofollow" href="http://dev2.theyorker.co.uk/trac/changeset/ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a?format=zip&new=ab9268ace7520e4df7a2dc4de27bcd2cbefe7d8a" class="zip">Zip Archive</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">
        Powered by <a href="../about.html"><strong>Trac 0.11.1</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.
      </p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>