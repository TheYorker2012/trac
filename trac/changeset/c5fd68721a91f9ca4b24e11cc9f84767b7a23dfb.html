<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  

  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>
      Changeset c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb –
      The Yorker
    </title>
        <link rel="search" href="../search.html" />
        <link rel="prev" href="0830ddef288a4ea9871538382b1ff8595ef98a28.html" title="Changeset 0830ddef288a4ea9871538382b1ff8595ef98a28" />
        <link rel="last" href="4663e7077f9a41a86111194402f498613109bfa4.html" title="Changeset 4663e7077f9a41a86111194402f498613109bfa4" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="http://dev2.theyorker.co.uk/trac/changeset/c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb?format=diff&new=c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb" type="text/plain" class="diff" title="Unified Diff" /><link rel="alternate" href="http://dev2.theyorker.co.uk/trac/changeset/c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb?format=zip&new=c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb" type="application/zip" class="zip" title="Zip Archive" />
        <link rel="next" href="5c407b5efc3caf0c7374e08ec1c17598be80d693.html" title="Changeset 5c407b5efc3caf0c7374e08ec1c17598be80d693" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/changeset.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/diff.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/code.css" type="text/css" />
        <link rel="first" href="8f01cfef778eb063e661839b60a7226601ef07b1.html" title="Changeset 8f01cfef778eb063e661839b60a7226601ef07b1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search The Yorker" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/diff.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/trac/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("li.entry h2 a").parent().addAnchor("Link to this diff");
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="../../trac.html"><img src="../../apps-logo.png" alt="The Yorker" /></a>
      </div>
      <form id="search" action="/trac/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first">logged in as nick_evans</li><li><a href="../../trac.html">Logout</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../browser.html">Browse Source</a></li><li><a href="../report.html">View Tickets</a></li><li><a href="../newticket.html">New Ticket</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
            <li class="first "><span>&larr; <a class="prev" href="0830ddef288a4ea9871538382b1ff8595ef98a28.html" title="Changeset 0830ddef288a4ea9871538382b1ff8595ef98a28">Previous Changeset</a></span></li><li class="last"><span><a class="next" href="5c407b5efc3caf0c7374e08ec1c17598be80d693.html" title="Changeset 5c407b5efc3caf0c7374e08ec1c17598be80d693">Next Changeset</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="changeset">
      <div id="title">
        <h1>Changeset c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb</h1>
      </div>
      <form id="prefs" action="">
        <div>
    <label for="style">View differences</label>
    <select id="style" name="style">
      <option selected="selected" value="inline">inline</option>
      <option value="sidebyside">side by side</option>
    </select>
    <div class="field">
      Show <input type="text" name="contextlines" id="contextlines" size="2" maxlength="3" value="2" />
      <label for="contextlines">lines around each change</label>
    </div>
    <fieldset id="ignore">
      <legend>Ignore:</legend>
      <div class="field">
        <input type="checkbox" id="ignoreblanklines" name="ignoreblanklines" />
        <label for="ignoreblanklines">Blank lines</label>
      </div>
      <div class="field">
        <input type="checkbox" id="ignorecase" name="ignorecase" />
        <label for="ignorecase">Case changes</label>
      </div>
      <div class="field">
        <input type="checkbox" id="ignorewhitespace" name="ignorewhitespace" />
        <label for="ignorewhitespace">White space changes</label>
      </div>
    </fieldset>
    <div class="buttons">
      <input type="submit" name="update" value="Update" />
    </div>
        </div>
      </form>
      <dl id="overview">
          <dt class="property time">Timestamp:</dt>
          <dd class="time">09/18/07 16:58:14 (<a class="timeline" href="http://dev2.theyorker.co.uk/trac/timeline?from=2007-09-18T16%3A58%3A14Z%2B0000&precision=second" title="2007-09-18T16:58:14Z+0000 in Timeline">8 years</a> ago)</dd>
          <dt class="property author">Author:</dt>
          <dd class="author">Owen Jones &lt;oj502@…&gt;</dd>
              <dt class="property">Parents:</dt>
              <dd><a class="changeset" href="0830ddef288a4ea9871538382b1ff8595ef98a28.html" title="Minor updates to banner office, still doesnt work though.">0830ddef288a4ea9871538382b1ff8595ef98a28</a></dd>
              <dt class="property">Children:</dt>
              <dd><a class="changeset" href="5c407b5efc3caf0c7374e08ec1c17598be80d693.html" title="Updates to the banner model, will do controller and views soon.">5c407b5efc3caf0c7374e08ec1c17598be80d693</a></dd>
              <dt class="property">git-committer:</dt>
              <dd>Owen Jones &lt;oj502@york.ac.uk&gt; / 2007-09-18T16:58:14Z+0000</dd>
          <dt class="property message">Message:</dt>
          <dd class="message searchable">
            
            
              <p>
Lifestyle homepage! Has no homepage image at the moment (there isnt one in the db) but as soon as there is it will show up. Also modified the homepage image get function, as its implimented differently in the db now. Exciting stuff.<br />
</p>

            
            
          </dd>
          <dt class="property location">Location:</dt>
          <dd class="searchable"><a href="http://dev2.theyorker.co.uk/trac/browser/system/application?rev=c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb">system/application</a></dd>
        <dt class="property files">Files:</dt>
        <dd class="files">
          <div class="legend" id="file-legend">
            <dl>
              <dt class="add"></dt><dd>2 added</dd>
              <dt class="mod"></dt><dd>5 modified</dd>
            </dl>
          </div>
          <br />
          <ul>
            <li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/home.php?rev=c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb">
              controllers/home.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb.html#file0">1 diff</a>)
            </li><li>
          <div class="add"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/lifestyle.php?rev=c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb">
              controllers/lifestyle.php
            </a>
          <span class="comment">(added)</span>
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/sport.php?rev=c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb">
              controllers/sport.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb.html#file2">2 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/home_model.php?rev=c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb">
              models/home_model.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb.html#file3">2 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/frames/public_frame.php?rev=c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb">
              views/frames/public_frame.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb.html#file4">1 diff</a>)
            </li><li>
          <div class="add"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/homepages/lifestyle.php?rev=c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb">
              views/homepages/lifestyle.php
            </a>
          <span class="comment">(added)</span>
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/homepages/sport.php?rev=c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb">
              views/homepages/sport.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb.html#file6">1 diff</a>)
            </li>
          </ul>
        </dd>
      </dl>
      <div class="diff">
        <div class="legend" id="diff-legend">
          <h3>Legend:</h3>
          <dl>
            <dt class="unmod"></dt><dd>Unmodified</dd>
            <dt class="add"></dt><dd>Added</dd>
            <dt class="rem"></dt><dd>Removed</dd>
          </dl>
        </div>
        <div class="diff">
  <ul class="entries">
      <li class="entry">
        <h2 id="file0">
          <a title="Show the changeset c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb restricted to system/application/controllers/home.php" href="http://dev2.theyorker.co.uk/trac/changeset/c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb/system/application/controllers/home.php">system/application/controllers/home.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision fc111c5d7328fca745ee5428ad7e280bdb1caa32">
                    <a title="Show revision fc111c5d7328fca745ee5428ad7e280bdb1caa32 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/home.php?rev=fc111c5d7328fca745ee5428ad7e280bdb1caa32#L185">
                      rfc111</a>
                  </th>
                  <th title="Revision c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb">
                    <a title="Show revision c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/home.php?rev=c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb#L185">
                      rc5fd6</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>185</th><th>185</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>186</th><th>186</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Obtain banner</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>187</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $data['banner'] = $this-&gt;Home_Model-&gt;GetBannerImage<del></del>();</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>187</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $data['banner'] = $this-&gt;Home_Model-&gt;GetBannerImage<ins>ForHomepage</ins>();</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>188</th><th>188</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>189</th><th>189</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Minifeeds</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file2">
          <a title="Show the changeset c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb restricted to system/application/controllers/sport.php" href="http://dev2.theyorker.co.uk/trac/changeset/c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb/system/application/controllers/sport.php">system/application/controllers/sport.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision b2a5e161ef7533bf90be98afc9feae0677b6a6ee">
                    <a title="Show revision b2a5e161ef7533bf90be98afc9feae0677b6a6ee of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/sport.php?rev=b2a5e161ef7533bf90be98afc9feae0677b6a6ee#L30">
                      rb2a5e</a>
                  </th>
                  <th title="Revision c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb">
                    <a title="Show revision c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/sport.php?rev=c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb#L30">
                      rc5fd6</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>30</th><th>30</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>31</th><th>31</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Obtain banner for homepage</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>32</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $data['banner'] = $this-&gt;Home_Model-&gt;GetBannerImage<del>($homepage_article_type.'banner'</del>);</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>32</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $data['banner'] = $this-&gt;Home_Model-&gt;GetBannerImage<ins>ForHomepage($homepage_article_type</ins>);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>33</th><th>33</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr><tr>
                          <th>34</th><th>34</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //////////////Information for main article(s)</span> </td>
                  </tr><tr>
                          <th>35</th><th>35</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Get article ids for the main section</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>36</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $main_article_ids = $this-&gt;News_model-&gt;GetLatestId($homepage_article_type,<del>3</del>);</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>36</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $main_article_ids = $this-&gt;News_model-&gt;GetLatestId($homepage_article_type,<ins>$main_articles_num</ins>);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>37</th><th>37</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //First article has summery, rest are simple articles</span> </td>
                  </tr><tr>
                          <th>38</th><th>38</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $main_article_summarys[0] = $this-&gt;News_model-&gt;GetSummaryArticle($main_article_ids[0], "Left", '%W, %D %M %Y', "medium");</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/sport.php?rev=b2a5e161ef7533bf90be98afc9feae0677b6a6ee#L75">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/sport.php?rev=c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb#L75">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>75</th><th>75</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $featured_puffer_id = $this-&gt;News_model-&gt;GetLatestFeaturedId($homepage_article_type);</span> </td>
                  </tr><tr>
                          <th>76</th><th>76</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>77</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //get and article summery for the article id.<del>&nbsp;Using subheader, so much have at least the summery version</del></span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>77</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //get and article summery for the article id.<ins></ins></span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>78</th><th>78</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!empty($featured_puffer_id)){</span> </td>
                  </tr><tr>
                          <th>79</th><th>79</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $data['show_featured_puffer'] = true;</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file3">
          <a title="Show the changeset c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb restricted to system/application/models/home_model.php" href="http://dev2.theyorker.co.uk/trac/changeset/c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb/system/application/models/home_model.php">system/application/models/home_model.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 0447cc264e80ec4d76fa2e76bf0a53c53579874a">
                    <a title="Show revision 0447cc264e80ec4d76fa2e76bf0a53c53579874a of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/home_model.php?rev=0447cc264e80ec4d76fa2e76bf0a53c53579874a#L74">
                      r0447c</a>
                  </th>
                  <th title="Revision c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb">
                    <a title="Show revision c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/home_model.php?rev=c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb#L74">
                      rc5fd6</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>74</th><th>74</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Function to obtain a random banner image for today.</span> </td>
                  </tr><tr>
                          <th>75</th><th>75</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Returns the image location.</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>76</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*@NOTE this has been replaced below, this should be deleted soon.</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>76</th><th>77</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                  </tr><tr>
                          <th>77</th><th>78</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function GetBannerImage($type='banner') {</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/home_model.php?rev=0447cc264e80ec4d76fa2e76bf0a53c53579874a#L104">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/home_model.php?rev=c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb#L105">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>104</th><th>105</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;image-&gt;getImage($id,$type);</span> </td>
                  </tr><tr>
                          <th>105</th><th>106</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>107</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>108</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /*</ins> </td>
                  </tr><tr>
                          <th> </th><th>109</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Function to obtain a random banner image for today.</ins> </td>
                  </tr><tr>
                          <th> </th><th>110</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*@param string name of the homepage section you want a banner for this is the homepage's content_type codename</ins> </td>
                  </tr><tr>
                          <th> </th><th>111</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Returns the image, if there is one.</ins> </td>
                  </tr><tr>
                          <th> </th><th>112</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</ins> </td>
                  </tr><tr>
                          <th> </th><th>113</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; function GetBannerImageForHomepage($homepage_codename='home') {</ins> </td>
                  </tr><tr>
                          <th> </th><th>114</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;load-&gt;library('image');</ins> </td>
                  </tr><tr>
                          <th> </th><th>115</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Get id of content_type from codename</ins> </td>
                  </tr><tr>
                          <th> </th><th>116</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Get image id(s) from homepage_banners table with content_type id</ins> </td>
                  </tr><tr>
                          <th> </th><th>117</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Use image id(s) to get all image information</ins> </td>
                  </tr><tr>
                          <th> </th><th>118</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Take the one with the current date (if there is one)</ins> </td>
                  </tr><tr>
                          <th> </th><th>119</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql = 'SELECT images.image_id AS id, image_types.image_type_codename AS type</ins> </td>
                  </tr><tr>
                          <th> </th><th>120</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FROM images</ins> </td>
                  </tr><tr>
                          <th> </th><th>121</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; INNER JOIN image_types ON image_types.image_type_id = images.image_image_type_id </ins> </td>
                  </tr><tr>
                          <th> </th><th>122</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; INNER JOIN homepage_banners ON images.image_id = homepage_banners.homepage_banner_image_id </ins> </td>
                  </tr><tr>
                          <th> </th><th>123</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; INNER JOIN content_types ON homepage_banners.homepage_banner_content_type_id = content_types.content_type_id </ins> </td>
                  </tr><tr>
                          <th> </th><th>124</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WHERE content_types.content_type_codename = ? </ins> </td>
                  </tr><tr>
                          <th> </th><th>125</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AND&nbsp; &nbsp; &nbsp;DATE(images.image_last_displayed_timestamp) = CURRENT_DATE()';</ins> </td>
                  </tr><tr>
                          <th> </th><th>126</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $query = $this-&gt;db-&gt;query($sql, array($homepage_codename));</ins> </td>
                  </tr><tr>
                          <th> </th><th>127</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Update current homepage if there is no result</ins> </td>
                  </tr><tr>
                          <th> </th><th>128</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if($query-&gt;num_rows() == 0){</ins> </td>
                  </tr><tr>
                          <th> </th><th>129</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Find the oldest homepage image</ins> </td>
                  </tr><tr>
                          <th> </th><th>130</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql = 'SELECT images.image_id AS id, image_types.image_type_codename AS type</ins> </td>
                  </tr><tr>
                          <th> </th><th>131</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FROM images</ins> </td>
                  </tr><tr>
                          <th> </th><th>132</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; INNER JOIN image_types ON image_types.image_type_id = images.image_image_type_id </ins> </td>
                  </tr><tr>
                          <th> </th><th>133</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; INNER JOIN homepage_banners ON images.image_id = homepage_banners.homepage_banner_image_id </ins> </td>
                  </tr><tr>
                          <th> </th><th>134</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; INNER JOIN content_types ON homepage_banners.homepage_banner_content_type_id = content_types.content_type_id </ins> </td>
                  </tr><tr>
                          <th> </th><th>135</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WHERE content_types.content_type_codename = ? </ins> </td>
                  </tr><tr>
                          <th> </th><th>136</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ORDER BY images.image_last_displayed_timestamp LIMIT 0,1';</ins> </td>
                  </tr><tr>
                          <th> </th><th>137</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $query = $this-&gt;db-&gt;query($sql, array($homepage_codename));</ins> </td>
                  </tr><tr>
                          <th> </th><th>138</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Update the oldest with the current time&amp;date if there is one</ins> </td>
                  </tr><tr>
                          <th> </th><th>139</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if($query-&gt;num_rows() &gt; 0){</ins> </td>
                  </tr><tr>
                          <th> </th><th>140</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sql = 'UPDATE images</ins> </td>
                  </tr><tr>
                          <th> </th><th>141</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SET images.image_last_displayed_timestamp = CURRENT_TIMESTAMP()</ins> </td>
                  </tr><tr>
                          <th> </th><th>142</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WHERE images.image_id = ?';</ins> </td>
                  </tr><tr>
                          <th> </th><th>143</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $update = $this-&gt;db-&gt;query($sql,array($query-&gt;row()-&gt;id));</ins> </td>
                  </tr><tr>
                          <th> </th><th>144</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>145</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>146</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Just make sure one has now been found.</ins> </td>
                  </tr><tr>
                          <th> </th><th>147</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if($query-&gt;num_rows() &gt; 0){</ins> </td>
                  </tr><tr>
                          <th> </th><th>148</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $id = $query-&gt;row()-&gt;id;</ins> </td>
                  </tr><tr>
                          <th> </th><th>149</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $type = $query-&gt;row()-&gt;type;</ins> </td>
                  </tr><tr>
                          <th> </th><th>150</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;image-&gt;getImage($id,$type);</ins> </td>
                  </tr><tr>
                          <th> </th><th>151</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else{</ins> </td>
                  </tr><tr>
                          <th> </th><th>152</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //no homepage found!!</ins> </td>
                  </tr><tr>
                          <th> </th><th>153</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return "";</ins> </td>
                  </tr><tr>
                          <th> </th><th>154</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>155</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>106</th><th>156</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>107</th><th>157</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; /*</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file4">
          <a title="Show the changeset c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb restricted to system/application/views/frames/public_frame.php" href="http://dev2.theyorker.co.uk/trac/changeset/c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb/system/application/views/frames/public_frame.php">system/application/views/frames/public_frame.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 94d74e8c1c263ac352e60249e07e88d52cb718da">
                    <a title="Show revision 94d74e8c1c263ac352e60249e07e88d52cb718da of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/frames/public_frame.php?rev=94d74e8c1c263ac352e60249e07e88d52cb718da#L117">
                      r94d74e</a>
                  </th>
                  <th title="Revision c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb">
                    <a title="Show revision c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/frames/public_frame.php?rev=c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb#L117">
                      rc5fd6</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>117</th><th>117</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!--&lt;li&gt;&lt;a href="/news/national/"&gt;UK &amp;amp; World News&lt;/a&gt;&lt;/li&gt;--&gt;</span> </td>
                  </tr><tr>
                          <th>118</th><th>118</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li&gt;&lt;a href="/news/features/"&gt;Features&lt;/a&gt;&lt;/li&gt;</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>119</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li&gt;&lt;a href="/<del>news/</del>lifestyle/"&gt;Lifestyle&lt;/a&gt;&lt;/li&gt;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>119</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li&gt;&lt;a href="/<ins></ins>lifestyle/"&gt;Lifestyle&lt;/a&gt;&lt;/li&gt;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>120</th><th>120</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li&gt;&lt;a href="/news/arts/"&gt;Arts&lt;/a&gt;&lt;/li&gt;</span> </td>
                  </tr><tr>
                          <th>121</th><th>121</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li&gt;&lt;a href="/sport/"&gt;Sport&lt;/a&gt;&lt;/li&gt;</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file6">
          <a title="Show the changeset c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb restricted to system/application/views/homepages/sport.php" href="http://dev2.theyorker.co.uk/trac/changeset/c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb/system/application/views/homepages/sport.php">system/application/views/homepages/sport.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision b2a5e161ef7533bf90be98afc9feae0677b6a6ee">
                    <a title="Show revision b2a5e161ef7533bf90be98afc9feae0677b6a6ee of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/homepages/sport.php?rev=b2a5e161ef7533bf90be98afc9feae0677b6a6ee#L14">
                      rb2a5e</a>
                  </th>
                  <th title="Revision c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb">
                    <a title="Show revision c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/views/homepages/sport.php?rev=c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb#L14">
                      rc5fd6</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>14</th><th>14</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;homepage_boxes-&gt;print_box_with_picture_list($main_articles,$latest_heading,'news');</span> </td>
                  </tr><tr>
                          <th>15</th><th>15</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if($show_featured_puffer) $this-&gt;homepage_boxes-&gt;print_puffer_box($featured_puffer_title,$featured_puffer);</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>16</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; if(!empty($<del>sport_lists)) </del> $this-&gt;homepage_boxes-&gt;print_box_of_category_lists($more_heading,$more_article_types,$lists_of_more_articles);</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>16</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; if(!empty($<ins>more_article_types))</ins> $this-&gt;homepage_boxes-&gt;print_box_of_category_lists($more_heading,$more_article_types,$lists_of_more_articles);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>17</th><th>17</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; ?&gt;</span> </td>
                  </tr><tr>
                          <th>18</th><th>18</th><td class="l"><span>&lt;/div&gt;</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
  </ul>
</div>
      </div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="http://dev2.theyorker.co.uk/trac/changeset/c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb?format=diff&new=c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb" class="diff">Unified Diff</a>
        </li><li class="last">
          <a rel="nofollow" href="http://dev2.theyorker.co.uk/trac/changeset/c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb?format=zip&new=c5fd68721a91f9ca4b24e11cc9f84767b7a23dfb" class="zip">Zip Archive</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">
        Powered by <a href="../about.html"><strong>Trac 0.11.1</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.
      </p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>