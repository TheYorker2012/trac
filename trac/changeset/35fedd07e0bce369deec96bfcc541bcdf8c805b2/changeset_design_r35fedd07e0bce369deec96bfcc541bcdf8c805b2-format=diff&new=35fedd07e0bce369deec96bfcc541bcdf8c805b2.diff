Index: design/theyorker_tables.xml
===================================================================
--- design/theyorker_tables.xml (revision b223d8a5b4ce686ab6cdcea5bf5d28cb03dba1f2)
+++ design/theyorker_tables.xml (revision 35fedd07e0bce369deec96bfcc541bcdf8c805b2)
@@ -2,5 +2,5 @@
 <DBMODEL Version="4.0">
 <SETTINGS>
-<GLOBALSETTINGS ModelName="theyorker" IDModel="0" IDVersion="0" VersionStr="1.0.0.0" Comments="" UseVersionHistroy="1" AutoIncVersion="1" DatabaseType="MySQL" ZoomFac="74.00" XPos="1005" YPos="0" DefaultDataType="5" DefaultTablePrefix="0" DefSaveDBConn="" DefSyncDBConn="" DefQueryDBConn="" Printer="\\http://hercules.cs.york.ac.uk:631\pp03s" HPageCount="2.006859382655561" PageAspectRatio="1.431813406177769" PageOrientation="1" PageFormat="A4 (210x297 mm, 8.26x11.7 inches)" SelectedPages="" UsePositionGrid="0" PositionGridX="20" PositionGridY="20" TableNameInRefs="0" DefaultTableType="1" ActivateRefDefForNewRelations="1" FKPrefix="" FKPostfix="" CreateFKRefDefIndex="1" DBQuoteCharacter="`" CreateSQLforLinkedObjects="0" DefModelFont="Tahoma" CanvasWidth="4096" CanvasHeight="2842" />
+<GLOBALSETTINGS ModelName="theyorker" IDModel="0" IDVersion="0" VersionStr="1.0.0.0" Comments="" UseVersionHistroy="1" AutoIncVersion="1" DatabaseType="MySQL" ZoomFac="74.00" XPos="2028" YPos="192" DefaultDataType="5" DefaultTablePrefix="0" DefSaveDBConn="" DefSyncDBConn="" DefQueryDBConn="" Printer="\\http://hercules.cs.york.ac.uk:631\pp03s" HPageCount="1.985458070770722" PageAspectRatio="1.426496022137669" PageOrientation="1" PageFormat="A4 (210x297 mm, 8.26x11.7 inches)" SelectedPages="" UsePositionGrid="0" PositionGridX="20" PositionGridY="20" TableNameInRefs="0" DefaultTableType="1" ActivateRefDefForNewRelations="1" FKPrefix="" FKPostfix="" CreateFKRefDefIndex="1" DBQuoteCharacter="`" CreateSQLforLinkedObjects="0" DefModelFont="Tahoma" CanvasWidth="4096" CanvasHeight="2842" />
 <DATATYPEGROUPS>
 <DATATYPEGROUP Name="Numeric Types" Icon="1" />
@@ -4036,5 +4036,5 @@
 </INDICES>
 </TABLE>
-<TABLE ID="3970" Tablename="user_properties" PrevTableName="Table_75" XPos="1462" YPos="1993" TableType="1" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="185" >
+<TABLE ID="3970" Tablename="user_properties" PrevTableName="Table_75" XPos="1470" YPos="1995" TableType="1" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="185" >
 <COLUMNS>
 <COLUMN ID="3972" ColName="user_property_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
@@ -4050,8 +4050,6 @@
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="3974" ColName="user_property_name" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
+<COLUMN ID="3974" ColName="user_property_name" PrevColName="" Pos="1" idDatatype="28" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
 </OPTIONSELECTED>
 </COLUMN>
@@ -4239,18 +4237,6 @@
 </INDICES>
 </TABLE>
-<TABLE ID="4295" Tablename="user_subscription_properties" PrevTableName="Table_80" XPos="2034" YPos="1528" TableType="1" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="196" >
-<COLUMNS>
-<COLUMN ID="4306" ColName="user_subscription_property_property_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="4305" ColName="user_subscription_property_user_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
+<TABLE ID="4295" Tablename="user_subscription_properties" PrevTableName="Table_80" XPos="2039" YPos="1509" TableType="1" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="196" >
+<COLUMNS>
 <COLUMN ID="4318" ColName="user_subscription_property_organisation_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -4259,32 +4245,36 @@
 </OPTIONSELECTED>
 </COLUMN>
-</COLUMNS>
-<RELATIONS_END>
+<COLUMN ID="4329" ColName="user_subscription_property_property_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="4328" ColName="user_subscription_property_user_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_END>
+<RELATION_END ID="4315" />
 <RELATION_END ID="4300" />
-<RELATION_END ID="4315" />
 </RELATIONS_END>
 <INDICES>
 <INDEX ID="4309" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
 <INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="4306" LengthParam="0" />
-<INDEXCOLUMN idColumn="4305" LengthParam="0" />
 <INDEXCOLUMN idColumn="4318" LengthParam="0" />
 </INDEXCOLUMNS>
 </INDEX>
-<INDEX ID="4303" IndexName="user_subscription_properties_FKIndex1" IndexKind="1" FKRefDef_Obj_id="4300">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="4305" LengthParam="0" />
-<INDEXCOLUMN idColumn="4306" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-<INDEX ID="4308" IndexName="PRIMARY" IndexKind="1" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="4306" LengthParam="0" />
-<INDEXCOLUMN idColumn="4305" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
 <INDEX ID="4317" IndexName="user_subscription_properties_FKIndex2" IndexKind="1" FKRefDef_Obj_id="4315">
 <INDEXCOLUMNS>
 <INDEXCOLUMN idColumn="4318" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+<INDEX ID="4330" IndexName="user_subscription_properties_FKIndex2" IndexKind="1" FKRefDef_Obj_id="4300">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="4328" LengthParam="0" />
+<INDEXCOLUMN idColumn="4329" LengthParam="0" />
 </INDEXCOLUMNS>
 </INDEX>
@@ -4409,7 +4399,7 @@
 <RELATION ID="4289" RelationName="Has Property" Kind="2" SrcTable="1050" DestTable="4277" FKFields="user_id=user_has_property_user_id\n" FKFieldsComments="\n" relDirection="3" MidOffset="-93" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="53" CaptionOffsetY="-25" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="4291" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="194" />
 <RELATION ID="4292" RelationName="Belongs To" Kind="2" SrcTable="3970" DestTable="4277" FKFields="user_property_id=user_has_property_property_id\n" FKFieldsComments="\n" relDirection="1" MidOffset="156" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="-49" CaptionOffsetY="-21" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="4294" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="195" />
-<RELATION ID="4300" RelationName="LINK!" Kind="2" SrcTable="4277" DestTable="4295" FKFields="user_has_property_user_id=user_subscription_property_user_id\nuser_has_property_property_id=user_subscription_property_property_id\n" FKFieldsComments="\n\n" relDirection="2" MidOffset="10" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="-7" CaptionOffsetY="-51" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="4303" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="197" />
-<RELATION ID="4315" RelationName="For" Kind="2" SrcTable="1017" DestTable="4295" FKFields="organisation_id=user_subscription_property_organisation_id\n" FKFieldsComments="\n" relDirection="1" MidOffset="36" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="-30" CaptionOffsetY="-22" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="4317" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="198" />
+<RELATION ID="4315" RelationName="For" Kind="2" SrcTable="1017" DestTable="4295" FKFields="organisation_id=user_subscription_property_organisation_id\n" FKFieldsComments="\n" relDirection="1" MidOffset="27" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="-30" CaptionOffsetY="-22" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="4317" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="198" />
 <RELATION ID="4320" RelationName="Of Type" Kind="2" SrcTable="3975" DestTable="2981" FKFields="property_type_id=page_property_property_type_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="314" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="5" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="4322" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="199" />
+<RELATION ID="4300" RelationName="LINK!" Kind="2" SrcTable="4277" DestTable="4295" FKFields="user_has_property_user_id=user_subscription_property_user_id\nuser_has_property_property_id=user_subscription_property_property_id\n" FKFieldsComments="\n\n" relDirection="2" MidOffset="10" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="-7" CaptionOffsetY="-51" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="4330" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="197" />
 </RELATIONS>
 <NOTES>
