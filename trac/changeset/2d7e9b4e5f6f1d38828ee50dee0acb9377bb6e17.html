<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  

  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>
      Changeset 2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17 –
      The Yorker
    </title>
        <link rel="search" href="../search.html" />
        <link rel="prev" href="1d2b7521840412f3b731fa7f3a5b20c8f2411217.html" title="Changeset 1d2b7521840412f3b731fa7f3a5b20c8f2411217" />
        <link rel="last" href="4663e7077f9a41a86111194402f498613109bfa4.html" title="Changeset 4663e7077f9a41a86111194402f498613109bfa4" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="http://dev2.theyorker.co.uk/trac/changeset/2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17?format=diff&new=2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17" type="text/plain" class="diff" title="Unified Diff" /><link rel="alternate" href="http://dev2.theyorker.co.uk/trac/changeset/2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17?format=zip&new=2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17" type="application/zip" class="zip" title="Zip Archive" />
        <link rel="next" href="5c2ebe37ac554df8b24d8561f408071a95c8d802.html" title="Changeset 5c2ebe37ac554df8b24d8561f408071a95c8d802" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/changeset.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/diff.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/code.css" type="text/css" />
        <link rel="first" href="8f01cfef778eb063e661839b60a7226601ef07b1.html" title="Changeset 8f01cfef778eb063e661839b60a7226601ef07b1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search The Yorker" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/diff.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/trac/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("li.entry h2 a").parent().addAnchor("Link to this diff");
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="../../trac.html"><img src="../../apps-logo.png" alt="The Yorker" /></a>
      </div>
      <form id="search" action="/trac/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first">logged in as nick_evans</li><li><a href="../../trac.html">Logout</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../browser.html">Browse Source</a></li><li><a href="../report.html">View Tickets</a></li><li><a href="../newticket.html">New Ticket</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
            <li class="first "><span>&larr; <a class="prev" href="1d2b7521840412f3b731fa7f3a5b20c8f2411217.html" title="Changeset 1d2b7521840412f3b731fa7f3a5b20c8f2411217">Previous Changeset</a></span></li><li class="last"><span><a class="next" href="5c2ebe37ac554df8b24d8561f408071a95c8d802.html" title="Changeset 5c2ebe37ac554df8b24d8561f408071a95c8d802">Next Changeset</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="changeset">
      <div id="title">
        <h1>Changeset 2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17</h1>
      </div>
      <form id="prefs" action="">
        <div>
    <label for="style">View differences</label>
    <select id="style" name="style">
      <option selected="selected" value="inline">inline</option>
      <option value="sidebyside">side by side</option>
    </select>
    <div class="field">
      Show <input type="text" name="contextlines" id="contextlines" size="2" maxlength="3" value="2" />
      <label for="contextlines">lines around each change</label>
    </div>
    <fieldset id="ignore">
      <legend>Ignore:</legend>
      <div class="field">
        <input type="checkbox" id="ignoreblanklines" name="ignoreblanklines" />
        <label for="ignoreblanklines">Blank lines</label>
      </div>
      <div class="field">
        <input type="checkbox" id="ignorecase" name="ignorecase" />
        <label for="ignorecase">Case changes</label>
      </div>
      <div class="field">
        <input type="checkbox" id="ignorewhitespace" name="ignorewhitespace" />
        <label for="ignorewhitespace">White space changes</label>
      </div>
    </fieldset>
    <div class="buttons">
      <input type="submit" name="update" value="Update" />
    </div>
        </div>
      </form>
      <dl id="overview">
          <dt class="property time">Timestamp:</dt>
          <dd class="time">04/07/07 15:39:48 (<a class="timeline" href="http://dev2.theyorker.co.uk/trac/timeline?from=2007-04-07T15%3A39%3A48Z%2B0000&precision=second" title="2007-04-07T15:39:48Z+0000 in Timeline">8 years</a> ago)</dd>
          <dt class="property author">Author:</dt>
          <dd class="author">James Hogan &lt;james_hogan@…&gt;</dd>
              <dt class="property">Parents:</dt>
              <dd><a class="changeset" href="1d2b7521840412f3b731fa7f3a5b20c8f2411217.html" title="comments lib: Fix = / === bug from previous change.">1d2b7521840412f3b731fa7f3a5b20c8f2411217</a></dd>
              <dt class="property">Children:</dt>
              <dd><a class="changeset" href="5c2ebe37ac554df8b24d8561f408071a95c8d802.html" title="Comment moderator stuff #188
controllers/comments
	added functions for  ...">5c2ebe37ac554df8b24d8561f408071a95c8d802</a></dd>
              <dt class="property">git-committer:</dt>
              <dd>James Hogan &lt;james_hogan@theyorker.co.uk&gt; / 2007-04-07T15:39:48Z+0000</dd>
          <dt class="property message">Message:</dt>
          <dd class="message searchable">
            
            
              <p>
Login + logout use array_slice instead of stupid loop for getting end segments<br />
fixed bug in comments_model making invalid query when not logged in<br />
made first param of <a class="missing wiki" href="http://dev2.theyorker.co.uk/trac/wiki/CreateStandard" rel="nofollow">CreateStandard?</a> in comments library non referential so that ordinary values (integers) can be passed in easily. this means that the outer value may be out of date if thread array obtained separately, so shouldn't be relied upon.<br />
</p>

            
            
          </dd>
          <dt class="property location">Location:</dt>
          <dd class="searchable"><a href="http://dev2.theyorker.co.uk/trac/browser/system/application?rev=2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17">system/application</a></dd>
        <dt class="property files">Files:</dt>
        <dd class="files">
          <div class="legend" id="file-legend">
            <dl>
              <dt class="mod"></dt><dd>4 modified</dd>
            </dl>
          </div>
          <br />
          <ul>
            <li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/login.php?rev=2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17">
              controllers/login.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17.html#file0">2 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/logout.php?rev=2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17">
              controllers/logout.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17.html#file1">1 diff</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Comments.php?rev=2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17">
              libraries/Comments.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17.html#file2">2 diffs</a>)
            </li><li>
          <div class="mod"> </div>
            <a title="Show entry in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/comments_model.php?rev=2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17">
              models/comments_model.php
            </a>
          <span class="comment">(modified)</span>
              (<a title="Show differences" href="2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17.html#file3">1 diff</a>)
            </li>
          </ul>
        </dd>
      </dl>
      <div class="diff">
        <div class="legend" id="diff-legend">
          <h3>Legend:</h3>
          <dl>
            <dt class="unmod"></dt><dd>Unmodified</dd>
            <dt class="add"></dt><dd>Added</dd>
            <dt class="rem"></dt><dd>Removed</dd>
          </dl>
        </div>
        <div class="diff">
  <ul class="entries">
      <li class="entry">
        <h2 id="file0">
          <a title="Show the changeset 2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17 restricted to system/application/controllers/login.php" href="http://dev2.theyorker.co.uk/trac/changeset/2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17/system/application/controllers/login.php">system/application/controllers/login.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 505547ae962b0c2e880125f34c1bf08322094e06">
                    <a title="Show revision 505547ae962b0c2e880125f34c1bf08322094e06 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/login.php?rev=505547ae962b0c2e880125f34c1bf08322094e06#L19">
                      r50554</a>
                  </th>
                  <th title="Revision 2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17">
                    <a title="Show revision 2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/login.php?rev=2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17#L19">
                      r2d7e9</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>19</th><th>19</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @note Duplicated from logout</span> </td>
                  </tr><tr>
                          <th>20</th><th>20</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>21</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function _redirect($FirstSegment = <del>3</del>)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>21</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function _redirect($FirstSegment = <ins>2</ins>)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>22</th><th>22</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>23</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $segments = $this-&gt;uri-&gt;rsegment_array();</span> </td>
                      </tr><tr>
                        <th>24</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while ($FirstSegment &gt; 1) {</span> </td>
                      </tr><tr>
                        <th>25</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array_shift($segments);</span> </td>
                      </tr><tr>
                        <th>26</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --$FirstSegment;</span> </td>
                      </tr><tr>
                        <th>27</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>28</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return implode('/',$segments);</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>23</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return implode('/', array_slice($this-&gt;uri-&gt;rsegment_array(), $FirstSegment));</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>29</th><th>24</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>30</th><th>25</th><td class="l"><span></span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/login.php?rev=505547ae962b0c2e880125f34c1bf08322094e06#L64">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/login.php?rev=2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17#L59">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>64</th><th>59</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!CheckPermissions('student', FALSE, TRUE)) return;</span> </td>
                  </tr><tr>
                          <th>65</th><th>60</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>66</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginHandler('vip', $this-&gt;_redirect(<del>4</del>), $Organisation);</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>61</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginHandler('vip', $this-&gt;_redirect(<ins>3</ins>), $Organisation);</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>67</th><th>62</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>68</th><th>63</th><td class="l"><span></span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file1">
          <a title="Show the changeset 2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17 restricted to system/application/controllers/logout.php" href="http://dev2.theyorker.co.uk/trac/changeset/2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17/system/application/controllers/logout.php">system/application/controllers/logout.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 699f70798946ce38ccaf90f87dc509af30858fbc">
                    <a title="Show revision 699f70798946ce38ccaf90f87dc509af30858fbc of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/logout.php?rev=699f70798946ce38ccaf90f87dc509af30858fbc#L22">
                      r699f7</a>
                  </th>
                  <th title="Revision 2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17">
                    <a title="Show revision 2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/controllers/logout.php?rev=2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17#L22">
                      r2d7e9</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>22</th><th>22</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @note Duplicated from login</span> </td>
                  </tr><tr>
                          <th>23</th><th>23</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>24</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function _redirect($FirstSegment = <del>3</del>)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>24</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function _redirect($FirstSegment = <ins>2</ins>)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>25</th><th>25</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>26</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $uri_target = '';</span> </td>
                      </tr><tr>
                        <th>27</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ($segment_counter = $FirstSegment; $segment_counter &lt;= $this-&gt;uri-&gt;total_segments(); ++$segment_counter) {</span> </td>
                      </tr><tr>
                        <th>28</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $uri_target .= $this-&gt;uri-&gt;slash_segment($segment_counter);</span> </td>
                      </tr><tr>
                        <th>29</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                      </tr><tr>
                        <th>30</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; redirect($uri_target);</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>26</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; redirect(implode('/', array_slice($this-&gt;uri-&gt;rsegment_array(), $FirstSegment)));</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>31</th><th>27</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>32</th><th>28</th><td class="l"><span></span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file2">
          <a title="Show the changeset 2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17 restricted to system/application/libraries/Comments.php" href="http://dev2.theyorker.co.uk/trac/changeset/2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17/system/application/libraries/Comments.php">system/application/libraries/Comments.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision 1d2b7521840412f3b731fa7f3a5b20c8f2411217">
                    <a title="Show revision 1d2b7521840412f3b731fa7f3a5b20c8f2411217 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Comments.php?rev=1d2b7521840412f3b731fa7f3a5b20c8f2411217#L337">
                      r1d2b7</a>
                  </th>
                  <th title="Revision 2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17">
                    <a title="Show revision 2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Comments.php?rev=2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17#L337">
                      r2d7e9</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>337</th><th>337</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* @return FramesView,NULL View class or NULL if unsuccessful</span> </td>
                  </tr><tr>
                          <th>338</th><th>338</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>339</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; function CreateStandard(<del>&amp;</del>$ThreadId, $CommentInclude = NULL, $MaxPerPage = 20)</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>339</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; function CreateStandard(<ins></ins>$ThreadId, $CommentInclude = NULL, $MaxPerPage = 20)</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>340</th><th>340</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span> </td>
                  </tr><tr>
                          <th>341</th><th>341</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // get comments + thread</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Comments.php?rev=1d2b7521840412f3b731fa7f3a5b20c8f2411217#L344">…</a></th>
                  <th><a href="http://dev2.theyorker.co.uk/trac/browser/system/application/libraries/Comments.php?rev=2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17#L344">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>344</th><th>344</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $thread = $CI-&gt;comments_model-&gt;GetThreadById($ThreadId);</span> </td>
                  </tr><tr>
                          <th>345</th><th>345</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>346</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $thread = <del>&amp; </del>$ThreadId;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>346</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $thread = <ins></ins>$ThreadId;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>347</th><th>347</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>348</th><th>348</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (NULL === $thread) {</span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
      <li class="entry">
        <h2 id="file3">
          <a title="Show the changeset 2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17 restricted to system/application/models/comments_model.php" href="http://dev2.theyorker.co.uk/trac/changeset/2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17/system/application/models/comments_model.php">system/application/models/comments_model.php</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Revision cc628f10304310a6ce8a02bc97d9ff885e041a84">
                    <a title="Show revision cc628f10304310a6ce8a02bc97d9ff885e041a84 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/comments_model.php?rev=cc628f10304310a6ce8a02bc97d9ff885e041a84#L173">
                      rcc628</a>
                  </th>
                  <th title="Revision 2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17">
                    <a title="Show revision 2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17 of this file in browser" href="http://dev2.theyorker.co.uk/trac/browser/system/application/models/comments_model.php?rev=2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17#L173">
                      r2d7e9</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>173</th><th>173</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return 'LEFT JOIN comment_ratings as '.$rating_alias.'</span> </td>
                  </tr><tr>
                          <th>174</th><th>174</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ON '.$rating_alias.'.comment_rating_comment_thread_id = '.$thread_alias.'.comment_thread_id</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>175</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AND '.$rating_alias.'.comment_rating_author_entity_id = '.$<del>user_id</del>;</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>175</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AND '.$rating_alias.'.comment_rating_author_entity_id = '.$<ins>this-&gt;db-&gt;escape($user_id)</ins>;</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>176</th><th>176</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span> </td>
                  </tr><tr>
                          <th>177</th><th>177</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span> </td>
                  </tr>
            </tbody>
        </table>
      </li>
  </ul>
</div>
      </div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="http://dev2.theyorker.co.uk/trac/changeset/2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17?format=diff&new=2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17" class="diff">Unified Diff</a>
        </li><li class="last">
          <a rel="nofollow" href="http://dev2.theyorker.co.uk/trac/changeset/2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17?format=zip&new=2d7e9b4e5f6f1d38828ee50dee0acb9377bb6e17" class="zip">Zip Archive</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">
        Powered by <a href="../about.html"><strong>Trac 0.11.1</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.
      </p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>