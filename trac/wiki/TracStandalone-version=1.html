<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  

  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>
      TracStandalone â€“
      The Yorker
    </title>
        <link rel="search" href="../search.html" />
        <link rel="help" href="TracGuide.html" />
        <link rel="alternate" href="TracStandalone-version=1&format=txt.txt" type="text/x-trac-wiki" title="Plain Text" />
        <link rel="up" href="TracStandalone.html" title="View Latest Version" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/wiki.css" type="text/css" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search The Yorker" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/trac/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <meta name="ROBOTS" content="NOINDEX, NOFOLLOW" /><script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor("Link to this section");
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="../../trac.html"><img src="../../apps-logo.png" alt="The Yorker" /></a>
      </div>
      <form id="search" action="/trac/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first">logged in as nick_evans</li><li><a href="../../trac.html">Logout</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li><a href="../browser.html">Browse Source</a></li><li><a href="../report.html">View Tickets</a></li><li><a href="../newticket.html">New Ticket</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
            <li class="first "><span class="missing">&larr; Previous Version</span></li><li><a href="TracStandalone.html" title="View Latest Version">View Latest Version</a></li><li><span class="missing">Next Version &rarr;</span></li><li class="last"><a href="TracStandalone-action=diff&version=1.html">Last Change</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
        <table id="info" summary="Revision info">
          <tbody>
            <tr><th scope="row">
                Version 1 (modified by trac, <a class="timeline" href="../timeline-from=2009-05-10T03-18-06Z+0000&precision=second.html" title="2009-05-10T03:18:06Z+0000 in Timeline">6 years</a> ago)
            </th></tr>
            <tr><td class="message">
              <p>
--
</p>

            </td></tr>
          </tbody>
        </table>
      <div class="wikipage searchable">
        
          <h1 id="Tracd">Tracd</h1>
<p>
Tracd is a lightweight standalone Trac web server. In most cases it's easier to setup and runs faster than the <a class="wiki" href="TracCgi.html">CGI script</a>.
</p>
<h2 id="Pros">Pros</h2>
<ul><li>Fewer dependencies: You don't need to install apache or any other web-server.
</li><li>Fast: Should be almost as fast as the <a class="wiki" href="TracModPython.html">mod_python</a> version (and much faster than the <a class="wiki" href="TracCgi.html">CGI</a>).
</li><li>Automatic reloading: For development, Tracd can be used in <i>auto_reload</i> mode, which will automatically restart the server whenever you make a change to the code (in Trac itself or in a plugin).
</li></ul><h2 id="Cons">Cons</h2>
<ul><li>Fewer features: Tracd implements a very simple web-server and is not as configurable or as scalable as Apache HTTPD.
</li><li>No native HTTPS support: <a class="ext-link" href="http://www.rickk.com/sslwrap/"><span class="icon">sslwrap</span></a> can be used instead,
or <a class="ext-link" href="http://trac.edgewall.org/wiki/STunnelTracd"><span class="icon">stunnel -- a tutorial on how to use stunnel with tracd</span></a> or Apache with mod_proxy.
</li></ul><h2 id="Usageexamples">Usage examples</h2>
<p>
A single project on port 8080. (<a class="ext-link" href="http://localhost:8080/"><span class="icon">http://localhost:8080/</span></a>)
</p>
<pre class="wiki"> $ tracd -p 8080 /path/to/project
</pre><p>
Stricly speaking this will make your Trac accessible to everybody from your network rather than <i>localhost only</i>. To truly limit it use <i>--hostname</i> option.
</p>
<pre class="wiki"> $ tracd --hostname=localhost -p 8080 /path/to/project
</pre><p>
With more than one project. (<a class="ext-link" href="http://localhost:8080/project1/"><span class="icon">http://localhost:8080/project1/</span></a> and <a class="ext-link" href="http://localhost:8080/project2/"><span class="icon">http://localhost:8080/project2/</span></a>)
</p>
<pre class="wiki"> $ tracd -p 8080 /path/to/project1 /path/to/project2
</pre><p>
You can't have the last portion of the path identical between the projects since Trac uses that name to keep the URLs of the
different projects unique. So if you use <tt>/project1/path/to</tt> and <tt>/project2/path/to</tt>, you will only see the second project.
</p>
<p>
An alternative way to serve multiple projects is to specify a parent directory in which each subdirectory is a Trac project, using the <tt>-e</tt> option. The example above could be rewritten:
</p>
<pre class="wiki"> $ tracd -p 8080 -e /path/to
</pre><p>
To exit the server on Windows, be sure to use <tt>CTRL-BREAK</tt> -- using <tt>CTRL-C</tt> will leave a Python process running in the background.
</p>
<h2 id="UsingAuthentication">Using Authentication</h2>
<p>
Using tracd with Apache .htpasswd files:
</p>
<p>
To create a .htpasswd file using htpasswd:
</p>
<pre class="wiki">sudo htpasswd -c /path/to/env/.htpasswd username
</pre><p>
then for additional users:
</p>
<pre class="wiki">sudo htpasswd /var/www/html/.htpasswd-users username2
</pre><p>
then for starting the tracd:
</p>
<pre class="wiki">tracd -p 8080 --basic-auth=environmentname,/fullpath/environmentname/.htpasswd,/fullpath/environmentname /fullpath/environmentname
</pre><p>
Tracd provides support for both Basic and Digest authentication. The default is to use Digest; to use Basic authentication, replace <tt>--auth</tt> with <tt>--basic-auth</tt> in the examples below. (You must still specify a dialogic "realm", which can be an empty string by trailing the BASICAUTH with a comma.)
</p>
<blockquote>
<p>
<i>Support for Basic authentication was added in version 0.9.</i>
</p>
</blockquote>
<p>
The general format for using authentication is:
</p>
<pre class="wiki"> $ tracd -p port --auth=base_project_dir,password_file_path,realm project_path
</pre><p>
where:
</p>
<ul><li><strong>base_project_dir</strong> is the base directory of the project; note: this doesn't refer to the project name, and it is case-sensitive even for windows environments
</li><li><strong>password_file_path</strong> path of the password file
</li><li><strong>realm</strong> realm
</li><li><strong>project_path</strong> path of the project
</li></ul><p>
Example:
</p>
<pre class="wiki"> $ tracd -p 8080 \
   --auth=project1,/path/to/users.htdigest,mycompany.com /path/to/project1
</pre><p>
Of course, the digest file can be be shared so that it is used for more than one project:
</p>
<pre class="wiki"> $ tracd -p 8080 \
   --auth=project1,/path/to/users.htdigest,mycompany.com \
   --auth=project2,/path/to/users.htdigest,mycompany.com \
   /path/to/project1 /path/to/project2
</pre><p>
Another way to share the digest file is to specify "*"
for the project name:
</p>
<pre class="wiki"> $ tracd -p 8080 \
   --auth=*,/path/to/users.htdigest,mycompany.com \
   /path/to/project1 /path/to/project2
</pre><h2 id="Howtosetupanhtdigestpasswordfile">How to set up an htdigest password file</h2>
<p>
If you have Apache available, you can use the htdigest command to generate the password file. Type 'htdigest' to get some usage instructions, or read <a class="ext-link" href="http://httpd.apache.org/docs/2.0/programs/htdigest.html"><span class="icon">this page</span></a> from the Apache manual to get precise instructions.  You'll be prompted for a password to enter for each user that you create.  For the name of the password file, you can use whatever you like, but if you use something like <tt>users.htdigest</tt> it will remind you what the file contains. As a suggestion, put it in your &lt;projectname&gt;/conf folder along with the <a class="wiki" href="TracIni.html">trac.ini</a> file.
</p>
<p>
Note that you can start tracd without the --auth argument, but if you click on the <i>Login</i> link you will get an error.
</p>
<h2 id="GeneratingPasswordsWithoutApache">Generating Passwords Without Apache</h2>
<p>
If you don't have Apache available, you can use this simple Python script to generate your passwords:
</p>
<div class="code"><pre><span class="k">from</span> <span class="nn">optparse</span> <span class="k">import</span> OptionParser
<span class="k">import</span> <span class="nn">md5</span>

<span class="c"># build the options</span>
usage <span class="o">=</span> <span class="s">"usage: %prog [options]"</span>
parser <span class="o">=</span> OptionParser<span class="p">(</span>usage<span class="o">=</span>usage<span class="p">)</span>
parser<span class="o">.</span>add_option<span class="p">(</span><span class="s">"-u"</span><span class="p">,</span> <span class="s">"--username"</span><span class="p">,</span>action<span class="o">=</span><span class="s">"store"</span><span class="p">,</span> dest<span class="o">=</span><span class="s">"username"</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="s">"string"</span><span class="p">,</span>
                  help<span class="o">=</span><span class="s">"the username for whom to generate a password"</span><span class="p">)</span>
parser<span class="o">.</span>add_option<span class="p">(</span><span class="s">"-p"</span><span class="p">,</span> <span class="s">"--password"</span><span class="p">,</span>action<span class="o">=</span><span class="s">"store"</span><span class="p">,</span> dest<span class="o">=</span><span class="s">"password"</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="s">"string"</span><span class="p">,</span>
                  help<span class="o">=</span><span class="s">"the password to use"</span><span class="p">)</span>
<span class="p">(</span>options<span class="p">,</span> args<span class="p">)</span> <span class="o">=</span> parser<span class="o">.</span>parse_args<span class="p">()</span>

<span class="c"># check options</span>
<span class="k">if</span> <span class="p">(</span>options<span class="o">.</span>username <span class="ow">is</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>options<span class="o">.</span>password <span class="ow">is</span> <span class="bp">None</span><span class="p">):</span>
   parser<span class="o">.</span>error<span class="p">(</span><span class="s">"You must supply both the username and password"</span><span class="p">)</span>
   
<span class="c"># Generate the string to enter into the htdigest file</span>
realm <span class="o">=</span> <span class="s">'trac'</span>
kd <span class="o">=</span> <span class="k">lambda</span> x<span class="p">:</span> md5<span class="o">.</span>md5<span class="p">(</span><span class="s">':'</span><span class="o">.</span>join<span class="p">(</span>x<span class="p">))</span><span class="o">.</span>hexdigest<span class="p">()</span>
<span class="k">print</span> <span class="s">':'</span><span class="o">.</span>join<span class="p">((</span>options<span class="o">.</span>username<span class="p">,</span> realm<span class="p">,</span> kd<span class="p">([</span>options<span class="o">.</span>username<span class="p">,</span> realm<span class="p">,</span> options<span class="o">.</span>password<span class="p">])))</span>
</pre></div><p>
Note: If you use the above script you must use the --auth option to tracd, not --basic-auth, and you must set the realm in the --auth value to 'trac' (without the quotes). Example usage (assuming you saved the script as trac-digest.py):
</p>
<pre class="wiki">python trac-digest.py -u username -p password &gt;&gt; c:\digest.txt
tracd --port 8000 --auth=proj_name,c:\digest.txt,trac c:\path\to\proj_name
</pre><p>
Note: If you would like to use --basic-auth you need to use htpasswd tool from apache server to generate .htpasswd file. The remaining part is similar but make sure to use empty realm (i.e. coma after path). When using on Windows make sure to use -m option for it (did not tested it on *nix, so not sure if that is the case there).  If you do not have Apache, <a class="ext-link" href="http://trac.edgewall.org/intertrac/source%3A/tags/trac-0.11b2/contrib/htpasswd.py" title="source:/tags/trac-0.11b2/contrib/htpasswd.py in Trac project trac"><span class="icon">htpasswd.py</span></a> may help.  (Note that it requires a <tt>crypt</tt> or <tt>fcrypt</tt> module; see the source comments for details.)
</p>
<p>
It is possible to use md5sum utility to generate digest-password file using such method:
</p>
<pre class="wiki">echo -e "${user}:trac:${password}\c" | md5sum - &gt;&gt;to-file
</pre><p>
and manually delete " -" from the end and add "${user}:trac:" to the start of line from 'to-file'. You can see <a class="missing attachment" rel="nofollow">attachment:trac-digest-corrected.sh</a> for detail.
</p>
<h2 id="Tips">Tips</h2>
<h3 id="Servingstaticcontent">Serving static content</h3>
<p>
If <tt>tracd</tt> is the only webserver used for the project, 
it can also be used to distribute static content 
(tarballs, Doxygen documentation, etc.)
</p>
<p>
This static content should be put in the <tt>$TRAC_ENV/htdocs</tt> folder,
and is accessed by URLs like <tt>&lt;project_URL&gt;/chrome/site/...</tt>.
</p>
<p>
Example: given a <tt>$TRAC_ENV/htdocs/software-0.1.tar.gz</tt> file,
the corresponding relative URL would be <tt>/&lt;project_name&gt;/chrome/site/software-0.1.tar.gz</tt>, 
which in turn can be written using the relative link syntax
in the Wiki: <tt>[/&lt;project_name&gt;/chrome/site/software-0.1.tar.gz]</tt> 
</p>
<p>
The development version of Trac supports a new <tt>htdocs:</tt> <a class="wiki" href="TracLinks.html">TracLinks</a> 
syntax for the above. With this, the example link above can be written simply 
<tt>htdocs:software-0.1.tar.gz</tt>. 
</p>
<h3 id="Usingapacherewriterules">Using apache rewrite rules</h3>
<p>
In some situations when you choose to use tracd behind apache, you might experience issues with redirects, like being redirected to URLs with the wrong host or protocol. In this case (and only in this case), setting the <tt>[trac] use_base_url_for_redirect</tt> to <tt>true</tt> can help, as this will force Trac to use the value of <tt>[trac] base_url</tt> for doing the redirects.
</p>
<h3 id="Servingadifferentbasepaththan">Serving a different base path than /</h3>
<p>
Tracd supports serving projects with different base urls then /&lt;project&gt;. The parameter name to change this is
</p>
<pre class="wiki">tracd --base-path=/some/path
</pre><hr />
<p>
See also: <a class="wiki" href="TracInstall.html">TracInstall</a>, <a class="wiki" href="TracCgi.html">TracCgi</a>, <a class="wiki" href="TracModPython.html">TracModPython</a>, <a class="wiki" href="TracGuide.html">TracGuide</a>
</p>

        
        
      </div>
    </div>
    <script type="text/javascript">
        jQuery.loadStyleSheet("/trac/pygments/trac.css", "text/css");
    </script>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="last first">
          <a rel="nofollow" href="TracStandalone-version=1&format=txt.txt">Plain Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">
        Powered by <a href="../about.html"><strong>Trac 0.11.1</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.
      </p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>